/*! For license information please see main.f77db127.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,n){var r=n(853),i=n(43),a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return R(e(t))}catch(Wa){}}return null}var P=Array.isArray,D=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B,q,H=U(null),W=U(null),K=U(null),G=U(null);function Q(e,t){switch(z(K,t),z(W,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),z(H,e)}function Y(){V(H),V(W),V(K)}function J(e){null!==e.memoizedState&&z(G,e);var t=H.current,n=bd(t,e.type);t!==n&&(z(W,e),z(H,n))}function $(e){W.current===e&&(V(H),V(W)),G.current===e&&(V(G),dh._currentValue=O)}function X(e){if(void 0===B)try{throw Error()}catch(Wa){var t=Wa.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<Wa.stack.indexOf("\n    at")?" (<anonymous>)":-1<Wa.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Wa){var r=Wa}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Wa){return"\nError generating stack: "+Wa.message+"\n"+Wa.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,se=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,me=r.unstable_IdlePriority,pe=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof pe&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/Ee|0)|0},xe=Math.log,Ee=Math.LN2;var Se=256,ke=262144,_e=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?i=Ne(r):0!==(s&=o)?i=Ne(s):n||0!==(n=o&~e)&&(i=Ne(n)):0!==(o=r&~a)?i=Ne(o):0!==s?i=Ne(s):n||0!==(n=r&~e)&&(i=Ne(n)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:i}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=_e;return 0===(62914560&(_e<<=1))&&(_e=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Th(e.type)}function Ue(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Ve=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ve,Be="__reactProps$"+Ve,qe="__reactContainer$"+Ve,He="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Ke="__reactHandles$"+Ve,Ge="__reactResources$"+Ve,Qe="__reactMarker$"+Ve;function Ye(e){delete e[ze],delete e[Be],delete e[He],delete e[We],delete e[Ke]}function Je(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[ze])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[ze]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(st,i)&&(at.test(i)?ot[i]=!0:(st[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,a,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?wt(e,s,dt(t)):null!=n?wt(e,s,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,i,a,s,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function wt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(P(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Nt(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&Nt(e,a,t[a])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Pt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Ot=null;function Mt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Be]||null;if(!i)throw Error(s(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Ut(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Lt||null!==Ot)&&(eu(),Lt&&(t=Lt,e=Ot,Ot=Lt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Xh){Bt=!1}var Ht=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Jt(){return!1}function $t(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:Jt,this.isPropagationStopped=Jt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=f({},tn,{view:0,detail:0}),an=$t(rn),sn=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=$t(sn),ln=$t(f({},sn,{dataTransfer:0})),cn=$t(f({},rn,{relatedTarget:0})),un=$t(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=$t(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=$t(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function yn(){return gn}var vn=$t(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=$t(f({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=$t(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),xn=$t(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=$t(f({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=$t(f({},tn,{newState:0,oldState:0})),kn=[9,13,27,32],_n=zt&&"CompositionEvent"in window,Nn=null;zt&&"documentMode"in document&&(Nn=document.documentMode);var Tn=zt&&"TextEvent"in window&&!Nn,Cn=zt&&(!_n||Nn&&8<Nn&&11>=Nn),In=String.fromCharCode(32),jn=!1;function An(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function On(e,t,n,r){Lt?Ot?Ot.push(r):Ot=[r]:Lt=r,0<(t=id(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Fn=null;function Un(e){Ju(e,0)}function Vn(e){if(mt(Xe(e)))return e}function zn(e,t){if("change"===e)return t}var Bn=!1;if(zt){var qn;if(zt){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"===typeof Wn.oninput}qn=Hn}else qn=!1;Bn=qn&&(!document.documentMode||9<document.documentMode)}function Kn(){Mn&&(Mn.detachEvent("onpropertychange",Gn),Fn=Mn=null)}function Gn(e){if("value"===e.propertyName&&Vn(Fn)){var t=[];On(t,Fn,e,Dt(e)),Ut(Un,t)}}function Qn(e,t,n){"focusin"===e?(Kn(),Fn=n,(Mn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Fn)}function Jn(e,t){if("click"===e)return Vn(t)}function $n(e,t){if("input"===e||"change"===e)return Vn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Xn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=zt&&"documentMode"in document&&11>=document.documentMode,sr=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==pt(r)||("selectionStart"in(r=sr)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=id(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},mr={};function pr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return fr[e]=n[t];return e}zt&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=pr("animationend"),yr=pr("animationiteration"),vr=pr("animationstart"),br=pr("transitionrun"),wr=pr("transitionstart"),xr=pr("transitioncancel"),Er=pr("transitionend"),Sr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Sr.set(e,t),rt(t,[e])}kr.push("scrollEnd");var Nr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Cr=0,Ir=0;function jr(){for(var e=Cr,t=Ir=Cr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var a=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==a&&Dr(n,i,a)}}function Ar(e,t,n,r){Tr[Cr++]=e,Tr[Cr++]=t,Tr[Cr++]=n,Tr[Cr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Ar(e,t,n,r),Lr(e)}function Pr(e,t){return Ar(e,null,null,t),Lr(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-we(n),null===(r=(e=a.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),a):null}function Lr(e){if(50<Wc)throw Wc=0,Kc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Mr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,a){var o=0;if(r=e,"function"===typeof e)Ur(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Fr(31,n,t,i)).elementType=T,e.lanes=a,e;case y:return qr(n.children,i,a,t);case v:o=8,i|=24;break;case b:return(e=Fr(12,n,t,2|i)).elementType=b,e.lanes=a,e;case S:return(e=Fr(13,n,t,i)).elementType=S,e.lanes=a,e;case k:return(e=Fr(19,n,t,i)).elementType=k,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case E:o=11;break e;case _:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function qr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Jr=0,$r=null,Xr=0,Zr=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Yr[Jr++]=Xr,Yr[Jr++]=$r,$r=e,Xr=t}function ai(e,t,n){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-we(r)-1;r&=~(1<<i),n+=1;var a=32-we(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ni=1<<32-we(t)+i|n<<i|r,ri=a+e}else ni=1<<a|n<<i|r,ri=e}function si(e){null!==e.return&&(ii(e,1),ai(e,1,0))}function oi(e){for(;e===$r;)$r=Yr[--Jr],Yr[Jr]=null,Xr=Yr[--Jr],Yr[Jr]=null;for(;e===ti;)ti=Zr[--ei],Zr[ei]=null,ri=Zr[--ei],Zr[ei]=null,ni=Zr[--ei],Zr[ei]=null}function li(e,t){Zr[ei++]=ni,Zr[ei++]=ri,Zr[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,di=!1,hi=null,fi=!1,mi=Error(s(519));function pi(e){throw xi(Qr(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Be]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)$u(Qu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||pi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!di)return yi(e),di=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ui&&pi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ui=Od(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ui=Od(e)}else 27===n?(n=ui,Td(e.type)?(e=Ld,Ld=null,ui=e):ui=n):ui=ci?Dd(e.stateNode.nextSibling):null;return!0}function bi(){ui=ci=null,di=!1}function wi(){var e=hi;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),hi=null),e}function xi(e){null===hi?hi=[e]:hi.push(e)}var Ei=U(null),Si=null,ki=null;function _i(e,t,n){z(Ei,t._currentValue),t._currentValue=n}function Ni(e){e._currentValue=Ei.current,V(Ei)}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ti(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ti(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ii(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Xn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}i=i.return}null!==e&&Ci(t,e,n,r),t.flags|=262144}function ji(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ai(e){Si=e,ki=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ri(e){return Di(Si,e)}function Pi(e,t){return null===Si&&Ai(e),Di(e,t)}function Di(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ki){if(null===e)throw Error(s(308));ki=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ki=ki.next=t;return n}var Li="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Oi=r.unstable_scheduleCallback,Mi=r.unstable_NormalPriority,Fi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ui(){return{controller:new Li,data:new Map,refCount:0}}function Vi(e){e.refCount--,0===e.refCount&&Oi(Mi,function(){e.controller.abort()})}var zi=null,Bi=0,qi=0,Hi=null;function Wi(){if(0===--Bi&&null!==zi){null!==Hi&&(Hi.status="fulfilled");var e=zi;zi=null,qi=0,Hi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ki=D.S;D.S=function(e,t){Dc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zi){var n=zi=[];Bi=0,qi=qu(),Hi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(Wi,Wi)}(0,t),null!==Ki&&Ki(e,t)};var Gi=U(null);function Qi(){var e=Gi.current;return null!==e?e:pc.pooledCache}function Yi(e,t){z(Gi,null===t?Gi.current:t.pool)}function Ji(){var e=Qi();return null===e?null:{parent:Fi._currentValue,pool:e}}var $i=Error(s(460)),Xi=Error(s(474)),Zi=Error(s(542)),ea={then:function(){}};function ta(e){return"fulfilled"===(e=e.status)||"rejected"===e}function na(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e}throw ia=t,$i}}function ra(e){try{return(0,e._init)(e._payload)}catch(Wa){if(null!==Wa&&"object"===typeof Wa&&"function"===typeof Wa.then)throw ia=Wa,$i;throw Wa}}var ia=null;function aa(){if(null===ia)throw Error(s(459));var e=ia;return ia=null,e}function sa(e){if(e===$i||e===Zi)throw Error(s(483))}var oa=null,la=0;function ca(e){var t=la;return la+=1,null===oa&&(oa=[]),na(oa,e,t)}function ua(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function da(e,t){if(t.$$typeof===m)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ha(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===N&&ra(a)===t.type)?(ua(t=i(t,n.props),n),t.return=e,t):(ua(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=qr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return ua(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case N:return h(e,t=ra(t),n)}if(P(t)||j(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ca(t),n);if(t.$$typeof===x)return h(e,Pi(e,t),n);da(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,n=ra(n),r)}if(P(n)||j(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ca(n),r);if(n.$$typeof===x)return f(e,t,Pi(e,n),r);da(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return m(e,t,n,r=ra(r),i)}if(P(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return m(e,t,n,ca(r),i);if(r.$$typeof===x)return m(e,t,n,Pi(t,r),i);da(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ra(b)===c.type){n(l,c.sibling),ua(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=qr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ua(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Kr(u,l.mode,d)).return=l,l=d}return o(l);case N:return v(l,c,u=ra(u),d)}if(P(u))return function(i,s,o,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(i,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(i,d),di&&ii(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(s=a(d,s,p),null===u?c=d:u.sibling=d,u=d);return di&&ii(i,p),c}for(d=r(d);p<o.length;p++)null!==(g=m(d,i,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=a(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),di&&ii(i,p),c}(l,c,u,d);if(j(u)){if("function"!==typeof(b=j(u)))throw Error(s(150));return function(i,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(i,p,v.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(i,p),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return n(i,p),di&&ii(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return di&&ii(i,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=m(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),di&&ii(i,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,ca(u),d);if(u.$$typeof===x)return v(l,c,Pi(l,u),d);da(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Hr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{la=0;var i=v(e,t,n,r);return oa=null,i}catch(Wa){if(Wa===$i||Wa===Zi)throw Wa;var a=Fr(29,Wa,null,e.mode);return a.lanes=r,a.return=e,a}}}var fa=ha(!0),ma=ha(!1),pa=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&mc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Dr(e,null,n),t}return Ar(e,r,t,n),Lr(e)}function wa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function xa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ea=!1;function Sa(){if(Ea){if(null!==Hi)throw Hi}}function ka(e,t,n,r){Ea=!1;var i=e.updateQueue;pa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(yc&h)===h:(r&h)===h){0!==h&&h===qi&&(Ea=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(y,d,h):p)||void 0===h)break e;d=f({},d,h);break e;case 2:pa=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=i.callbacks)?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(m=o).next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),_c|=s,e.lanes=s,e.memoizedState=d}}function _a(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Na(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_a(n[e],t)}var Ta=U(null),Ca=U(0);function Ia(e,t){z(Ca,e=Sc),z(Ta,t),Sc=e|t.baseLanes}function ja(){z(Ca,Sc),z(Ta,Ta.current)}function Aa(){Sc=Ca.current,V(Ta),V(Ca)}var Ra=U(null),Pa=null;function Da(e){var t=e.alternate;z(Ua,1&Ua.current),z(Ra,e),null===Pa&&(null===t||null!==Ta.current||null!==t.memoizedState)&&(Pa=e)}function La(e){z(Ua,Ua.current),z(Ra,e),null===Pa&&(Pa=e)}function Oa(e){22===e.tag?(z(Ua,Ua.current),z(Ra,e),null===Pa&&(Pa=e)):Ma()}function Ma(){z(Ua,Ua.current),z(Ra,Ra.current)}function Fa(e){V(Ra),Pa===e&&(Pa=null),V(Ua)}var Ua=U(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Rd(n)||Pd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=0,Ba=null,qa=null,Ha=null,Ka=!1,Ga=!1,Qa=!1,Ya=0,Ja=0,$a=null,Xa=0;function Za(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ts(e,t,n,r,i,a){return za=a,Ba=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?yo:vo,Qa=!1,a=n(r,i),Qa=!1,Ga&&(a=rs(t,n,r,i)),ns(e),a}function ns(e){D.H=go;var t=null!==qa&&null!==qa.next;if(za=0,Ha=qa=Ba=null,Ka=!1,Ja=0,$a=null,t)throw Error(s(300));null===e||Do||null!==(e=e.dependencies)&&ji(e)&&(Do=!0)}function rs(e,t,n,r){Ba=e;var i=0;do{if(Ga&&($a=null),Ja=0,Ga=!1,25<=i)throw Error(s(301));if(i+=1,Ha=qa=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}D.H=bo,a=t(n,r)}while(Ga);return a}function is(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?us(t):t,e=e.useState()[0],(null!==qa?qa.memoizedState:null)!==e&&(Ba.flags|=1024),t}function as(){var e=0!==Ya;return Ya=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function os(e){if(Ka){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ka=!1}za=0,Ha=qa=Ba=null,Ga=!1,Ja=Ya=0,$a=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ha?Ba.memoizedState=Ha=e:Ha=Ha.next=e,Ha}function cs(){if(null===qa){var e=Ba.alternate;e=null!==e?e.memoizedState:null}else e=qa.next;var t=null===Ha?Ba.memoizedState:Ha.next;if(null!==t)Ha=t,qa=e;else{if(null===e){if(null===Ba.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(qa=e).memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},null===Ha?Ba.memoizedState=Ha=e:Ha=Ha.next=e}return Ha}function us(e){var t=Ja;return Ja+=1,null===$a&&($a=[]),e=na($a,e,t),t=Ba,null===(null===Ha?t.memoizedState:Ha.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?yo:vo),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return us(e);if(e.$$typeof===x)return Ri(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=Ba.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Ba.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ba.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function fs(e,t){return"function"===typeof t?t(e):t}function ms(e){return ps(cs(),qa,e)}function ps(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(yc&h)===h:(za&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===qi&&(d=!0);else{if((za&f)===f){u=u.next,f===qi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Ba.lanes|=f,_c|=f}h=u.action,Qa&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,Ba.lanes|=h,_c|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Xn(a,e.memoizedState)&&(Do=!0,d&&null!==(n=Hi)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gs(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Xn(a,t.memoizedState)||(Do=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ys(e,t,n){var r=Ba,i=cs(),a=di;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Xn((qa||i).memoizedState,n);if(o&&(i.memoizedState=n,Do=!0),i=i.queue,Bs(ws.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ha&&1&Ha.memoizedState.tag){if(r.flags|=2048,Ms(9,{destroy:void 0},bs.bind(null,r,i,n,t),null),null===pc)throw Error(s(349));a||0!==(127&za)||vs(r,t,n)}return n}function vs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ba.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ba.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bs(e,t,n,r){t.value=n,t.getSnapshot=r,xs(t)&&Es(e)}function ws(e,t,n){return n(function(){xs(t)&&Es(e)})}function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function Es(e){var t=Pr(e,2);null!==t&&Yc(t,e,2)}function Ss(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),Qa){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t}function ks(e,t,n,r){return e.baseState=n,ps(e,qa,"function"===typeof r?r:fs)}function _s(e,t,n,r,i){if(fo(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==D.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Ns(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Ns(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=D.T,s={};D.T=s;try{var o=n(i,r),l=D.S;null!==l&&l(s,o),Ts(e,t,o)}catch(c){Is(e,t,c)}finally{null!==a&&null!==s.types&&(a.types=s.types),D.T=a}}else try{Ts(e,t,a=n(i,r))}catch(u){Is(e,t,u)}}function Ts(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Cs(e,t,n)},function(n){return Is(e,t,n)}):Cs(e,t,n)}function Cs(e,t,n){t.status="fulfilled",t.value=n,js(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ns(e,n)))}function Is(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,js(t),t=t.next}while(t!==r)}e.action=null}function js(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function As(e,t){return t}function Rs(e,t){if(di){var n=pc.formState;if(null!==n){e:{var r=Ba;if(di){if(ui){t:{for(var i=ui,a=fi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=Dd(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ui=Dd(i.nextSibling),r="F!"===i.data;break e}}pi(r)}r=!1}r&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},n.queue=r,n=co.bind(null,Ba,r),r.dispatch=n,r=Ss(!1),a=ho.bind(null,Ba,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=ls()).queue=i,n=_s.bind(null,Ba,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ps(e){return Ds(cs(),qa,e)}function Ds(e,t,n){if(t=ps(e,t,As)[0],e=ms(fs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=us(t)}catch(Wa){if(Wa===$i)throw Zi;throw Wa}else r=t;var i=(t=cs()).queue,a=i.dispatch;return n!==t.memoizedState&&(Ba.flags|=2048,Ms(9,{destroy:void 0},Ls.bind(null,i,n),null)),[r,a,e]}function Ls(e,t){e.action=t}function Os(e){var t=cs(),n=qa;if(null!==n)return Ds(t,n,e);cs(),t=t.memoizedState;var r=(n=cs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ms(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Ba.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ba.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fs(){return cs().memoizedState}function Us(e,t,n,r){var i=ls();Ba.flags|=e,i.memoizedState=Ms(1|t,{destroy:void 0},n,void 0===r?null:r)}function Vs(e,t,n,r){var i=cs();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==qa&&null!==r&&es(r,qa.memoizedState.deps)?i.memoizedState=Ms(t,a,n,r):(Ba.flags|=e,i.memoizedState=Ms(1|t,a,n,r))}function zs(e,t){Us(8390656,8,e,t)}function Bs(e,t){Vs(2048,8,e,t)}function qs(e){var t=cs().memoizedState;return function(e){Ba.flags|=4;var t=Ba.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ba.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Hs(e,t){return Vs(4,2,e,t)}function Ws(e,t){return Vs(4,4,e,t)}function Ks(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Gs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Ks.bind(null,t,e),n)}function Qs(){}function Ys(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&es(t,r[1]))return r[0];if(r=e(),Qa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function $s(e,t,n){return void 0===n||0!==(1073741824&za)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Ba.lanes|=e,_c|=e,n)}function Xs(e,t,n,r){return Xn(n,t)?n:null!==Ta.current?(e=$s(e,n,r),Xn(e,t)||(Do=!0),e):0===(42&za)||0!==(1073741824&za)&&0===(261930&yc)?(Do=!0,e.memoizedState=n):(e=Qc(),Ba.lanes|=e,_c|=e,t)}function Zs(e,t,n,r,i){var a=L.p;L.p=0!==a&&8>a?a:8;var s=D.T,o={};D.T=o,ho(e,!1,t,n);try{var l=i(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else uo(e,t,r,Gc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{L.p=a,null!==s&&null!==o.types&&(s.types=o.types),D.T=s}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=no(e).queue;Zs(e,i,t,O,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Gc())}function io(){return Ri(dh)}function ao(){return cs().memoizedState}function so(){return cs().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=ba(t,e=va(n),n);return null!==r&&(Yc(r,t,n),wa(r,t,n)),t={cache:Ui()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?mo(t,n):null!==(n=Rr(e,t,n,r))&&(Yc(n,e,r),po(n,t,r))}function co(e,t,n){uo(e,t,n,Gc())}function uo(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))mo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Xn(o,s))return Ar(e,t,i,0),null===pc&&jr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Yc(n,e,r),po(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(s(479))}else null!==(t=Rr(e,n,r,2))&&Yc(t,e,2)}function fo(e){var t=e.alternate;return e===Ba||null!==t&&t===Ba}function mo(e,t){Ga=Ka=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var go={readContext:Ri,use:ds,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};go.useEffectEvent=Za;var yo={readContext:Ri,use:ds,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:zs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){Us(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var r=e();if(Qa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ls();if(void 0!==n){var i=n(t);if(Qa){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=lo.bind(null,Ba,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=co.bind(null,Ba,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qs,useDeferredValue:function(e,t){return $s(ls(),e,t)},useTransition:function(){var e=Ss(!1);return e=Zs.bind(null,Ba,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ba,i=ls();if(di){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pc)throw Error(s(349));0!==(127&yc)||vs(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,zs(ws.bind(null,r,a,e),[e]),r.flags|=2048,Ms(9,{destroy:void 0},bs.bind(null,r,a,n,t),null),n},useId:function(){var e=ls(),t=pc.identifierPrefix;if(di){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-we(ni)-1)).toString(32)+n),0<(n=Ya++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xa++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:io,useFormState:Rs,useActionState:Rs,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,Ba,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return ls().memoizedState=oo.bind(null,Ba)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&mc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Ri,use:ds,useCallback:Ys,useContext:Ri,useEffect:Bs,useImperativeHandle:Gs,useInsertionEffect:Hs,useLayoutEffect:Ws,useMemo:Js,useReducer:ms,useRef:Fs,useState:function(){return ms(fs)},useDebugValue:Qs,useDeferredValue:function(e,t){return Xs(cs(),qa.memoizedState,e,t)},useTransition:function(){var e=ms(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:ys,useId:ao,useHostTransitionStatus:io,useFormState:Ps,useActionState:Ps,useOptimistic:function(e,t){return ks(cs(),0,e,t)},useMemoCache:hs,useCacheRefresh:so};vo.useEffectEvent=qs;var bo={readContext:Ri,use:ds,useCallback:Ys,useContext:Ri,useEffect:Bs,useImperativeHandle:Gs,useInsertionEffect:Hs,useLayoutEffect:Ws,useMemo:Js,useReducer:gs,useRef:Fs,useState:function(){return gs(fs)},useDebugValue:Qs,useDeferredValue:function(e,t){var n=cs();return null===qa?$s(n,e,t):Xs(n,qa.memoizedState,e,t)},useTransition:function(){var e=gs(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:ys,useId:ao,useHostTransitionStatus:io,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var n=cs();return null!==qa?ks(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:so};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qs;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=va(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ba(e,i,r))&&(Yc(t,e,r),wa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=va(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ba(e,i,r))&&(Yc(t,e,r),wa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=va(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ba(e,r,n))&&(Yc(t,e,n),wa(t,e,n))}};function Eo(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(i,a))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function ko(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function _o(e){Nr(e)}function No(e){console.error(e)}function To(e){Nr(e)}function Co(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Io(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jo(e,t,n){return(n=va(n)).tag=3,n.payload={element:null},n.callback=function(){Co(e,t)},n}function Ao(e){return(e=va(e)).tag=3,e}function Ro(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Io(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Io(t,n,r),"function"!==typeof i&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Po=Error(s(461)),Do=!1;function Lo(e,t,n,r){t.child=null===e?ma(t,null,n,r):fa(t,e.child,n,r)}function Oo(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Ai(t),r=ts(e,t,n,s,a,i),o=as(),null===e||Do?(di&&o&&si(t),t.flags|=1,Lo(e,t,r,i),t.child):(ss(e,t,i),al(e,t,i))}function Mo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ur(a)||void 0!==a.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fo(e,t,a,r,i))}if(a=e.child,!sl(e,i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(s,r)&&e.ref===t.ref)return al(e,t,i)}return t.flags|=1,(e=Vr(a,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(Zn(a,r)&&e.ref===t.ref){if(Do=!1,t.pendingProps=r=a,!sl(e,i))return t.lanes=e.lanes,al(e,t,i);0!==(131072&e.flags)&&(Do=!0)}}return Wo(e,t,n,r,i)}function Uo(e,t,n,r){var i=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return zo(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zo(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==a?a.cachePool:null),null!==a?Ia(t,a):ja(),Oa(t)}else null!==a?(Yi(0,a.cachePool),Ia(t,a),Ma(),t.memoizedState=null):(null!==e&&Yi(0,null),ja(),Ma());return Lo(e,t,i,n),t.child}function Vo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zo(e,t,n,r,i){var a=Qi();return a=null===a?null:{parent:Fi._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Yi(0,null),ja(),Oa(t),null!==e&&Ii(e,t,r,!0),t.childLanes=i,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return fa(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Fa(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,i){return Ai(t),n=ts(e,t,n,r,void 0,i),r=as(),null===e||Do?(di&&r&&si(t),t.flags|=1,Lo(e,t,n,i),t.child):(ss(e,t,i),al(e,t,i))}function Ko(e,t,n,r,i,a){return Ai(t),t.updateQueue=null,n=rs(t,r,n,i),ns(e),r=as(),null===e||Do?(di&&r&&si(t),t.flags|=1,Lo(e,t,n,a),t.child):(ss(e,t,a),al(e,t,a))}function Go(e,t,n,r,i){if(Ai(t),null===t.stateNode){var a=Or,s=n.contextType;"object"===typeof s&&null!==s&&(a=Ri(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=xo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ga(t),s=n.contextType,a.context="object"===typeof s&&null!==s?Ri(s):Or,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(wo(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&xo.enqueueReplaceState(a,a.state,null),ka(t,r,a,i),Sa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=ko(n,o);a.props=l;var c=a.context,u=n.contextType;s=Or,"object"===typeof u&&null!==u&&(s=Ri(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==s)&&So(t,a,r,s),pa=!1;var h=t.memoizedState;a.state=h,ka(t,r,a,i),Sa(),c=t.memoizedState,o||h!==c||pa?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=pa||Eo(t,n,l,r,h,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),u=ko(n,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Ri(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&So(t,a,r,l),pa=!1,h=t.memoizedState,a.state=h,ka(t,r,a,i),Sa();var f=t.memoizedState;s!==d||h!==f||pa||null!==e&&null!==e.dependencies&&ji(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=pa||Eo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ji(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ho(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=fa(t,e.child,null,i),t.child=fa(t,null,n,i)):Lo(e,t,n,i),t.memoizedState=a.state,e=t.child):e=al(e,t,i),e}function Qo(e,t,n,r){return bi(),t.flags|=256,Lo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Ji()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function Xo(e,t,n){var r,i=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ua.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(di){if(a?Da(t):Ma(),(e=ui)?null!==(e=null!==(e=Ad(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw pi(t);return Pd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Ma(),l=el({mode:"hidden",children:l},a=t.mode),i=qr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Jo(n),i.childLanes=$o(e,r,n),t.memoizedState=Yo,Vo(null,i)):(Da(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Da(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),l=i.fallback,a=t.mode,i=el({mode:"visible",children:i.children},a),(l=qr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fa(t,e.child,null,n),(i=t.child).memoizedState=Jo(n),i.childLanes=$o(e,r,n),t.memoizedState=Yo,t=Vo(null,i));else if(Da(t),Pd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,xi({value:i,source:null,stack:null}),t=tl(e,t,n)}else if(Do||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Do||r){if(null!==(r=pc)&&(0!==(i=Le(r,n))&&i!==c.retryLane))throw c.retryLane=i,Pr(e,i),Yc(r,e,i),Po;Rd(l)||ou(),t=tl(e,t,n)}else Rd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Dd(l.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return a?(Ma(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=Vr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Vr(u,l):(l=qr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Vo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Jo(n):(null!==(a=l.cachePool)?(c=Fi._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Ji(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=$o(e,r,n),t.memoizedState=Yo,Vo(e.child,i)):(Da(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return fa(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function rl(e,t,n,r,i,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.treeForkCount=a)}function il(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var s=Ua.current,o=0!==(2&s);if(o?(s=1&s|2,t.flags|=128):s&=1,z(Ua,s),Lo(e,t,r,n),r=di?Xr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rl(t,!1,i,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rl(t,!0,n,null,a,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_c|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ji(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Do=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),_i(0,Fi,e.memoizedState.cache),bi();break;case 27:case 5:J(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,La(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Da(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Xo(e,t,n):(Da(t),null!==(e=al(e,t,n))?e.sibling:null);Da(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return il(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(Ua,Ua.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:_i(0,Fi,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,di&&0!==(1048576&t.flags)&&ai(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ra(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===E){t.tag=11,t=Oo(null,t,e,r,n);break e}if(i===_){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=R(e)||e,Error(s(306,t,""))}Ur(e)?(r=ko(e,r),t.tag=1,t=Go(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return Go(e,t,r=t.type,i=ko(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,ya(e,t),ka(t,r,null,n);var o=t.memoizedState;if(r=o.cache,_i(0,Fi,r),r!==a.cache&&Ci(t,[Fi],n,!0),Sa(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Qo(e,t,r,n);break e}if(r!==i){xi(i=Qr(Error(s(424)),t)),t=Qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Dd(e.firstChild),ci=t,di=!0,hi=null,fi=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),r===i){t=al(e,t,n);break e}Lo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:di||(n=t.type,e=t.pendingProps,(r=yd(K.current).createElement(n))[ze]=t,r[Be]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&di&&(r=t.stateNode=Fd(t.type,t.pendingProps,K.current),ci=t,fi=!0,i=ui,Td(t.type)?(Ld=i,ui=Dd(r.firstChild)):ui=i),Lo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&di&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=Dd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Dd(r.firstChild),fi=!1,i=!0):i=!1),i||pi(t)),J(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,wd(i,a)?r=null:null!==o&&wd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ts(e,t,is,null,null,n),dh._currentValue=i),Ho(e,t),Lo(e,t,r,n),t.child;case 6:return null===e&&di&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||pi(t)),null;case 13:return Xo(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fa(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return Oo(e,t,t.type,t.pendingProps,n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),Lo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ai(t),r=r(i=Ri(i)),t.flags|=1,Lo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(di){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Vo(null,e);if(La(t),(e=ui)?null!==(e=null!==(e=Ad(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw pi(t);return t.lanes=536870912,null}return Bo(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(La(t),i)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Do||Ii(e,t,n,!1),i=0!==(n&e.childLanes),Do||i){if(null!==(r=pc)&&0!==(o=Le(r,n))&&o!==a.retryLane)throw a.retryLane=o,Pr(e,o),Yc(r,e,o),Po;ou(),t=qo(e,t,n)}else e=a.treeContext,ui=Dd(o.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=Vr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return Ai(t),r=Ri(Fi),null===e?(null===(i=Qi())&&(i=pc,a=Ui(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ga(t),_i(0,Fi,i)):(0!==(e.lanes&n)&&(ya(e,t),ka(t,null,null,n),Sa()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Fi,r)):(r=a.cache,_i(0,Fi,r),r!==i.cache&&Ci(t,[Fi],n,!0))),Lo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw ia=ea,Xi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!iu())throw ia=ea,Xi;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?je():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ml(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ni(Fi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wi())),fl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(ll(t),null!==a?(fl(t),ul(t,a)):(fl(t),cl(t,i,0,0,n))):a?a!==e.memoizedState?(ll(t),fl(t),ul(t,a)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,i,0,0,n)),null;case 27:if($(t),n=K.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return fl(t),null}e=H.current,vi(t)?gi(t):(e=Fd(i,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if($(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return fl(t),null}if(a=H.current,vi(t))gi(t);else{var o=yd(K.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}a[ze]=t,a[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(fd(a,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=K.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||pi(t,!0)}else(e=yd(e).createTextNode(r))[ze]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fa(t),t):(Fa(t),null);if(0!==(128&t.flags))throw Error(s(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),i=!1}else i=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Fa(t),t):(Fa(t),null)}return Fa(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&ed(t.stateNode.containerInfo),fl(t),null;case 10:return Ni(t.type),fl(t),null;case 19:if(V(Ua),null===(r=t.memoizedState))return fl(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)hl(r,!1);else{if(0!==kc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Va(e))){for(t.flags|=128,hl(r,!1),e=a.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Ua,1&Ua.current|2),di&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Lc&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Va(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!di)return fl(t),null}else 2*le()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ua.current,z(Ua,i?1&n|2:1&n),di&&ii(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Fa(t),Aa(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Gi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ni(Fi),fl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ni(Fi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Fa(t),null===t.alternate)throw Error(s(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Ua),null;case 4:return Y(),null;case 10:return Ni(t.type),null;case 22:case 23:return Fa(t),Aa(),null!==e&&V(Gi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ni(Fi),null;default:return null}}function gl(e,t){switch(oi(t),t.tag){case 3:Ni(Fi),Y();break;case 26:case 27:case 5:$(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Fa(t);break;case 13:Fa(t);break;case 19:V(Ua);break;case 10:Ni(t.type);break;case 22:case 23:Fa(t),Aa(),null!==e&&V(Gi);break;case 24:Ni(Fi)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){ku(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){ku(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){ku(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Na(t,n)}catch(r){ku(e,e.return,r)}}}function wl(e,t,n){n.props=ko(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ku(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){ku(e,t,i)}}function El(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){ku(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){ku(e,t,a)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ku(e,e.return,i)}}function kl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||dd(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":a=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:m!==h&&dd(e,t,f,m,r,h)}}return void vt(e,o,l,c,u,d,a,i);case"select":for(a in m=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(a)||dd(e,t,a,null,r,c)}for(i in r)if(a=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&dd(e,t,i,a,r,c)}return t=l,n=o,r=m,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&dd(e,t,o,i,r,a)}return void Et(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else dd(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else dd(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:dd(e,t,u,f,r,m)}return;default:if(Ct(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&hd(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||hd(e,t,d,f,r,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&dd(e,t,v,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||dd(e,t,h,f,r,m)}(r,e.type,n,t),r[Be]=t}catch(i){ku(e,e.return,i)}}function _l(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Td(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_l(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Td(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Td(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Td(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fd(t,r,n),t[ze]=e,t[Be]=n}catch(a){ku(e,e.return,a)}}var jl=!1,Al=!1,Rl=!1,Pl="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){ku(n,n.return,s)}else{var i=ko(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ku(n,n.return,o)}}64&r&&bl(n),512&r&&xl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Na(e,t)}catch(s){ku(n,n.return,s)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&xl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&zl(e,n);break;case 13:Yl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Cu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||jl)){t=null!==t&&null!==t.memoizedState||Al,i=jl;var a=Al;jl=r,(Al=t)&&!a?$l(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),jl=i,Al=a}break;case 30:break;default:Yl(e,n)}}function Ol(e){var t=e.alternate;null!==t&&(e.alternate=null,Ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:Al||El(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||El(n,t);var r=Ml,i=Fl;Td(n.type)&&(Ml=n.stateNode,Fl=!1),Ul(e,t,n),Ud(n.stateNode),Ml=r,Fl=i;break;case 5:Al||El(n,t);case 6:if(r=Ml,i=Fl,Ml=null,Ul(e,t,n),Fl=i,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(s){ku(n,t,s)}else try{Ml.removeChild(n.stateNode)}catch(s){ku(n,t,s)}break;case 18:null!==Ml&&(Fl?(Cd(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Cd(Ml,n.stateNode));break;case 4:r=Ml,i=Fl,Ml=n.stateNode.containerInfo,Fl=!0,Ul(e,t,n),Ml=r,Fl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),Al||vl(4,n,t),Ul(e,t,n);break;case 1:Al||(El(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Al=(r=Al)||null!==n.memoizedState,Ul(e,t,n),Al=r;break;default:Ul(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){ku(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){ku(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Pl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Pl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Td(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(s(160));Vl(a,o,i),Ml=null,Fl=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(Al||null===n||El(n,n.return)),64&r&&jl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),Gl(e),512&r&&(Al||null===n||El(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Qe]||a[ze]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),fd(a,r,n),a[ze]=e,et(a),r=a;break e;case"link":var o=rh("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(o=rh("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[ze]=e,et(a),r=a}e.stateNode=r}else ih(i,e.type,e.stateNode);else e.stateNode=Xd(i,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?ih(i,e.type,e.stateNode):Xd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&kl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(Al||null===n||El(n,n.return)),null!==n&&4&r&&kl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(Al||null===n||El(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(p){ku(e,e.return,p)}}4&r&&null!=e.stateNode&&kl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Rl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){ku(e,e.return,p)}}break;case 3:if(nh=null,i=Wl,Wl=Bd(t.containerInfo),Hl(t,e),Wl=i,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(p){ku(e,e.return,p)}Rl&&(Rl=!1,Ql(e));break;case 4:r=Wl,Wl=Bd(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Pc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=jl,d=Al;if(jl=u||i,Al=d||c,Hl(t,e),Al=d,jl=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||jl||Al||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){ku(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){ku(c,c.return,p)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;i?Id(m,!0):Id(c.stateNode,!1)}catch(p){ku(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(_l(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;Cl(e,Nl(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(kt(a,""),n.flags&=-33),Cl(e,Nl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Tl(e,Nl(e),o);break;default:throw Error(s(161))}}catch(l){ku(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Jl(t);break;case 1:El(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Jl(t);break;case 27:Ud(t.stateNode);case 26:case 5:El(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:$l(i,a,n),yl(4,a);break;case 1:if($l(i,a,n),"function"===typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){ku(r,r.return,c)}if(null!==(i=(r=a).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)_a(l[i],o)}catch(c){ku(r,r.return,c)}}n&&64&s&&bl(a),xl(a,a.return);break;case 27:Il(a);case 26:case 5:$l(i,a,n),n&&null===r&&4&s&&Sl(a),xl(a,a.return);break;case 12:$l(i,a,n);break;case 31:$l(i,a,n),n&&4&s&&zl(i,a);break;case 13:$l(i,a,n),n&&4&s&&Bl(i,a);break;case 22:null===a.memoizedState&&$l(i,a,n),xl(a,a.return);break;case 30:break;default:$l(i,a,n)}t=t.sibling}}function Xl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vi(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vi(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&i&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vi(e)));break;case 12:if(2048&i){ec(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ku(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?ec(e,t,n,r):rc(e,t):2&a._visibility?ec(e,t,n,r):(a._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Xl(s,t);break;case 24:ec(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function nc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:nc(a,s,o,l,i),yl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?nc(a,s,o,l,i):rc(a,s):(u._visibility|=2,nc(a,s,o,l,i)),i&&2048&c&&Xl(s.alternate,s);break;case 24:nc(a,s,o,l,i),i&&2048&c&&Zl(s.alternate,s);break;default:nc(a,s,o,l,i)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:rc(n,r),2048&i&&Xl(r.alternate,r);break;case 24:rc(n,r),2048&i&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var ic=8192;function ac(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Gd(r.href),a=t.querySelector(Qd(i));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=Yd(r),(i=Vd.get(i))&&eh(r,i),et(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),fd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Wl;Wl=Bd(e.stateNode.containerInfo),ac(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ic,ic=16777216,ac(e,t,n),ic=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Dl;){var n=Dl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Vi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Dl=r;else e:for(n=e;null!==Dl;){var i=(r=Dl).sibling,a=r.return;if(Ol(r),r===n){Dl=null;break e}if(null!==i){i.return=a,Dl=i;break e}Dl=a}}}var hc={getCacheForType:function(e){var t=Ri(Fi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ri(Fi).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,mc=0,pc=null,gc=null,yc=0,vc=0,bc=null,wc=!1,xc=!1,Ec=!1,Sc=0,kc=0,_c=0,Nc=0,Tc=0,Cc=0,Ic=0,jc=null,Ac=null,Rc=!1,Pc=0,Dc=0,Lc=1/0,Oc=null,Mc=null,Fc=0,Uc=null,Vc=null,zc=0,Bc=0,qc=null,Hc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&mc)&&0!==yc?yc&-yc:null!==D.T?qu():Fe()}function Qc(){if(0===Cc)if(0===(536870912&yc)||di){var e=ke;0===(3932160&(ke<<=1))&&(ke=262144),Cc=e}else Cc=536870912;return null!==(e=Ra.current)&&(e.flags|=32),Cc}function Yc(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,yc,Cc,!1)),Re(e,n),0!==(2&mc)&&e===pc||(e===pc&&(0===(2&mc)&&(Nc|=n),4===kc&&Zc(e,yc,Cc,!1)),Ou(e))}function Jc(e,t,n){if(0!==(6&mc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=r?function(e,t){var n=mc;mc|=2;var r=au(),i=su();pc!==e||yc!==t?(Oc=null,Lc=le()+500,nu(e,t)):xc=Ce(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var a=bc;t:switch(vc){case 1:vc=0,bc=null,fu(e,t,a,1);break;case 2:case 9:if(ta(a)){vc=0,bc=null,hu(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Ou(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ta(a)?(vc=0,bc=null,hu(t)):(vc=0,bc=null,fu(e,t,a,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ah(o):l.stateNode.complete){vc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,mu(u)):gc=null}break t}}vc=0,bc=null,fu(e,t,a,5);break;case 6:vc=0,bc=null,fu(e,t,a,6);break;case 8:tu(),kc=6;break e;default:throw Error(s(462))}}uu();break}catch(d){ru(e,d)}return ki=Si=null,D.H=r,D.A=i,mc=n,null!==gc?0:(pc=null,yc=0,jr(),kc)}(e,t):lu(e,t,!0),a=r;;){if(0===i){xc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!a||Xc(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=jc;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(Ec&&!c){l.errorRecoveryDisabledLanes|=a,Nc|=a,i=4;break e}a=Ac,Ac=i,null!==a&&(null===Ac?Ac=a:Ac.push.apply(Ac,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,a=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Cc,!wc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Pc+300-le())){if(Zc(r,t,Cc,!wc),0!==Te(r,0,!0))break e;zc=t,r.timeoutHandle=Ed($c.bind(null,r,n,Ac,Oc,Rc,t,Cc,Nc,Ic,wc,a,"Throttled",-0,0),i)}else $c(r,n,Ac,Oc,Rc,t,Cc,Nc,Ic,wc,a,null,-0,0)}break}i=lu(e,t,!1),a=!1}Ou(e)}function $c(e,t,n,r,i,a,s,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var m=(62914560&a)===a?Pc-le():(4194048&a)===a?Dc-le():0;if(m=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,s=i.initiatorType,o=i.duration;if(a&&o&&md(s)){for(s=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(s+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(a+s)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,m),null!==m)return zc=a,e.cancelPendingCommit=m(gu.bind(null,e,t,a,n,r,i,s,o,l,u,d,null,h,f)),void Zc(e,a,s,!c)}gu(e,t,a,n,r,i,s,o,l)}function Xc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Xn(a(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Tc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-we(i),s=1<<a;r[a]=-1,i&=~s}0!==n&&Pe(e,n,t)}function eu(){return 0!==(6&mc)||(Mu(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else ki=Si=null,os(e=gc),oa=null,la=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,tu(),pc=e,gc=n=Vr(e.current,null),yc=t,vc=0,bc=null,wc=!1,xc=Ce(e,t),Ec=!1,Ic=Cc=Tc=Nc=_c=kc=0,Ac=jc=null,Rc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),a=1<<i;t|=e[i],r&=~a}return Sc=t,jr(),n}function ru(e,t){Ba=null,D.H=go,t===$i||t===Zi?(t=aa(),vc=3):t===Xi?(t=aa(),vc=4):vc=t===Po?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(kc=1,Co(e,Qr(t,e.current)))}function iu(){var e=Ra.current;return null===e||((4194048&yc)===yc?null===Pa:((62914560&yc)===yc||0!==(536870912&yc))&&e===Pa)}function au(){var e=D.H;return D.H=go,null===e?go:e}function su(){var e=D.A;return D.A=hc,e}function ou(){kc=4,wc||(4194048&yc)!==yc&&null!==Ra.current||(xc=!0),0===(134217727&_c)&&0===(134217727&Nc)||null===pc||Zc(pc,yc,Cc,!1)}function lu(e,t,n){var r=mc;mc|=2;var i=au(),a=su();pc===e&&yc===t||(Oc=null,nu(e,t)),t=!1;var s=kc;e:for(;;)try{if(0!==vc&&null!==gc){var o=gc,l=bc;switch(vc){case 8:tu(),s=6;break e;case 3:case 2:case 9:case 6:null===Ra.current&&(t=!0);var c=vc;if(vc=0,bc=null,fu(e,o,l,c),n&&xc){s=0;break e}break;default:c=vc,vc=0,bc=null,fu(e,o,l,c)}}cu(),s=kc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,ki=Si=null,mc=r,D.H=i,D.A=a,null===gc&&(pc=null,yc=0,jr()),s}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!se();)du(gc)}function du(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:os(t);default:gl(n,t),t=ol(n,t=gc=zr(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function fu(e,t,n,r){ki=Si=null,os(t),oa=null,la=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=Ra.current)){switch(n.tag){case 31:case 13:return null===Pa?ou():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),_u(e,r,i)),!1;case 22:return n.flags|=65536,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),_u(e,r,i)),!1}throw Error(s(435,n.tag))}return _u(e,r,i),ou(),!1}if(di)return null!==(t=Ra.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==mi&&xi(Qr(e=Error(s(422),{cause:r}),n))):(r!==mi&&xi(Qr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Qr(r,n),xa(e,i=jo(e.stateNode,r,i)),4!==kc&&(kc=2)),!1;var a=Error(s(520),{cause:r});if(a=Qr(a,n),null===jc?jc=[a]:jc.push(a),4!==kc&&(kc=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,xa(n,e=jo(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Mc||!Mc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Ro(i=Ao(i),e,n,r),xa(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,yc))return kc=1,Co(e,Qr(n,e.current)),void(gc=null)}catch(a){if(null!==i)throw gc=i,a;return kc=1,Co(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(di||1===r?e=!0:xc||0!==(536870912&yc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ra.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):mu(t)}function mu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,wc);e=t.return;var n=ml(t.alternate,t,Sc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===kc&&(kc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);kc=6,gc=null}function gu(e,t,n,r,i,a,o,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Fc);if(0!==(6&mc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=Ir,o,l,c),e===pc&&(gc=pc=null,yc=0),Vc=t,Uc=e,zc=n,Bc=a,qc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(he,function(){return Eu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,i=L.p,L.p=2,o=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,pd=wh,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){switch(a=(t=Dl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var p=ko(n.type,i);e=r.getSnapshotBeforeUpdate(p,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ku(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))jd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}}(e,t)}finally{mc=o,L.p=i,D.T=r}}Fc=1,yu(),vu(),bu()}}function yu(){if(1===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var i=mc;mc|=4;try{Kl(t,e);var a=gd,s=rr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(s=g,g=p,p=s);var y=tr(o,p),v=tr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}wh=!!pd,gd=pd=null}finally{mc=i,L.p=r,D.T=n}}e.current=t,Fc=2}}function vu(){if(2===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=L.p;L.p=2;var i=mc;mc|=4;try{Ll(e,t.alternate,t)}finally{mc=i,L.p=r,D.T=n}}Fc=3}}function bu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Uc,t=Vc,n=zc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Vc=Uc=null,wu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Mc=null),Me(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,i=L.p,L.p=2,D.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{D.T=t,L.p=i}}0!==(3&zc)&&xu(),Ou(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Mu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vi(t)))}function xu(){return yu(),vu(),bu(),Eu()}function Eu(){if(5!==Fc)return!1;var e=Uc,t=Bc;Bc=0;var n=Me(zc),r=D.T,i=L.p;try{L.p=32>n?32:n,D.T=null,n=qc,qc=null;var a=Uc,o=zc;if(Fc=0,Vc=Uc=null,zc=0,0!==(6&mc))throw Error(s(331));var l=mc;if(mc|=4,cc(a.current),tc(a,a.current,o,n),mc=l,Mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(c){}return!0}finally{L.p=i,D.T=r,wu(e,t)}}function Su(e,t,n){t=Qr(n,t),null!==(e=ba(e,t=jo(e.stateNode,t,2),2))&&(Re(e,2),Ou(e))}function ku(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Qr(n,e),null!==(r=ba(t,n=Ao(2),2))&&(Ro(n,r,t,e),Re(r,2),Ou(r));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Ec=!0,i.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(yc&n)===n&&(4===kc||3===kc&&(62914560&yc)===yc&&300>le()-Pc?0===(2&mc)&&nu(e,0):Tc|=n,Ic===yc&&(Ic=0)),Ou(e)}function Tu(e,t){0===t&&(t=je()),null!==(e=Pr(e,t))&&(Re(e,t),Ou(e))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}var ju=null,Au=null,Ru=!1,Pu=!1,Du=!1,Lu=0;function Ou(e){e!==Au&&null===e.next&&(null===Au?ju=Au=e:Au=Au.next=e),Pu=!0,Ru||(Ru=!0,_d(function(){0!==(6&mc)?ie(ue,Fu):Uu()}))}function Mu(e,t){if(!Du&&Pu){Du=!0;do{for(var n=!1,r=ju;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-we(42|e)+1)-1,a=201326741&(a&=i&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Bu(r,a))}else a=yc,0===(3&(a=Te(r,r===pc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ce(r,a)||(n=!0,Bu(r,a));r=r.next}}while(n);Du=!1}}function Fu(){Uu()}function Uu(){Pu=Ru=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Lu);for(var t=le(),n=null,r=ju;null!==r;){var i=r.next,a=Vu(r,t);0===a?(r.next=null,null===n?ju=i:n.next=i,null===i&&(Au=n)):(n=r,(0!==e||0!==(3&a))&&(Pu=!0)),r=i}0!==Fc&&5!==Fc||Mu(e,!1),0!==Lu&&(Lu=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-we(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=yc,n=Te(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=me}return r=zu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=Te(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(xu())return null;Jc(e,t,!0)}function qu(){if(0===Lu){var e=qi;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Lu=e}return Lu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<kr.length;Ku++){var Gu=kr[Ku];_r(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}_r(gr,"onAnimationEnd"),_r(yr,"onAnimationIteration"),_r(vr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(br,"onTransitionRun"),_r(wr,"onTransitionStart"),_r(xr,"onTransitionCancel"),_r(Er,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Nr(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Nr(u)}i.currentTarget=null,a=l}}}}function $u(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function Xu(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Xu(t,!1,e),Xu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Xu("selectionchange",!1,t))}}function td(e,t,n,r){switch(Th(t)){case 2:var i=xh;break;case 8:i=Eh;break;default:i=Sh}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=Je(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}o=o.parentNode}}r=r.return}Ut(function(){var r=a,i=Dt(n),s=[];e:{var o=Sr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case yr:case vr:c=un;break;case Er:c=xn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Vt(p,f))&&d.push(rd(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,i),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Je(u)&&!u[qe])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Je(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:Xe(c),m=null==u?o:Xe(u),(o=new d(g,p+"leave",c,n,i)).target=h,o.relatedTarget=m,g=null,Je(i)===r&&((d=new d(f,p+"enter",u,n,i)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,p=u,m=0,g=f=c;g;g=d(g))m++;g=0;for(var y=p;y;y=d(y))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)p=d(p),g--;for(;m--;){if(f===p||null!==p&&f===p.alternate){d=f;break e}f=d(f),p=d(p)}d=null}else d=null;null!==c&&sd(s,o,c,d,!1),null!==u&&null!==h&&sd(s,h,u,d,!0)}if("select"===(c=(o=r?Xe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=zn;else if(Ln(o))if(Bn)v=$n;else{v=Yn;var b=Qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Ct(r.elementType)&&(v=zn):v=Jn;switch(v&&(v=v(e,r))?On(s,v,n,i):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wt(o,"number",o.value)),b=r?Xe(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(sr=b,or=r,lr=null);break;case"focusout":lr=or=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,i);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(s,n,i)}var w;if(_n)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Pn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Pn&&(w=Gt()):(Wt="value"in(Ht=i)?Ht.value:Ht.textContent,Pn=!0)),0<(b=id(r,x)).length&&(x=new hn(x,e,null,n,i),s.push({event:x,listeners:b}),w?x.data=w:null!==(w=Rn(n))&&(x.data=w))),(w=Tn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(jn=!0,In);case"textInput":return(e=t.data)===In&&jn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!_n&&An(e,t)?(e=Gt(),Kt=Wt=Ht=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=id(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,i),s.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=Hu((i[Be]||null).action),s=r.submitter;s&&null!==(t=(t=s[Be]||null)?Hu(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=s?Wu(i,s):new FormData(i);to(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=s?Wu(i,s):new FormData(i),to(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,r,n,i)}Ju(s,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function id(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Vt(e,n))&&r.unshift(rd(e,i,a)),null!=(i=Vt(e,t))&&r.push(rd(e,i,a))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Vt(n,a))&&s.unshift(rd(n,c,l)):i||null!=(c=Vt(n,a))&&s.push(rd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,i,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Tt(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&dd(e,t,"name",i.name,i,null),dd(e,t,"formEncType",i.formEncType,i,null),dd(e,t,"formMethod",i.formMethod,i,null),dd(e,t,"formTarget",i.formTarget,i,null)):(dd(e,t,"encType",i.encType,i,null),dd(e,t,"method",i.method,i,null),dd(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hd(e,t,n,r,i,a){switch(n){case"style":Tt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Be]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dd(e,t,r,o,n,null)}}return a&&dd(e,t,"srcSet",n.srcSet,n,null),void(i&&dd(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=r=o=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:dd(e,t,i,d,n,null)}}return void bt(e,r,l,c,u,o,a,!1);case"select":for(a in $u("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:dd(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in $u("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:dd(e,t,o,l,n,null)}return void St(e,i,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else dd(e,t,c,i,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(i=0;i<Qu.length;i++)$u(Qu[i],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dd(e,t,u,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&hd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&dd(e,t,l,i,n,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,gd=null;function yd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var Ed="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,kd="function"===typeof Promise?Promise:void 0,_d="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof kd?function(e){return kd.resolve(null).then(e).catch(Nd)}:Ed;function Nd(e){setTimeout(function(){throw e})}function Td(e){return"head"===e}function Cd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[Qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}else"body"===n&&Ud(e.ownerDocument.body);n=i}while(n);Wh(t)}function Id(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function jd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}function Rd(e){return"$?"===e.data||"$~"===e.data}function Pd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ld=null;function Od(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=yd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Vd=new Map,zd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=L.d;L.d={f:function(){var e=qd.f(),t=eu();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):qd.r(e)},D:function(e){qd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Hd;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var a=i;switch(t){case"style":a=Gd(e);break;case"script":a=Jd(e)}Vd.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vd.set(a,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Qd(a))||"script"===t&&r.querySelector($d(a))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Jd(e)}if(!Vd.has(a)&&(e=f({rel:"modulepreload",href:e},t),Vd.set(a,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(a)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,i=Jd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=f({src:e,async:!0},t),(t=Vd.get(i))&&th(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,n){qd.S(e,t,n);var r=Hd;if(r&&e){var i=Ze(r).hoistableStyles,a=Gd(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(Qd(a)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vd.get(a))&&eh(e,n);var l=s=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){qd.M(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,i=Jd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Vd.get(i))&&th(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),zd.has(i)||(zd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var i,a,o,l,c=(c=K.current)?Bd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Vd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vd.set(e,n),u||(i=c,a=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),fd(a,"link",o),et(a),i.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gd(e){return'href="'+yt(e)+'"'}function Qd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+yt(e)+'"]'}function $d(e){return"script[async]"+e}function Xd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Gd(n.href);var a=e.querySelector(Qd(i));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Yd(n),(i=Vd.get(i))&&eh(r,i),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(a,"link",r),t.state.loading|=4,Zd(a,n.precedence,e),t.instance=a;case"script":return a=Jd(n.src),(i=e.querySelector($d(a)))?(t.instance=i,et(i),i):(r=n,(i=Vd.get(a))&&th(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),fd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,i=nh=new Map;i.set(n,r)}else(r=(i=nh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Qe]||a[ze]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function ih(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(a=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=oh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var dh={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function hh(e,t,n,r,i,a,s,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,r,i,a,s,o,l,c,u,d){return e=new hh(e,t,n,s,l,c,u,d,o),t=1,!0===a&&(t|=24),a=Fr(3,null,null,t),e.current=a,a.stateNode=e,(t=Ui()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ga(a),e}function mh(e){return e?e=Or:Or}function ph(e,t,n,r,i,a){i=mh(i),null===r.context?r.context=i:r.pendingContext=i,(r=va(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ba(e,r,t))&&(Yc(n,0,t),wa(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&Yc(t,0,67108864),yh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Pr(e,t=Oe(t));null!==n&&Yc(n,0,t),yh(e,t)}}var wh=!0;function xh(e,t,n,r){var i=D.T;D.T=null;var a=L.p;try{L.p=2,Sh(e,t,n,r)}finally{L.p=a,D.T=i}}function Eh(e,t,n,r){var i=D.T;D.T=null;var a=L.p;try{L.p=8,Sh(e,t,n,r)}finally{L.p=a,D.T=i}}function Sh(e,t,n,r){if(wh){var i=kh(r);if(null===i)nd(e,t,r,_h,n),Oh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ih=Mh(Ih,e,t,n,r,i),!0;case"dragenter":return jh=Mh(jh,e,t,n,r,i),!0;case"mouseover":return Ah=Mh(Ah,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rh.set(a,Mh(Rh.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ph.set(a,Mh(Ph.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Oh(e,r),4&t&&-1<Lh.indexOf(e)){for(;null!==i;){var a=$e(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=Ne(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-we(s);o.entanglements[1]|=l,s&=~l}Ou(a),0===(6&mc)&&(Lc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Pr(a,2))&&Yc(o,0,2),eu(),yh(a,2)}if(null===(a=kh(r))&&nd(e,t,r,_h,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else nd(e,t,r,null,n)}}function kh(e){return Nh(e=Dt(e))}var _h=null;function Nh(e){if(_h=null,null!==(e=Je(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _h=e,null}function Th(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case me:return 268435456;default:return 32}default:return 32}}var Ch=!1,Ih=null,jh=null,Ah=null,Rh=new Map,Ph=new Map,Dh=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(t.pointerId)}}function Mh(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=$e(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Fh(e){var t=Je(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kh(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Vh(e,t,n){Uh(e)&&n.delete(t)}function zh(){Ch=!1,null!==Ih&&Uh(Ih)&&(Ih=null),null!==jh&&Uh(jh)&&(jh=null),null!==Ah&&Uh(Ah)&&(Ah=null),Rh.forEach(Vh),Ph.forEach(Vh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ch||(Ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var qh=null;function Hh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Nh(r||n))continue;break}var a=$e(n);null!==a&&(e.splice(t,3),t-=3,to(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wh(e){function t(t){return Bh(t,e)}null!==Ih&&Bh(Ih,e),null!==jh&&Bh(jh,e),null!==Ah&&Bh(Ah,e),Rh.forEach(t),Ph.forEach(t);for(var n=0;n<Dh.length;n++){var r=Dh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dh.length&&null===(n=Dh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Dh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Be]||null;if("function"===typeof a)s||Hh(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Be]||null)o=s.formAction;else if(null!==Nh(i))continue}else o=s.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Gh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ph(t.current,Gc(),e,t,null,null)},Qh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),eu(),t[qe]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dh.length&&0!==t&&t<Dh[n].priority;n++);Dh.splice(n,0,e),0===n&&Fh(e)}};var Yh=i.version;if("19.2.4"!==Yh)throw Error(s(527,Yh,"19.2.4"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return d(i),e;if(a===r)return d(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Jh={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ye=$h.inject(Jh),ve=$h}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,r="",i=_o,a=No,l=To;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,r,null,i,a,l,Kh),e[qe]=t.current,ed(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var r=!1,i="",a=_o,l=No,c=To,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fh(e,1,!0,t,0,r,i,u,a,l,c,Kh)).context=mh(null),n=t.current,(i=va(r=Oe(r=Gc()))).callback=null,ba(n,i,r),n=r,t.current.lanes=n,Re(t,n),Ou(t),e[qe]=t.current,ed(e),new Qh(t)},t.version="19.2.4"},672(e,t,n){var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},288(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=w.prototype=new b;x.constructor=w,g(x,v.prototype),x.isPureReactComponent=!0;var E=Array.isArray;function S(){}var k={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function N(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return j((u=e._init)(e._payload),t,i,a,s)}}if(u)return s=s(e),u=""===a?"."+I(e,0):a,E(s)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),j(s,t,i,"",function(e){return e})):null!=s&&(T(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+u,s=N(l.type,c,l.props)),t.push(s)),1;u=0;var d,f=""===a?".":a+":";if(E(e))for(var p=0;p<e.length;p++)u+=j(a=e[p],t,i,o=f+I(a,p),s);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(a=e.next()).done;)u+=j(a=a.value,t,i,o=f+I(a,p++),s);else if("object"===o){if("function"===typeof e.then)return j(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=D,t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)!_.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];r.children=s}return N(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return N(e,a,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,P)}catch(a){P(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useEffectEvent=function(e){return k.H.useEffectEvent(e)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.2.4"},43(e,t,n){e.exports=n(288)},579(e,t,n){e.exports=n(799)},896(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,k||(k=!0,S());else{var t=r(u);null!==t&&R(E,t.startTime-e)}}var S,k=!1,_=-1,N=5,T=-1;function C(){return!!y||!(t.unstable_now()-T<N)}function I(){if(y=!1,k){var e=t.unstable_now();T=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(_),_=-1),m=!0;var a=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(E,l.startTime-e),n=!1}}break e}finally{h=null,f=a,m=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=I,S=function(){A.postMessage(null)}}else S=function(){v(I,0)};function R(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(_),_=-1):g=!0,R(E,a-s))):(e.sortIndex=o,n(c,e),p||m||(p=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(896)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".1a120d38.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ikhaya-rent-properties:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[s,o,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkikhaya_rent_properties=self.webpackChunkikhaya_rent_properties||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n.t(r,2),a=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new f;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(e){return function(e){const t=d(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDemoKeyForLocalDevelopmentOnly123456",REACT_APP_FIREBASE_APP_ID:"1:123456789012:web:abcdef1234567890abcdef",REACT_APP_FIREBASE_AUTH_DOMAIN:"demo-ikhaya-rent.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789012",REACT_APP_FIREBASE_PROJECT_ID:"demo-ikhaya-rent",REACT_APP_FIREBASE_STORAGE_BUCKET:"demo-ikhaya-rent.appspot.com",REACT_APP_USE_FIREBASE_EMULATORS:"true"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},b=e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},x=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]};class E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function S(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function k(e){return(await fetch(e,{credentials:"include"})).ok}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(a)),""].join(".")}const N={};let T=!1;function C(e,t){if("undefined"===typeof window||"undefined"===typeof document||!S(window.location.host)||N[e]===t||N[e]||T)return;function n(e){return"__firebase__banner__".concat(e)}N[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(N))N[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{T=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function I(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function j(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function A(){return!j()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,a,t)}}const L=/\{\$([^}]+)}/g;function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(M(n)&&M(a)){if(!O(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function U(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B(){}function q(e){return e&&e._delegate?e._delegate:e}class H{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const W="[DEFAULT]";class K{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new E;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:W})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===W?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;return this.component?this.component.multipleInstances?e:W:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new K(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Q=[];var Y;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Y||(Y={}));const J={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},$=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Z=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class ee{constructor(e){this.name=e,this._logLevel=$,this._logHandler=Z,this._userLogHandler=null,Q.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?J[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...t),this._logHandler(this,Y.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...t),this._logHandler(this,Y.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Y.INFO,...t),this._logHandler(this,Y.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Y.WARN,...t),this._logHandler(this,Y.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...t),this._logHandler(this,Y.ERROR,...t)}}let te,ne;const re=new WeakMap,ie=new WeakMap,ae=new WeakMap,se=new WeakMap,oe=new WeakMap;let le={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ae.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return de(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ce(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(he(this),n),de(re.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return de(e.apply(he(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(he(this),t,...r);return ae.set(a,t.sort?t.sort():[t]),de(a)}}function ue(e){return"function"===typeof e?ce(e):(e instanceof IDBTransaction&&function(e){if(ie.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ie.set(e,t)}(e),t=e,(te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,le):e);var t}function de(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(de(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&re.set(t,e)}).catch(()=>{}),oe.set(t,e),t}(e);if(se.has(e))return se.get(e);const t=ue(e);return t!==e&&(se.set(e,t),oe.set(t,e)),t}const he=e=>oe.get(e);const fe=["get","getKey","getAll","getAllKeys","count"],me=["put","add","delete","clear"],pe=new Map;function ge(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(pe.get(t))return pe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=me.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!fe.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return pe.set(t,a),a}le=(e=>u(u({},e),{},{get:(t,n,r)=>ge(t,n)||e.get(t,n,r),has:(t,n)=>!!ge(t,n)||e.has(t,n)}))(le);class ye{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ve="@firebase/app",be="0.14.8",we=new ee("@firebase/app"),xe="@firebase/app-compat",Ee="@firebase/analytics-compat",Se="@firebase/analytics",ke="@firebase/app-check-compat",_e="@firebase/app-check",Ne="@firebase/auth",Te="@firebase/auth-compat",Ce="@firebase/database",Ie="@firebase/data-connect",je="@firebase/database-compat",Ae="@firebase/functions",Re="@firebase/functions-compat",Pe="@firebase/installations",De="@firebase/installations-compat",Le="@firebase/messaging",Oe="@firebase/messaging-compat",Me="@firebase/performance",Fe="@firebase/performance-compat",Ue="@firebase/remote-config",Ve="@firebase/remote-config-compat",ze="@firebase/storage",Be="@firebase/storage-compat",qe="@firebase/firestore",He="@firebase/ai",We="@firebase/firestore-compat",Ke="firebase",Ge="[DEFAULT]",Qe={[ve]:"fire-core",[xe]:"fire-core-compat",[Se]:"fire-analytics",[Ee]:"fire-analytics-compat",[_e]:"fire-app-check",[ke]:"fire-app-check-compat",[Ne]:"fire-auth",[Te]:"fire-auth-compat",[Ce]:"fire-rtdb",[Ie]:"fire-data-connect",[je]:"fire-rtdb-compat",[Ae]:"fire-fn",[Re]:"fire-fn-compat",[Pe]:"fire-iid",[De]:"fire-iid-compat",[Le]:"fire-fcm",[Oe]:"fire-fcm-compat",[Me]:"fire-perf",[Fe]:"fire-perf-compat",[Ue]:"fire-rc",[Ve]:"fire-rc-compat",[ze]:"fire-gcs",[Be]:"fire-gcs-compat",[qe]:"fire-fst",[We]:"fire-fst-compat",[He]:"fire-vertex","fire-js":"fire-js",[Ke]:"fire-js-all"},Ye=new Map,Je=new Map,$e=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){we.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ze(e){const t=e.name;if($e.has(t))return we.debug("There were multiple attempts to register component ".concat(t,".")),!1;$e.set(t,e);for(const n of Ye.values())Xe(n,e);for(const n of Je.values())Xe(n,e);return!0}function et(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tt(e){return null!==e&&void 0!==e&&void 0!==e.settings}const nt=new D("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rt{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new H("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nt.create("app-deleted",{appName:this._name})}}const it="12.9.0";function at(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=u({name:Ge,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw nt.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw nt.create("no-options");const a=Ye.get(i);if(a){if(O(n,a.options)&&O(r,a.config))return a;throw nt.create("duplicate-app",{appName:i})}const s=new G(i);for(const l of $e.values())s.addComponent(l);const o=new rt(n,r,s);return Ye.set(i,o),o}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;const t=Ye.get(e);if(!t&&e===Ge&&w())return at();if(!t)throw nt.create("no-app",{appName:e});return t}function ot(e,t,n){var r;let i=null!==(r=Qe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void we.warn(e.join(" "))}Ze(new H("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const lt="firebase-heartbeat-store";let ct=null;function ut(){return ct||(ct=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=de(s);return r&&s.addEventListener("upgradeneeded",e=>{r(de(s.result),e.oldVersion,e.newVersion,de(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(lt)}catch(n){console.warn(n)}}}).catch(e=>{throw nt.create("idb-open",{originalErrorMessage:e.message})})),ct}async function dt(e,t){try{const n=(await ut()).transaction(lt,"readwrite"),r=n.objectStore(lt);await r.put(t,ht(e)),await n.done}catch(n){if(n instanceof P)we.warn(n.message);else{const e=nt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});we.warn(e.message)}}}function ht(e){return"".concat(e.name,"!").concat(e.options.appId)}class ft{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){we.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=mt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),gt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return we.warn(t),""}}}function mt(){return(new Date).toISOString().substring(0,10)}class pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!R()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ut()).transaction(lt),n=await t.objectStore(lt).get(ht(e));return await t.done,n}catch(t){if(t instanceof P)we.warn(t.message);else{const e=nt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});we.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return dt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return dt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function gt(e){return m(JSON.stringify({version:2,heartbeats:e})).length}var yt;yt="",Ze(new H("platform-logger",e=>new ye(e),"PRIVATE")),Ze(new H("heartbeat",e=>new ft(e),"PRIVATE")),ot(ve,be,yt),ot(ve,be,"esm2020"),ot("fire-js","");function vt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}ot("firebase","12.9.0","app");const bt=["providerId"],wt=["uid","auth","stsTokenManager"],xt=["providerId","signInMethod"];function Et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const St=Et,kt=new D("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new ee("@firebase/auth");function Nt(e){if(_t.logLevel<=Y.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_t.error("Auth (".concat(it,"): ").concat(e),...n)}}function Tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw At(e,...n)}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return At(e,...n)}function It(e,t,n){const r=u(u({},St()),{},{[t]:n});return new D("auth","Firebase",r).create(t,{appName:e.name})}function jt(e){return It(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return kt.create(e,...n)}function Rt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw At(t,...r)}}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nt(t),new Error(t)}function Dt(e,t){e||Pt(t)}function Lt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ot(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ft(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ot()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ut{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ft()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vt(e,t){Dt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class zt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ht=new Ut(3e4,6e4);function Wt(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function Kt(e,t,n,r){return Gt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const s=F(u({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&S(e.emulatorConfig.host)&&(l.credentials="include"),zt.fetch()(await Yt(e,e.config.apiHost,n,s),l)})}async function Gt(e,t,n){e._canInitEmulator=!1;const r=u(u({},Bt),t);try{const t=new $t(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Xt(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw It(e,o,s);Tt(e,o)}}catch(i){if(i instanceof P)throw i;Tt(e,"network-request-failed",{message:String(i)})}}async function Qt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await Kt(e,t,n,r,i);return"mfaPendingCredential"in a&&Tt(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function Yt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),a=e,s=a.config.emulator?Vt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(qt.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(s).toString()}return s}function Jt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $t{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ct(this.auth,"network-request-failed")),Ht.get())})}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ct(e,t,r);return i.customData._tokenResponse=n,i}function Zt(e){return void 0!==e&&void 0!==e.enterprise}class en{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tn(e,t){return Kt(e,"GET","/v2/recaptchaConfig",Wt(e,t))}async function nn(e,t){return Kt(e,"POST","/v1/accounts:lookup",t)}function rn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function an(e){return 1e3*Number(e)}function sn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(Nt("Failed to decode base64 JWT payload"),null)}catch(i){return Nt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function on(e){const t=sn(e);return Rt(t,"internal-error"),Rt("undefined"!==typeof t.exp,"internal-error"),Rt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ln(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class un{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rn(this.lastLoginAt),this.creationTime=rn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ln(e,nn(n,{idToken:r}));Rt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=null!==(t=a.providerUserInfo)&&void 0!==t&&t.length?hn(a.providerUserInfo):[],o=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new un(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function hn(e){return e.map(e=>{let{providerId:t}=e,n=vt(e,bt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class fn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rt(e.idToken,"internal-error"),Rt("undefined"!==typeof e.idToken,"internal-error"),Rt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):on(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Rt(0!==e.length,"internal-error");const t=on(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Gt(e,{},async()=>{const n=F({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await Yt(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:s,body:n};return e.emulatorConfig&&S(e.emulatorConfig.host)&&(o.credentials="include"),zt.fetch()(a,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new fn;return n&&(Rt("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Rt("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&(Rt("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fn,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function mn(e,t){Rt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=vt(e,wt);this.providerId="firebase",this.proactiveRefresh=new cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new un(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ln(this,this.stsTokenManager.getToken(this.auth,e));return Rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=q(e),r=await n.getIdToken(t),i=sn(r);Rt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:rn(an(i.auth_time)),issuedAtTime:rn(an(i.iat)),expirationTime:rn(an(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=q(e);await dn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pn(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tt(this.auth.app))return Promise.reject(jt(this.auth));const e=await this.getIdToken();return await ln(this,async function(e,t){return Kt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,s,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:S}=t;Rt(b&&S,e,"internal-error");const k=fn.fromJSON(this.name,S);Rt("string"===typeof b,e,"internal-error"),mn(d,e.name),mn(h,e.name),Rt("boolean"===typeof w,e,"internal-error"),Rt("boolean"===typeof x,e,"internal-error"),mn(f,e.name),mn(m,e.name),mn(p,e.name),mn(g,e.name),mn(y,e.name),mn(v,e.name);const _=new pn({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:k,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(_.providerData=E.map(e=>u({},e))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fn;r.updateFromServerResponse(t);const i=new pn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await dn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Rt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?hn(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new fn;s.updateFromIdToken(n);const o=new pn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new un(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const gn=new Map;function yn(e){Dt(e instanceof Function,"Expected a class definition");let t=gn.get(e);return t?(Dt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gn.set(e,t),t)}class vn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vn.type="NONE";const bn=vn;function wn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class xn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=wn(this.userKey,r.apiKey,i),this.fullPersistenceKey=wn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await nn(this.auth,{idToken:e}).catch(()=>{});return t?pn._fromGetAccountInfoResponse(this.auth,t,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new xn(yn(bn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||yn(bn);const a=wn(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(a);if(t){let n;if("string"===typeof t){const r=await nn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await pn._fromGetAccountInfoResponse(e,r,t)}else n=pn._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(a)}catch(t){}})),new xn(i,e,n)):new xn(i,e,n)}}function En(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cn(t))return"Blackberry";if(In(t))return"Webos";if(kn(t))return"Safari";if((t.includes("chrome/")||_n(t))&&!t.includes("edge/"))return"Chrome";if(Tn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/firefox\//i.test(e)}function kn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:I()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/crios\//i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/iemobile/i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/android/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/blackberry/i.test(e)}function In(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/webos/i.test(e)}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function An(){return function(){const e=I();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();return jn(e)||Tn(e)||In(e)||Cn(e)||/windows phone/i.test(e)||Nn(e)}function Pn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=En(I());break;case"Worker":t="".concat(En(I()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(it,"/").concat(r)}class Dn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ln{constructor(e){var t,n,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,a,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class On{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fn(this),this.idTokenSubscription=new Fn(this),this.beforeStateQueue=new Dn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await xn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await nn(this,{idToken:e}),n=await pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tt(this.app))return Promise.reject(jt(this));const t=e?q(e):null;return t&&Rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tt(this.app)?Promise.reject(jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tt(this.app)?Promise.reject(jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Kt(e,"GET","/v2/passwordPolicy",Wt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ln(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new D("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Kt(e,"POST","/v2/accounts:revokeToken",Wt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yn(e)||this._popupRedirectResolver;Rt(t,this,"argument-error"),this.redirectPersistenceManager=await xn.create(this,[yn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(s,this,"internal-error"),s.then(()=>{a||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{a=!0,i()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(_t.logLevel<=Y.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_t.warn("Auth (".concat(it,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Mn(e){return q(e)}class Fn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new z(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Un={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vn(e){return Un.loadJS(e)}function zn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Bn{constructor(){this.enterprise=new qn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Hn="NO_RECAPTCHA";class Wn{constructor(e){this.type="recaptcha-enterprise",this.auth=Mn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Zt(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Hn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Bn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{tn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new en(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Zt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Un.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Vn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Kn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Wn(e);let s;if(i)s=Hn;else try{s=await a.verify(n)}catch(l){s=await a.verify(n,!0)}const o=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gn(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Kn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Kn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await Kn(e,t,n);return r(e,i).catch(async i=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Kn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Kn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Qn(e){const t=Mn(e),n=await tn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new en(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Wn(t).verify()}}function Yn(e,t,n){const r=Mn(e);Rt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),a=Jn(t),{host:s,port:o}=function(e){const t=Jn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:$n(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:$n(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(a,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Rt(O(c,r.config.emulator)&&O(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,S(s)?(k("".concat(a,"//").concat(s).concat(l)),C("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Jn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $n(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}async function Zn(e,t){return Kt(e,"POST","/v1/accounts:signUp",t)}async function er(e,t){return Qt(e,"POST","/v1/accounts:signInWithPassword",Wt(e,t))}async function tr(e,t){return Kt(e,"POST","/v1/accounts:sendOobCode",Wt(e,t))}async function nr(e,t){return tr(e,t)}class rr extends Xn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rr(e,t,"password")}static _fromEmailAndCode(e,t){return new rr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Gn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",er,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Qt(e,"POST","/v1/accounts:signInWithEmailLink",Wt(e,t))}(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Qt(e,"POST","/v1/accounts:signInWithEmailLink",Wt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ir(e,t){return Qt(e,"POST","/v1/accounts:signInWithIdp",Wt(e,t))}class ar extends Xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=vt(t,xt);if(!n||!r)return null;const a=new ar(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return ir(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ir(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ir(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=F(t)}return e}}async function sr(e,t){return Kt(e,"POST","/v1/accounts:sendVerificationCode",Wt(e,t))}const or={USER_NOT_FOUND:"user-not-found"};class lr extends Xn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Wt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Wt(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Wt(e,u(u({},t),{},{operation:"REAUTH"})),or)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class cr{constructor(e){var t,n,r,i,a,s;const o=U(V(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Rt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=U(V(e)).link,n=t?U(V(t)).deep_link_id:null,r=U(V(e)).deep_link_id;return(r?U(V(r)).link:null)||r||n||t||e}(e);try{return new cr(t)}catch(n){return null}}}class ur{constructor(){this.providerId=ur.PROVIDER_ID}static credential(e,t){return rr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cr.parseLink(t);return Rt(n,"argument-error"),rr._fromEmailAndCode(e,n.code,n.tenantId)}}ur.PROVIDER_ID="password",ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hr extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fr extends hr{constructor(){super("facebook.com")}static credential(e){return ar._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fr.credential(t.oauthAccessToken)}catch(n){return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",fr.PROVIDER_ID="facebook.com";class mr extends hr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ar._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mr.credential(n,r)}catch(i){return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com",mr.PROVIDER_ID="google.com";class pr extends hr{constructor(){super("github.com")}static credential(e){return ar._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pr.credential(t.oauthAccessToken)}catch(n){return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com",pr.PROVIDER_ID="github.com";class gr extends hr{constructor(){super("twitter.com")}static credential(e,t){return ar._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gr.credential(n,r)}catch(i){return null}}}async function yr(e,t){return Qt(e,"POST","/v1/accounts:signUp",Wt(e,t))}gr.TWITTER_SIGN_IN_METHOD="twitter.com",gr.PROVIDER_ID="twitter.com";class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await pn._fromIdTokenResponse(e,n,r),a=br(n);return new vr({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=br(n);return new vr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function br(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wr extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wr(e,t,n,r)}}function xr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw wr._fromErrorAndOperation(e,n,t,r);throw n})}async function Er(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ln(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vr._forOperation(e,"link",r)}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(tt(r.app))return Promise.reject(jt(r));const i="reauthenticate";try{const a=await ln(e,xr(r,i,t,e),n);Rt(a.idToken,r,"internal-error");const s=sn(a.idToken);Rt(s,r,"internal-error");const{sub:o}=s;return Rt(e.uid===o,r,"user-mismatch"),vr._forOperation(e,i,a)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&Tt(r,"user-mismatch"),a}}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(tt(e.app))return Promise.reject(jt(e));const r="signIn",i=await xr(e,r,t),a=await vr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function _r(e,t){return kr(Mn(e),t)}function Nr(e,t,n){var r;Rt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Rt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Rt("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Rt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Rt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Tr(e){const t=Mn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Cr(e,t){const n=q(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Nr(n.auth,r,t);const{email:i}=await async function(e,t){return tr(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ir(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=q(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await ln(i,async function(e,t){return Kt(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function jr(e,t){return Kt(e,"POST","/v2/accounts/mfaEnrollment:start",Wt(e,t))}new WeakMap;const Ar="__sak";class Rr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ar,"1"),this.storage.removeItem(Ar),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Pr extends Rr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);An()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pr.type="LOCAL";const Dr=Pr;function Lr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Or(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Mr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Or(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Lr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Or(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Or(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Lr(n);const i=setInterval(()=>{const e=Lr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Mr.type="COOKIE";class Fr extends Rr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fr.type="SESSION";const Ur=Fr;class Vr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Vr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(null===a||void 0===a||!a.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(a).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vr.receivers=[];class Br{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((s,o)=>{const l=zr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function qr(){return window}function Hr(){return"undefined"!==typeof qr().WorkerGlobalScope&&"function"===typeof qr().importScripts}const Wr="firebaseLocalStorageDb",Kr="firebaseLocalStorage",Gr="fbase_key";class Qr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yr(e,t){return e.transaction([Kr],t?"readwrite":"readonly").objectStore(Kr)}function Jr(){const e=indexedDB.open(Wr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Kr,{keyPath:Gr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Kr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Wr);return new Qr(e).toPromise()}(),t(await Jr()))})})}async function $r(e,t,n){const r=Yr(e,!0).put({[Gr]:t,value:n});return new Qr(r).toPromise()}function Xr(e,t){const n=Yr(e,!0).delete(t);return new Qr(n).toPromise()}class Zr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Jr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vr._getInstance(Hr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Br(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jr();return await $r(e,Ar,"1"),await Xr(e,Ar),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$r(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Yr(e,!1).get(t),r=await new Qr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Yr(e,!1).getAll();return new Qr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zr.type="LOCAL";const ei=Zr;function ti(e,t){return Kt(e,"POST","/v2/accounts/mfaSignIn:start",Wt(e,t))}zn("rcb"),new Ut(3e4,6e4);const ni="recaptcha";async function ri(e,t,n){if(!e._getRecaptchaConfig())try{await Qn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Rt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=Gn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Hn){Rt((null===n||void 0===n?void 0:n.type)===ni,e,"argument-error");return jr(e,await ii(e,t,n))}return jr(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Rt("signin"===t.type,e,"internal-error");const a=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Rt(a,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Gn(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Hn){Rt((null===n||void 0===n?void 0:n.type)===ni,e,"argument-error");return ti(e,await ii(e,t,n))}return ti(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Gn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Hn){Rt((null===n||void 0===n?void 0:n.type)===ni,e,"argument-error");return sr(e,await ii(e,t,n))}return sr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ii(e,t,n){Rt(n.type===ni,e,"argument-error");const r=await n.verify();Rt("string"===typeof r,e,"argument-error");const i=u({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ai{constructor(e){this.providerId=ai.PROVIDER_ID,this.auth=Mn(e)}verifyPhoneNumber(e,t){return ri(this.auth,e,q(t))}static credential(e,t){return lr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ai.credentialFromTaggedObject(t)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lr._fromTokenResponse(n,r):null}}function si(e,t){return t?yn(t):(Rt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ai.PROVIDER_ID="phone",ai.PHONE_SIGN_IN_METHOD="phone";class oi extends Xn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ir(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ir(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function li(e){return kr(e.auth,new oi(e),e.bypassAuthState)}function ci(e){const{auth:t,user:n}=e;return Rt(n,t,"internal-error"),Sr(n,new oi(e),e.bypassAuthState)}async function ui(e){const{auth:t,user:n}=e;return Rt(n,t,"internal-error"),Er(n,new oi(e),e.bypassAuthState)}class di{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return li;case"linkViaPopup":case"linkViaRedirect":return ui;case"reauthViaPopup":case"reauthViaRedirect":return ci;default:Tt(this.auth,"internal-error")}}resolve(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hi=new Ut(2e3,1e4);class fi extends di{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rt(e,this.auth,"internal-error"),e}async onExecution(){Dt(1===this.filter.length,"Popup operations only handle one event");const e=zr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,hi.get())};e()}}fi.currentPopupAction=null;const mi=new Map;class pi extends di{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=mi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vi(t),r=yi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mi.set(this.auth._key(),e)}return this.bypassAuthState||mi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function gi(e,t){mi.set(e._key(),t)}function yi(e){return yn(e._redirectPersistence)}function vi(e){return wn("pendingRedirect",e.config.apiKey,e.name)}async function bi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(tt(e.app))return Promise.reject(jt(e));const r=Mn(e),i=si(r,t),a=new pi(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class wi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ei(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ei(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ct(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xi(e))}saveEventToCache(e){this.cachedEventUids.add(xi(e)),this.lastProcessedEventTime=Date.now()}}function xi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ei(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Si=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ki=/^https?/;async function _i(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Kt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ni(r))return}catch(n){}Tt(e,"unauthorized-domain")}function Ni(e){const t=Lt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ki.test(n))return!1;if(Si.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ti=new Ut(3e4,6e4);function Ci(){const e=qr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ii(e){return new Promise((t,n)=>{var r,i;function a(){Ci(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ci(),n(Ct(e,"network-request-failed"))},timeout:Ti.get()})}if(null!==(r=qr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=qr().gapi)||void 0===i||!i.load){const t=zn("iframefcb");return qr()[t]=()=>{gapi.load?a():n(Ct(e,"network-request-failed"))},Vn("".concat(Un.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw ji=null,e})}let ji=null;const Ai=new Ut(5e3,15e3),Ri={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Di(e){const t=e.config;Rt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:it},i=Pi.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(F(r).slice(1))}async function Li(e){const t=await function(e){return ji=ji||Ii(e),ji}(e),n=qr().gapi;return Rt(n,e,"internal-error"),t.open({where:document.body,url:Di(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ri,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ct(e,"network-request-failed"),a=qr().setTimeout(()=>{r(i)},Ai.get());function s(){qr().clearTimeout(a),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Oi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Mi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Fi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=u(u({},Oi),{},{width:r.toString(),height:i.toString(),top:a,left:s}),c=I().toLowerCase();n&&(o=_n(c)?"_blank":n),Sn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return jn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:I())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Mi(null);const h=window.open(t||"",o,d);Rt(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Mi(h)}const Ui="__/auth/handler",Vi="emulator/auth/handler",zi=encodeURIComponent("fac");async function Bi(e,t,n,r,i,a){Rt(e.config.authDomain,e,"auth-domain-config-required"),Rt(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:it,eventId:i};if(t instanceof dr){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))s[e]=t}if(t instanceof hr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(zi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ui);return Vt(t,Vi)}(e),"?").concat(F(o).slice(1)).concat(c)}const qi="webStorageSupport";const Hi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ur,this._completeRedirectFn=bi,this._overrideRedirectResult=gi}async _openPopup(e,t,n,r){var i;Dt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Fi(e,await Bi(e,t,n,Lt(),r),zr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qr().location.href=e}(await Bi(e,t,n,Lt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Li(e),n=new wi(e);return t.register("authEvent",t=>{Rt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qi,{type:qi},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[qi];void 0!==i&&t(!!i),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_i(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Rn()||kn()||jn()}};var Wi="@firebase/auth",Ki="1.12.0";class Gi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qi=x("authIdTokenMaxAge")||300;let Yi=null;var Ji;Un={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ct("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ji="Browser",Ze(new H("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Rt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:Ji,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(Ji)},c=new On(r,i,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ze(new H("auth-internal",e=>(e=>new Gi(e))(Mn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ot(Wi,Ki,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ji)),ot(Wi,Ki,"esm2020");var $i,Xi,Zi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ea={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a,s=e.g[3];a=t+(s^n&(i^s))+r[0]+3614090360&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[2]+606105819&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[3]+3250441966&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[4]+4118548399&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[6]+2821735955&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[7]+4249261313&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[8]+1770035416&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[10]+4294925233&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[11]+2304563134&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[12]+1804603682&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[14]+2792965006&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[15]+1236535329&4294967295,a=t+(i^s&((n=i+(a<<22&4294967295|a>>>10))^i))+r[1]+4129170786&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[6]+3225465664&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[11]+643717713&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[0]+3921069994&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[5]+3593408605&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[10]+38016083&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[15]+3634488961&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[4]+3889429448&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[9]+568446438&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[14]+3275163606&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[3]+4107603335&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[8]+1163531501&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[13]+2850285829&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[2]+4243563512&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[7]+1735328473&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[12]+2368359562&4294967295,a=t+((n=i+(a<<20&4294967295|a>>>12))^i^s)+r[5]+4294588738&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[11]+1839030562&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[14]+4259657740&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[1]+2763975236&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[7]+4139469664&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[10]+3200236656&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[13]+681279174&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[3]+3572445317&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[6]+76029189&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[9]+3654602809&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[15]+530742520&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[2]+3299628645&4294967295,a=t+(i^((n=i+(a<<23&4294967295|a>>>9))|~s))+r[0]+4096336452&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[14]+2878612391&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[5]+4237533241&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[12]+1700485571&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[10]+4293915773&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[1]+2240044497&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[8]+1873313359&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[6]+2734768916&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[13]+1309151649&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[4]+4149444226&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[2]+718787259&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let a=this.h,s=0;for(;s<t;){if(0==a)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[a++]=e.charCodeAt(s++),a==this.blockSize){n(this,i),a=0;break}}else for(;s<t;)if(i[a++]=e[s++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function a(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),a=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=a.add(r);c.l(e)<=0&&(i=i.add(n),a=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(a=s(n)).j(t);d(c)||c.l(e)>0;)c=(a=s(n-=r)).j(t);u(a)&&(a=l),i=i.add(a),e=f(e,c)}return new p(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,a=[];for(let r=0;r<i;r++)a[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let a=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return a+r;for(;a.length<6;)a="0"+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),a=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=a>>>16,t&=65535,a&=65535,n[r]=a<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,a=65535&this.i(i),s=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=a*o,m(n,2*i+2*t),n[2*i+2*t+1]+=r*o,m(n,2*i+2*t+1),n[2*i+2*t+1]+=a*s,m(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,m(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Xi=ea.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+a),n);a<8?(a=s(Math.pow(n,a)),i=i.j(a).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},$i=ea.Integer=r}).apply("undefined"!==typeof Zi?Zi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ta,na,ra,ia,aa,sa,oa,la,ca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ua={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ca&&ca];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in i))break e;i=i[s]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},a=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){a.setTimeout(()=>{throw e},0)}function p(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(E)}};function E(){for(var e;e=p();){try{e.h.call(e.g)}catch(n){m(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,k),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var C="closure_listenable_"+(1e6*Math.random()|0),I=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=a>=0)&&Array.prototype.splice.call(i,a,1),r&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}O.prototype.add=function(e,t,n,r,i){const a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);const s=F(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new j(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)z(e,t[a],n,r,i);return null}return n=J(n),e&&e[C]?e.J(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");const o=s(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new O(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)q(e,t[a],n,r,i);return null}return n=J(n),e&&e[C]?e.K(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)H(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=J(n),e&&e[C]?(e=e.i,(a=String(t).toString())in e.g&&((n=F(t=e.g[a],n,r,i))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[a],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[C])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):A(e)}}}function K(e){return e in V?V[e]:V[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof O?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function $(){S.call(this),this.i=new O(this),this.M=this,this.G=null}function X(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;L(t=new k(r,e),i)}let a,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)a=t.g=n[s],i=Z(a,r,!0,t)&&i;if(a=t.g=e,i=Z(a,r,!0,t)&&i,i=Z(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=Z(a,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){const s=t[a];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&M(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:a.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,S),$.prototype[C]=!0,$.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=a.JSON.stringify,se=a.JSON.parse,oe=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){k.call(this,"d")}function he(){k.call(this,"c")}u(de,k),u(he,k);var fe={},me=null;function pe(){return me=me||new $}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=pe();X(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=pe();X(t,new ve(t,e))}function we(e,t){k.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function Ee(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const a=JSON.parse(t);if(a)for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ae(a)}catch(a){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(we,k),Ee.prototype.ua=function(){this.g=!1},Ee.prototype.info=function(){};var ke,_e={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ce(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}u(Te,le),Te.prototype.g=function(){return new XMLHttpRequest},ke=new Te;var Re={},Pe={};function De(e,t,n){e.M=1,e.A=at(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ae,e.g=sn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let a=0;a<i.length;a++){const e=z(n,i[a],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var s="",o=a.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Oe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),qt(n)}Jt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!N(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ye(a,a.h),a.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=an(r,r.L?r.ba:null,r.W),s.L){Je(r.h,s);var o=s,c=r.O;c&&(o.H=c),o.D&&(Ve(o),Fe(o)),r.g=s}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}je.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Oe(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new a.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,a,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Pe){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),qe(this,t)}if(Oe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$t(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Se(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(l){}},je.prototype.cancel=function(){this.K=!0,Be(this)},je.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,a.PerformanceNavigationTiming?e=(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Xe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new mt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof mt?(e.i=t,function(e,t){t&&!e.j&&(pt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new mt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function at(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ce(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){pt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return pt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){pt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new mt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function St(){this.g=new oe}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function _t(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Nt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ct(e)}function Ct(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ce(n):it(e,t,n))}function At(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=mt.prototype).add=function(e,t){pt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){pt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return pt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ce(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ce(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new _t(this.i,this.h)},u(_t,$),(e=_t.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ct(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ct(this)),this.g&&(this.readyState=3,Ct(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):Ct(this),3==this.readyState&&Nt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_t.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(At,$);var Rt=/^https?$/i,Pt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),Mt(e)}function Lt(e){e.A||(e.A=!0,X(e,"complete"),X(e,"error"))}function Ot(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(X(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Xe)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)X(e,"complete"),X(e,"success");else{e.o=6;try{var s=Ft(e)>2?e.g.statusText:""}catch(o){s=""}e.l=s+" ["+e.ca()+"]",Lt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||X(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new je(e,e.j,t)).M=2,t.A=at(et(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.A,n=!0),n||(t.g=sn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function qt(e){e.g&&($t(e),e.g.cancel(),e.g=null)}function Ht(e){qt(e),e.v&&(a.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&a.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&jt(r,e.u,e.o),n=new je(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),De(n,r,t)}function Gt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var a=i[c].g;const n=i[c].map;if((a-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{a="req"+a+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;s(n)&&(r=ae(n)),e.push(a+t+"="+encodeURIComponent(r))}}catch(Ba){throw e.push(a+"type="+encodeURIComponent("_badmap")),Ba}}catch(Ba){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Jt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function $t(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function Xt(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&jt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=at(et(t)),n.u=null,n.R=!0,Le(n,e)}function Zt(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),$t(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Je(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;X(r=pe(),new we(r,n)),Wt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Jt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tt(r,"https"),at(r),t?function(e,t){const n=new Ee;if(a.Image){const r=new Image;r.onload=c(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Et,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ee;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function an(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function sn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new kt({ab:n})):new At(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){$.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Dt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=a.FormData&&e instanceof a.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Dt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,X(this,"complete"),X(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ot(this):this.Xa())},e.Xa=function(){Ot(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=an(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new je(this,this.j,e);let a=this.o;if(this.U&&(a?(a=P(a),L(a,this.U)):a=this.U),null!==this.u||this.R||(i.J=a,a=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),a&&(this.R?t="headers="+Ce(It(a))+"&"+t:this.u&&jt(n,this.u,a)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,De(i,n,null)):De(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Xt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),qt(this),Xt(this))},e.Va=function(){null!=this.C&&(this.C=null,qt(this),Jt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,$),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ae(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){X(this.g,"a")},hn.prototype.qa=function(e){X(this.g,new un(e))},hn.prototype.pa=function(e){X(this.g,new dn)},hn.prototype.oa=function(){X(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,la=ua.createWebChannelTransport=function(){return new ln},oa=ua.getStatEventTarget=function(){return pe()},sa=ua.Event=fe,aa=ua.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,ia=ua.ErrorCode=_e,Ne.COMPLETE="complete",ra=ua.EventType=Ne,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,na=ua.WebChannel=ce,ua.FetchXmlHttpFactory=kt,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,ta=ua.XhrIo=At}).apply("undefined"!==typeof ca?ca:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});class da{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}da.UNAUTHENTICATED=new da(null),da.GOOGLE_CREDENTIALS=new da("google-credentials-uid"),da.FIRST_PARTY=new da("first-party-uid"),da.MOCK_USER=new da("mock-user");let ha="12.9.0";const fa=new ee("@firebase/firestore");function ma(){return fa.logLevel}function pa(e){if(fa.logLevel<=Y.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.debug("Firestore (".concat(ha,"): ").concat(e),...i)}}function ga(e){if(fa.logLevel<=Y.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.error("Firestore (".concat(ha,"): ").concat(e),...i)}}function ya(e){if(fa.logLevel<=Y.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.warn("Firestore (".concat(ha,"): ").concat(e),...i)}}function va(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ba(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,wa(e,r,n)}function wa(e,t,n){let r="FIRESTORE (".concat(ha,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ga(r),new Error(r)}function xa(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||wa(t,i,r)}function Ea(e,t){return e}const Sa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ka extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class _a{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Na{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(da.UNAUTHENTICATED))}shutdown(){}}class Ca{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ia{constructor(e){this.t=e,this.currentUser=da.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xa(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new _a;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _a,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{pa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(pa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _a)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(pa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xa("string"==typeof t.accessToken,31837,{l:t}),new Na(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xa(null===e||"string"==typeof e,2055,{h:e}),new da(e)}}class ja{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=da.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Aa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ja(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(da.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ra{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pa{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xa(void 0===this.o,3512);const n=e=>{null!=e.error&&pa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,pa("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{pa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):pa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ra(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(xa("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ra(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Da(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class La{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Da(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Oa(e,t){return e<t?-1:e>t?1:0}function Ma(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Va(n)===Va(i)?Oa(n,i):Va(n)?1:-1}return Oa(e.length,t.length)}const Fa=55296,Ua=57343;function Va(e){const t=e.charCodeAt(0);return t>=Fa&&t<=Ua}function za(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Ba="__name__";class qa{constructor(e,t,n){void 0===t?t=0:t>e.length&&ba(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ba(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===qa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qa?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=qa.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Oa(e.length,t.length)}static compareSegments(e,t){const n=qa.isNumericId(e),r=qa.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?qa.extractNumericId(e).compare(qa.extractNumericId(t)):Ma(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}}class Ha extends qa{construct(e,t,n){return new Ha(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ka(Sa.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Ha(e)}static emptyPath(){return new Ha([])}}const Wa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ka extends qa{construct(e,t,n){return new Ka(e,t,n)}static isValidIdentifier(e){return Wa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ka.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ba}static keyField(){return new Ka([Ba])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ka(Sa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ka(Sa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ka(Sa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new ka(Sa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ka(t)}static emptyPath(){return new Ka([])}}class Ga{constructor(e){this.path=e}static fromPath(e){return new Ga(Ha.fromString(e))}static fromName(e){return new Ga(Ha.fromString(e).popFirst(5))}static empty(){return new Ga(Ha.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ha.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ha.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ga(new Ha(e.slice()))}}function Qa(e,t,n){if(!n)throw new ka(Sa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ya(e){if(!Ga.isDocumentKey(e))throw new ka(Sa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ja(e){if(Ga.isDocumentKey(e))throw new ka(Sa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function $a(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Xa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ba(12329,{type:typeof e})}function Za(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ka(Sa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xa(e);throw new ka(Sa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function es(e,t){const n={typeString:e};return t&&(n.value=t),n}function ts(e,t){if(!$a(e))throw new ka(Sa.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==a&&s!==a.value){n="Expected '".concat(r,"' field to equal '").concat(a.value,"'");break}}if(n)throw new ka(Sa.INVALID_ARGUMENT,n);return!0}const ns=-62135596800,rs=1e6;class is{static now(){return is.fromMillis(Date.now())}static fromDate(e){return is.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*rs);return new is(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ka(Sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ka(Sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ns)throw new ka(Sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ka(Sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rs}_compareTo(e){return this.seconds===e.seconds?Oa(this.nanoseconds,e.nanoseconds):Oa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:is._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ts(e,is._jsonSchema))return new is(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ns;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}is._jsonSchemaVersion="firestore/timestamp/1.0",is._jsonSchema={type:es("string",is._jsonSchemaVersion),seconds:es("number"),nanoseconds:es("number")};class as{static fromTimestamp(e){return new as(e)}static min(){return new as(new is(0,0))}static max(){return new as(new is(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ss=-1;class os{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}os.UNKNOWN_ID=-1;function ls(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=as.fromTimestamp(1e9===r?new is(n+1,0):new is(n,r));return new us(i,Ga.empty(),t)}function cs(e){return new us(e.readTime,e.key,ss)}class us{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new us(as.min(),Ga.empty(),ss)}static max(){return new us(as.max(),Ga.empty(),ss)}}function ds(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ga.comparator(e.documentKey,t.documentKey),0!==n?n:Oa(e.largestBatchId,t.largestBatchId))}const hs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ms(e){if(e.code!==Sa.FAILED_PRECONDITION||e.message!==hs)throw e;pa("LocalStore","Unexpectedly lost primary lease")}class ps{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ba(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ps((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ps?t:ps.resolve(t)}catch(e){return ps.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ps.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ps.reject(t)}static resolve(e){return new ps((t,n)=>{t(e)})}static reject(e){return new ps((t,n)=>{n(e)})}static waitFor(e){return new ps((t,n)=>{let r=0,i=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++i,a&&i===r&&t()},e=>n(e))}),a=!0,i===r&&t()})}static or(e){let t=ps.resolve(!1);for(const n of e)t=t.next(e=>e?ps.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ps((n,r)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++s,s===i&&n(a)},e=>r(e))}})}static doWhile(e,t){return new ps((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function gs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ys(e){return"IndexedDbTransactionError"===e.name}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vs.ce=-1;const bs=-1;function ws(e){return null==e}function xs(e){return 0===e&&1/e==-1/0}function Es(e){return"number"==typeof e&&Number.isInteger(e)&&!xs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ss="\x01";function ks(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ns(t)),t=_s(e.get(n),t);return Ns(t)}function _s(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ss:n+="\x01\x11";break;default:n+=t}}return n}function Ns(e){return e+Ss+"\x01"}const Ts="remoteDocuments",Cs="owner",Is="mutationQueues",js="mutations";const As="documentMutations",Rs="remoteDocumentsV14",Ps="remoteDocumentGlobal",Ds="targets",Ls="targetDocuments",Os="targetGlobal",Ms="collectionParents",Fs="clientMetadata",Us="bundles",Vs="namedQueries",zs="indexConfiguration",Bs="indexState",qs="indexEntries",Hs="documentOverlays",Ws="globals",Ks=[Is,js,As,Ts,Ds,Cs,Os,Ls,Fs,Ps,Ms,Us,Vs],Gs=[Is,js,As,Rs,Ds,Cs,Os,Ls,Fs,Ps,Ms,Us,Vs,Hs],Qs=Gs,Ys=[...Qs,zs,Bs,qs];function Js(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zs{constructor(e,t){this.comparator=e,this.root=t||to.EMPTY}insert(e,t){return new Zs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,to.BLACK,null,null))}remove(e){return new Zs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,to.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eo(this.root,e,this.comparator,!1)}getReverseIterator(){return new eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eo(this.root,e,this.comparator,!0)}}class eo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class to{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:to.RED,this.left=null!=r?r:to.EMPTY,this.right=null!=i?i:to.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new to(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return to.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return to.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,to.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,to.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ba(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ba(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ba(27949);return e+(this.isRed()?0:1)}}to.EMPTY=null,to.RED=!0,to.BLACK=!1,to.EMPTY=new class{constructor(){this.size=0}get key(){throw ba(57766)}get value(){throw ba(16141)}get color(){throw ba(16727)}get left(){throw ba(29726)}get right(){throw ba(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new to(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class no{constructor(e){this.comparator=e,this.data=new Zs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ro(this.data.getIterator())}getIteratorFrom(e){return new ro(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof no))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new no(this.comparator);return t.data=e,t}}class ro{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class io{constructor(e){this.fields=e,e.sort(Ka.comparator)}static empty(){return new io([])}unionWith(e){let t=new no(Ka.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ao extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class so{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ao("Invalid base64 string: "+e):e}}(e);return new so(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new so(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}so.EMPTY_BYTE_STRING=new so("");const oo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lo(e){if(xa(!!e,39018),"string"==typeof e){let t=0;const n=oo.exec(e);if(xa(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:co(e.seconds),nanos:co(e.nanos)}}function co(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uo(e){return"string"==typeof e?so.fromBase64String(e):so.fromUint8Array(e)}const ho="server_timestamp",fo="__type__",mo="__previous_value__",po="__local_write_time__";function go(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[fo])||void 0===t?void 0:t.stringValue)===ho}function yo(e){const t=e.mapValue.fields[mo];return go(t)?yo(t):t}function vo(e){const t=lo(e.mapValue.fields[po].timestampValue);return new is(t.seconds,t.nanos)}class bo{constructor(e,t,n,r,i,a,s,o,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c,this.apiKey=u}}const wo="(default)";class xo{constructor(e,t){this.projectId=e,this.database=t||wo}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===wo}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}const Eo="__type__",So="__max__",ko={mapValue:{fields:{__type__:{stringValue:So}}}},_o="__vector__",No="value";function To(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?go(e)?4:Ho(e)?9007199254740991:Bo(e)?10:11:ba(28295,{value:e})}function Co(e,t){if(e===t)return!0;const n=To(e);if(n!==To(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vo(e).isEqual(vo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=lo(e.timestampValue),r=lo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uo(e.bytesValue).isEqual(uo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return co(e.geoPointValue.latitude)===co(t.geoPointValue.latitude)&&co(e.geoPointValue.longitude)===co(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return co(e.integerValue)===co(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=co(e.doubleValue),r=co(t.doubleValue);return n===r?xs(n)===xs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return za(e.arrayValue.values||[],t.arrayValue.values||[],Co);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Js(n)!==Js(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Co(n[i],r[i])))return!1;return!0}(e,t);default:return ba(52216,{left:e})}}function Io(e,t){return void 0!==(e.values||[]).find(e=>Co(e,t))}function jo(e,t){if(e===t)return 0;const n=To(e),r=To(t);if(n!==r)return Oa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=co(e.integerValue||e.doubleValue),r=co(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ao(e.timestampValue,t.timestampValue);case 4:return Ao(vo(e),vo(t));case 5:return Ma(e.stringValue,t.stringValue);case 6:return function(e,t){const n=uo(e),r=uo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Oa(n[i],r[i]);if(0!==e)return e}return Oa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Oa(co(e.latitude),co(t.latitude));return 0!==n?n:Oa(co(e.longitude),co(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ro(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a;const s=e.fields||{},o=t.fields||{},l=null===(n=s[No])||void 0===n?void 0:n.arrayValue,c=null===(r=o[No])||void 0===r?void 0:r.arrayValue,u=Oa((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(a=c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Ro(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ko.mapValue&&t===ko.mapValue)return 0;if(e===ko.mapValue)return 1;if(t===ko.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let s=0;s<r.length&&s<a.length;++s){const e=Ma(r[s],a[s]);if(0!==e)return e;const t=jo(n[r[s]],i[a[s]]);if(0!==t)return t}return Oa(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ba(23264,{he:n})}}function Ao(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Oa(e,t);const n=lo(e),r=lo(t),i=Oa(n.seconds,r.seconds);return 0!==i?i:Oa(n.nanos,r.nanos)}function Ro(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=jo(n[i],r[i]);if(e)return e}return Oa(n.length,r.length)}function Po(e){return Do(e)}function Do(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=lo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return uo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ga.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Do(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Do(e.fields[i]));return n+"}"}(e.mapValue):ba(61005,{value:e})}function Lo(e){switch(To(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yo(e);return t?16+Lo(t):16;case 5:return 2*e.stringValue.length;case 6:return uo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Lo(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return $s(e.fields,(e,n)=>{t+=e.length+Lo(n)}),t}(e.mapValue);default:throw ba(13486,{value:e})}}function Oo(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Mo(e){return!!e&&"integerValue"in e}function Fo(e){return!!e&&"arrayValue"in e}function Uo(e){return!!e&&"nullValue"in e}function Vo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zo(e){return!!e&&"mapValue"in e}function Bo(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Eo])||void 0===t?void 0:t.stringValue)===_o}function qo(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=qo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qo(e.arrayValue.values[n]);return t}return u({},e)}function Ho(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===So}class Wo{constructor(e){this.value=e}static empty(){return new Wo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(t)}setAll(e){let t=Ka.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){$s(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Wo(qo(this.value))}}function Ko(e){const t=[];return $s(e.fields,(e,n)=>{const r=new Ka([e]);if(zo(n)){const e=Ko(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new io(t)}class Go{constructor(e,t,n,r,i,a,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Go(e,0,as.min(),as.min(),as.min(),Wo.empty(),0)}static newFoundDocument(e,t,n,r){return new Go(e,1,t,as.min(),n,r,0)}static newNoDocument(e,t){return new Go(e,2,t,as.min(),as.min(),Wo.empty(),0)}static newUnknownDocument(e,t){return new Go(e,3,t,as.min(),as.min(),Wo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(as.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=as.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Go&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Go(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Qo{constructor(e,t){this.position=e,this.inclusive=t}}function Yo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(r=a.field.isKeyField()?Ga.comparator(Ga.fromName(s.referenceValue),n.key):jo(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Jo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Co(e.position[n],t.position[n]))return!1;return!0}class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Zo{}class el extends Zo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ll(e,t,n):"array-contains"===t?new hl(e,n):"in"===t?new fl(e,n):"not-in"===t?new ml(e,n):"array-contains-any"===t?new pl(e,n):new el(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new cl(e,n):new ul(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(jo(t,this.value)):null!==t&&To(this.value)===To(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ba(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tl extends Zo{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new tl(e,t)}matches(e){return nl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nl(e){return"and"===e.op}function rl(e){return il(e)&&nl(e)}function il(e){for(const t of e.filters)if(t instanceof tl)return!1;return!0}function al(e){if(e instanceof el)return e.field.canonicalString()+e.op.toString()+Po(e.value);if(rl(e))return e.filters.map(e=>al(e)).join(",");{const t=e.filters.map(e=>al(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function sl(e,t){return e instanceof el?function(e,t){return t instanceof el&&e.op===t.op&&e.field.isEqual(t.field)&&Co(e.value,t.value)}(e,t):e instanceof tl?function(e,t){return t instanceof tl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&sl(n,t.filters[r]),!0)}(e,t):void ba(19439)}function ol(e){return e instanceof el?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Po(e.value))}(e):e instanceof tl?function(e){return e.op.toString()+" {"+e.getFilters().map(ol).join(" ,")+"}"}(e):"Filter"}class ll extends el{constructor(e,t,n){super(e,t,n),this.key=Ga.fromName(n.referenceValue)}matches(e){const t=Ga.comparator(e.key,this.key);return this.matchesComparison(t)}}class cl extends el{constructor(e,t){super(e,"in",t),this.keys=dl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ul extends el{constructor(e,t){super(e,"not-in",t),this.keys=dl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ga.fromName(e.referenceValue))}class hl extends el{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fo(t)&&Io(t.arrayValue,this.value)}}class fl extends el{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Io(this.value.arrayValue,t)}}class ml extends el{constructor(e,t){super(e,"not-in",t)}matches(e){if(Io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Io(this.value.arrayValue,t)}}class pl extends el{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Io(this.value.arrayValue,e))}}class gl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=s,this.Te=null}}function yl(e){return new gl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function vl(e){const t=Ea(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>al(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ws(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Po(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Po(e)).join(",")),t.Te=e}return t.Te}function bl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jo(e.startAt,t.startAt)&&Jo(e.endAt,t.endAt)}function wl(e){return Ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class xl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function El(e,t,n,r,i,a,s,o){return new xl(e,t,n,r,i,a,s,o)}function Sl(e){return new xl(e)}function kl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _l(e){return null!==e.collectionGroup}function Nl(e){const t=Ea(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new no(Ka.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new $o(r,n))}),e.has(Ka.keyField().canonicalString())||t.Ie.push(new $o(Ka.keyField(),n))}return t.Ie}function Tl(e){const t=Ea(e);return t.Ee||(t.Ee=Cl(t,Nl(e))),t.Ee}function Cl(e,t){if("F"===e.limitType)return yl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new $o(e.field,t)});const n=e.endAt?new Qo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qo(e.startAt.position,e.startAt.inclusive):null;return yl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Il(e,t){const n=e.filters.concat([t]);return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jl(e,t,n){return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Al(e,t){return bl(Tl(e),Tl(t))&&e.limitType===t.limitType}function Rl(e){return"".concat(vl(Tl(e)),"|lt:").concat(e.limitType)}function Pl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ol(e)).join(", "),"]")),ws(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Po(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Po(e)).join(",")),"Target(".concat(t,")")}(Tl(e)),"; limitType=").concat(e.limitType,")")}function Dl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ga.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Nl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Yo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Yo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nl(e),t))}(e,t)}function Ll(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ol(e){return(t,n)=>{let r=!1;for(const i of Nl(e)){const e=Ml(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ml(e,t,n){const r=e.field.isKeyField()?Ga.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jo(r,i):ba(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ba(19790,{direction:e.dir})}}class Fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Xs(this.inner)}size(){return this.innerSize}}const Ul=new Zs(Ga.comparator);function Vl(){return Ul}const zl=new Zs(Ga.comparator);function Bl(){let e=zl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ql(e){let t=zl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Hl(){return Kl()}function Wl(){return Kl()}function Kl(){return new Fl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Gl=new Zs(Ga.comparator),Ql=new no(Ga.comparator);function Yl(){let e=Ql;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Jl=new no(Oa);function $l(){return Jl}function Xl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xs(t)?"-0":t}}function Zl(e){return{integerValue:""+e}}function ec(e,t){return Es(t)?Zl(t):Xl(e,t)}class tc{constructor(){this._=void 0}}function nc(e,t,n){return e instanceof ac?function(e,t){const n={fields:{[fo]:{stringValue:ho},[po]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&go(t)&&(t=yo(t)),t&&(n.fields[mo]=t),{mapValue:n}}(n,t):e instanceof sc?oc(e,t):e instanceof lc?cc(e,t):function(e,t){const n=ic(e,t),r=dc(n)+dc(e.Ae);return Mo(n)&&Mo(e.Ae)?Zl(r):Xl(e.serializer,r)}(e,t)}function rc(e,t,n){return e instanceof sc?oc(e,t):e instanceof lc?cc(e,t):n}function ic(e,t){return e instanceof uc?function(e){return Mo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ac extends tc{}class sc extends tc{constructor(e){super(),this.elements=e}}function oc(e,t){const n=hc(t);for(const r of e.elements)n.some(e=>Co(e,r))||n.push(r);return{arrayValue:{values:n}}}class lc extends tc{constructor(e){super(),this.elements=e}}function cc(e,t){let n=hc(t);for(const r of e.elements)n=n.filter(e=>!Co(e,r));return{arrayValue:{values:n}}}class uc extends tc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function dc(e){return co(e.integerValue||e.doubleValue)}function hc(e){return Fo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fc{constructor(e,t){this.field=e,this.transform=t}}class mc{constructor(e,t){this.version=e,this.transformResults=t}}class pc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pc}static exists(e){return new pc(void 0,e)}static updateTime(e){return new pc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yc{}function vc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cc(e.key,pc.none()):new Sc(e.key,e.data,pc.none());{const n=e.data,r=Wo.empty();let i=new no(Ka.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new kc(e.key,r,new io(i.toArray()),pc.none())}}function bc(e,t,n){e instanceof Sc?function(e,t,n){const r=e.value.clone(),i=Nc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kc?function(e,t,n){if(!gc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Nc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_c(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wc(e,t,n,r){return e instanceof Sc?function(e,t,n,r){if(!gc(e.precondition,t))return n;const i=e.value.clone(),a=Tc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kc?function(e,t,n,r){if(!gc(e.precondition,t))return n;const i=Tc(e.fieldTransforms,r,t),a=t.data;return a.setAll(_c(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return gc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function xc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ic(r.transform,e||null);null!=i&&(null===n&&(n=Wo.empty()),n.set(r.field,i))}return n||null}function Ec(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&za(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof sc&&t instanceof sc||e instanceof lc&&t instanceof lc?za(e.elements,t.elements,Co):e instanceof uc&&t instanceof uc?Co(e.Ae,t.Ae):e instanceof ac&&t instanceof ac}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sc extends yc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kc extends yc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _c(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Nc(e,t,n){const r=new Map;xa(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,rc(s,o,n[i]))}return r}function Tc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,nc(e,a,t))}return r}class Cc extends yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ic extends yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&bc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=wc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Wl();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(r.key)?null:s;const o=vc(a,s);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(as.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yl())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(e,t)=>Ec(e,t))&&za(this.baseMutations,e.baseMutations,(e,t)=>Ec(e,t))}}class Ac{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xa(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Gl;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new Ac(e,t,n,r)}}class Rc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Pc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dc,Lc;function Oc(e){switch(e){case Sa.OK:return ba(64938);case Sa.CANCELLED:case Sa.UNKNOWN:case Sa.DEADLINE_EXCEEDED:case Sa.RESOURCE_EXHAUSTED:case Sa.INTERNAL:case Sa.UNAVAILABLE:case Sa.UNAUTHENTICATED:return!1;case Sa.INVALID_ARGUMENT:case Sa.NOT_FOUND:case Sa.ALREADY_EXISTS:case Sa.PERMISSION_DENIED:case Sa.FAILED_PRECONDITION:case Sa.ABORTED:case Sa.OUT_OF_RANGE:case Sa.UNIMPLEMENTED:case Sa.DATA_LOSS:return!0;default:return ba(15467,{code:e})}}function Mc(e){if(void 0===e)return ga("GRPC error has no .code"),Sa.UNKNOWN;switch(e){case Dc.OK:return Sa.OK;case Dc.CANCELLED:return Sa.CANCELLED;case Dc.UNKNOWN:return Sa.UNKNOWN;case Dc.DEADLINE_EXCEEDED:return Sa.DEADLINE_EXCEEDED;case Dc.RESOURCE_EXHAUSTED:return Sa.RESOURCE_EXHAUSTED;case Dc.INTERNAL:return Sa.INTERNAL;case Dc.UNAVAILABLE:return Sa.UNAVAILABLE;case Dc.UNAUTHENTICATED:return Sa.UNAUTHENTICATED;case Dc.INVALID_ARGUMENT:return Sa.INVALID_ARGUMENT;case Dc.NOT_FOUND:return Sa.NOT_FOUND;case Dc.ALREADY_EXISTS:return Sa.ALREADY_EXISTS;case Dc.PERMISSION_DENIED:return Sa.PERMISSION_DENIED;case Dc.FAILED_PRECONDITION:return Sa.FAILED_PRECONDITION;case Dc.ABORTED:return Sa.ABORTED;case Dc.OUT_OF_RANGE:return Sa.OUT_OF_RANGE;case Dc.UNIMPLEMENTED:return Sa.UNIMPLEMENTED;case Dc.DATA_LOSS:return Sa.DATA_LOSS;default:return ba(39323,{code:e})}}(Lc=Dc||(Dc={}))[Lc.OK=0]="OK",Lc[Lc.CANCELLED=1]="CANCELLED",Lc[Lc.UNKNOWN=2]="UNKNOWN",Lc[Lc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lc[Lc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lc[Lc.NOT_FOUND=5]="NOT_FOUND",Lc[Lc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lc[Lc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lc[Lc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lc[Lc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lc[Lc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lc[Lc.ABORTED=10]="ABORTED",Lc[Lc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lc[Lc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lc[Lc.INTERNAL=13]="INTERNAL",Lc[Lc.UNAVAILABLE=14]="UNAVAILABLE",Lc[Lc.DATA_LOSS=15]="DATA_LOSS";let Fc=null;function Uc(){return new TextEncoder}const Vc=new $i([4294967295,4294967295],0);function zc(e){const t=Uc().encode(e),n=new Xi;return n.update(t),new Uint8Array(n.digest())}function Bc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new $i([n,r],0),new $i([i,a],0)]}class qc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hc("Invalid padding: ".concat(t));if(n<0)throw new Hc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Hc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Hc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=$i.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply($i.fromNumber(n)));return 1===r.compare(Vc)&&(r=new $i([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=zc(e),[n,r]=Bc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new qc(i,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.ge)return;const t=zc(e),[n,r]=Bc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wc(as.min(),r,new Zs(Oa),Vl(),Yl())}}class Kc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kc(n,t,Yl(),Yl(),Yl())}}class Gc{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Qc{constructor(e,t){this.targetId=e,this.Ce=t}}class Yc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:so.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Jc{constructor(){this.ve=0,this.Fe=Zc(),this.Me=so.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yl(),t=Yl(),n=Yl();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ba(38017,{changeType:i})}}),new Kc(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Zc()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xa(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $c{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vl(),this.He=Xc(),this.Je=Xc(),this.Ze=new Zs(Oa)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ba(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(wl(a))if(0===n){const e=new Ga(a.path);this.et(t,e,Go.newNoDocument(e,as.min()))}else xa(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),a=n?this.ct(n,e,r):1;if(0!==a){this.it(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(i=Fc)||void 0===i||i.lt(function(e,t,n,r,i){var a,s,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(a=null===d||void 0===d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,a))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,s;try{a=uo(n).toUint8Array()}catch(e){if(e instanceof ao)return ya("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new qc(a,r,i)}catch(e){return ya(e instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),a="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&wl(i.target)){const t=new Ga(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Go.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}});let n=Yl();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Wc(e,t,this.Ze,this.je,n);return this.je=Vl(),this.He=Xc(),this.Je=Xc(),this.Ze=new Zs(Oa),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Jc,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new no(Oa),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new no(Oa),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||pa("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new Zs(Ga.comparator)}function Zc(){return new Zs(Ga.comparator)}const eu={asc:"ASCENDING",desc:"DESCENDING"},tu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nu={and:"AND",or:"OR"};class ru{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iu(e,t){return e.useProto3Json||ws(t)?t:{value:t}}function au(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function su(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ou(e,t){return au(e,t.toTimestamp())}function lu(e){return xa(!!e,49232),as.fromTimestamp(function(e){const t=lo(e);return new is(t.seconds,t.nanos)}(e))}function cu(e,t){return uu(e,t).canonicalString()}function uu(e,t){const n=function(e){return new Ha(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function du(e){const t=Ha.fromString(e);return xa(Au(t),10190,{key:t.toString()}),t}function hu(e,t){return cu(e.databaseId,t.path)}function fu(e,t){const n=du(t);if(n.get(1)!==e.databaseId.projectId)throw new ka(Sa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ka(Sa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ga(yu(n))}function mu(e,t){return cu(e.databaseId,t)}function pu(e){const t=du(e);return 4===t.length?Ha.emptyPath():yu(t)}function gu(e){return new Ha(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yu(e){return xa(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function vu(e,t,n){return{name:hu(e,t),fields:n.value.mapValue.fields}}function bu(e,t){let n;if(t instanceof Sc)n={update:vu(e,t.key,t.value)};else if(t instanceof Cc)n={delete:hu(e,t.key)};else if(t instanceof kc)n={update:vu(e,t.key,t.data),updateMask:ju(t.fieldMask)};else{if(!(t instanceof Ic))return ba(16599,{dt:t.type});n={verify:hu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ac)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ba(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ou(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ba(27497)}(e,t.precondition)),n}function wu(e,t){return{documents:[mu(e,t.path)]}}function xu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mu(e,i);const a=function(e){if(0!==e.length)return Iu(tl.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Tu(e.field),direction:ku(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=iu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Eu(e){let t=pu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xa(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=Su(e);return t instanceof tl&&rl(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new $o(Cu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ws(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Qo(n,t)}(n.endAt)),El(t,i,s,a,o,"F",l,c)}function Su(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cu(e.unaryFilter.field);return el.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Cu(e.unaryFilter.field);return el.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cu(e.unaryFilter.field);return el.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cu(e.unaryFilter.field);return el.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ba(61313);default:return ba(60726)}}(e):void 0!==e.fieldFilter?function(e){return el.create(Cu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ba(58110);default:return ba(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return tl.create(e.compositeFilter.filters.map(e=>Su(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ba(1026)}}(e.compositeFilter.op))}(e):ba(30097,{filter:e})}function ku(e){return eu[e]}function _u(e){return tu[e]}function Nu(e){return nu[e]}function Tu(e){return{fieldPath:e.canonicalString()}}function Cu(e){return Ka.fromServerFormat(e.fieldPath)}function Iu(e){return e instanceof el?function(e){if("=="===e.op){if(Vo(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NAN"}};if(Uo(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vo(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NAN"}};if(Uo(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(e.field),op:_u(e.op),value:e.value}}}(e):e instanceof tl?function(e){const t=e.getFilters().map(e=>Iu(e));return 1===t.length?t[0]:{compositeFilter:{op:Nu(e.op),filters:t}}}(e):ba(54877,{filter:e})}function ju(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Au(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ru(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class Pu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:as.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:as.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:so.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new Pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Du{constructor(e){this.yt=e}}function Lu(e){const t=Eu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jl(t,t.limit,"L"):t}class Ou{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(co(e.integerValue));else if("doubleValue"in e){const n=co(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),xs(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=lo(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(uo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ho(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Bo(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ba(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=No,a=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(co(a)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ga.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ou.Wt=new Ou;class Mu{constructor(){this.Sn=new Fu}addToCollectionParentIndex(e,t){return this.Sn.add(t),ps.resolve()}getCollectionParents(e,t){return ps.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ps.resolve()}deleteFieldIndex(e,t){return ps.resolve()}deleteAllFieldIndexes(e){return ps.resolve()}createTargetIndexes(e,t){return ps.resolve()}getDocumentsMatchingTarget(e,t){return ps.resolve(null)}getIndexType(e,t){return ps.resolve(0)}getFieldIndexes(e,t){return ps.resolve([])}getNextCollectionGroupToUpdate(e){return ps.resolve(null)}getMinOffset(e,t){return ps.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return ps.resolve(us.min())}updateCollectionGroup(e,t,n){return ps.resolve()}updateIndexEntries(e,t){return ps.resolve()}}class Fu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new no(Ha.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new no(Ha.comparator)).toArray()}}new Uint8Array(0);const Uu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vu=41943040;class zu{static withCacheSize(e){return new zu(e,zu.DEFAULT_COLLECTION_PERCENTILE,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}zu.DEFAULT_COLLECTION_PERCENTILE=10,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zu.DEFAULT=new zu(Vu,zu.DEFAULT_COLLECTION_PERCENTILE,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zu.DISABLED=new zu(-1,0,0);class Bu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bu(0)}static ar(){return new Bu(-1)}}const qu="LruGarbageCollector",Hu=1048576;function Wu(e,t){let[n,r]=e,[i,a]=t;const s=Oa(n,i);return 0===s?Oa(r,a):s}class Ku{constructor(e){this.Pr=e,this.buffer=new no(Wu),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Wu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Gu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){pa(qu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ys(e)?pa(qu,"Ignoring IndexedDB error during garbage collection: ",e):await ms(e)}await this.Ar(3e5)})}}class Qu{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ps.resolve(vs.ce);const n=new Ku(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pa("LruGarbageCollector","Garbage collection skipped; disabled"),ps.resolve(Uu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Uu):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,s,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(pa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),ma()<=Y.DEBUG&&pa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ps.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Yu(e,t){return new Qu(e,t)}class Ju{constructor(){this.changes=new Fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Go.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ps.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $u{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&wc(n.mutation,e,io.empty(),is.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Yl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yl();const r=Hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Bl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Hl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Yl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Vl();const a=Kl(),s=Kl();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof kc)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),wc(s.mutation,t,s.mutation.getFieldMask(),is.now())):a.set(t.key,io.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new $u(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Kl();let r=new Zs((e,t)=>e-t),i=Yl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let s=n.get(e)||io.empty();s=i.applyToLocalView(a,s),n.set(e,s);const o=(r.get(i.batchId)||Yl()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const a=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,c=Wl();l.forEach(e=>{if(!i.has(e)){const r=vc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ps.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ps.resolve(Hl());let s=ss,o=i;return a.next(t=>ps.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?ps.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Yl())).next(e=>({batchId:s,changes:ql(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ga(t)).next(e=>{let t=Bl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=Bl();return this.indexManager.getCollectionParents(e,i).next(s=>ps.forEach(s,s=>{const o=function(e,t){return new xl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Go.newInvalidDocument(r)))});let n=Bl();return e.forEach((e,r)=>{const a=i.get(e);void 0!==a&&wc(a.mutation,r,io.empty(),is.now()),Dl(t,r)&&(n=n.insert(e,r))}),n})}}class Zu{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ps.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:lu(e.createTime)}}(t)),ps.resolve()}getNamedQuery(e,t){return ps.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Lu(e.bundledQuery),readTime:lu(e.readTime)}}(t)),ps.resolve()}}class ed{constructor(){this.overlays=new Zs(Ga.comparator),this.Lr=new Map}getOverlay(e,t){return ps.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Hl();return ps.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),ps.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),ps.resolve()}getOverlaysForCollection(e,t,n){const r=Hl(),i=t.length+1,a=new Ga(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ps.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zs((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Hl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Hl(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return ps.resolve(s)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rc(t,n));let i=this.Lr.get(t);void 0===i&&(i=Yl(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}class td{constructor(){this.sessionToken=so.EMPTY_BYTE_STRING}getSessionToken(e){return ps.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ps.resolve()}}class nd{constructor(){this.kr=new no(rd.Kr),this.qr=new no(rd.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new rd(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new rd(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new Ga(new Ha([])),n=new rd(t,e),r=new rd(t,e+1),i=[];return this.qr.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ga(new Ha([])),n=new rd(t,e),r=new rd(t,e+1);let i=Yl();return this.qr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new rd(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rd{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ga.comparator(e.key,t.key)||Oa(e.Hr,t.Hr)}static Ur(e,t){return Oa(e.Hr,t.Hr)||Ga.comparator(e.key,t.key)}}class id{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new no(rd.Kr)}checkEmpty(e){return ps.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jc(i,t,n,r);this.mutationQueue.push(a);for(const s of r)this.Jr=this.Jr.add(new rd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return ps.resolve(a)}lookupMutationBatch(e,t){return ps.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ps.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ps.resolve(0===this.mutationQueue.length?bs:this.Yn-1)}getAllMutationBatches(e){return ps.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rd(t,0),r=new rd(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),ps.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new no(Oa);return t.forEach(e=>{const t=new rd(e,0),r=new rd(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ps.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ga.isDocumentKey(i)||(i=i.child(""));const a=new rd(new Ga(i),0);let s=new no(Oa);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Hr)),!0)},a),ps.resolve(this.Yr(s))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){xa(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return ps.forEach(t.mutations,r=>{const i=new rd(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new rd(t,0),r=this.Jr.firstAfterOrEqual(n);return ps.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ps.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ad{constructor(e){this.ti=e,this.docs=new Zs(Ga.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ps.resolve(n?n.document.mutableCopy():Go.newInvalidDocument(t))}getEntries(e,t){let n=Vl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Go.newInvalidDocument(e))}),ps.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Vl();const a=t.path,s=new Ga(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||ds(cs(s),n)<=0||(r.has(s.key)||Dl(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return ps.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ba(9500)}ni(e,t){return ps.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new sd(this)}getSize(e){return ps.resolve(this.size)}}class sd extends Ju{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)}),ps.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class od{constructor(e){this.persistence=e,this.ri=new Fl(e=>vl(e),bl),this.lastRemoteSnapshotVersion=as.min(),this.highestTargetId=0,this.ii=0,this.si=new nd,this.targetCount=0,this.oi=Bu._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),ps.resolve()}getLastRemoteSnapshotVersion(e){return ps.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ps.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ps.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ps.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Bu(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ps.resolve()}updateTargetData(e,t){return this.lr(t),ps.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ps.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach((a,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),ps.waitFor(i).next(()=>r)}getTargetCount(e){return ps.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ps.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ps.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ps.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ps.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ps.resolve(n)}containsKey(e,t){return ps.resolve(this.si.containsKey(t))}}class ld{constructor(e,t){this._i={},this.overlays={},this.ai=new vs(0),this.ui=!1,this.ui=!0,this.ci=new td,this.referenceDelegate=e(this),this.li=new od(this),this.indexManager=new Mu,this.remoteDocumentCache=function(e){return new ad(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new Du(t),this.Pi=new Zu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ed,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new id(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){pa("MemoryPersistence","Starting transaction:",e);const r=new cd(this.ai.next());return this.referenceDelegate.Ti(),n(r).next(e=>this.referenceDelegate.Ii(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ps.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class cd extends fs{constructor(e){super(),this.currentSequenceNumber=e}}class ud{constructor(e){this.persistence=e,this.Ri=new nd,this.Ai=null}static Vi(e){return new ud(e)}get di(){if(this.Ai)return this.Ai;throw ba(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ps.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ps.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ps.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ps.forEach(this.di,n=>{const r=Ga.fromPath(n);return this.mi(e,r).next(e=>{e||t.removeEntry(r,as.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return ps.or([()=>ps.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class dd{constructor(e,t){this.persistence=e,this.fi=new Fl(e=>ks(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Yu(this,t)}static Vi(e,t){return new dd(e,t)}Ti(){}Ii(e){return ps.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return ps.forEach(this.fi,(n,r)=>this.wr(e,n,r).next(e=>e?ps.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,r=>this.wr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,as.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ps.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ps.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ps.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ps.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lo(e.data.value)),t}wr(e,t,n){return ps.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return ps.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=Yl(),r=Yl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new hd(e,t.fromCache,n,r)}}class fd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class md{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=A()?8:gs(I())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new fd;return this.ys(e,t,n).next(r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)})}).next(()=>i.result)}ws(e,t,n,r){return n.documentReadCount<this.Vs?(ma()<=Y.DEBUG&&pa("QueryEngine","SDK will not create cache indexes for query:",Pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ps.resolve()):(ma()<=Y.DEBUG&&pa("QueryEngine","Query:",Pl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(ma()<=Y.DEBUG&&pa("QueryEngine","The SDK decides to create cache indexes for query:",Pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tl(t))):ps.resolve())}gs(e,t){if(kl(t))return ps.resolve(null);let n=Tl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=jl(t,null,"F"),n=Tl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Yl(...r);return this.fs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,jl(t,null,"F")):this.Ds(e,a,t,n)}))})))}ps(e,t,n,r){return kl(t)||r.isEqual(as.min())?ps.resolve(null):this.fs.getDocuments(e,n).next(i=>{const a=this.bs(t,i);return this.Ss(t,a,n,r)?ps.resolve(null):(ma()<=Y.DEBUG&&pa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pl(t)),this.Ds(e,a,t,ls(r,ss)).next(e=>e))})}bs(e,t){let n=new no(Ol(e));return t.forEach((t,r)=>{Dl(e,r)&&(n=n.add(r))}),n}Ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return ma()<=Y.DEBUG&&pa("QueryEngine","Using full collection scan to execute query:",Pl(t)),this.fs.getDocumentsMatchingQuery(e,t,us.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const pd="LocalStore";class gd{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Zs(Oa),this.Fs=new Fl(e=>vl(e),bl),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xu(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function yd(e,t,n,r){return new gd(e,t,n,r)}async function vd(e,t){const n=Ea(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],a=[];let s=Yl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:a}))})})}function bd(e){const t=Ea(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function wd(e,t,n){let r=Yl(),i=Yl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Vl();return n.forEach((n,a)=>{const s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(as.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):pa(pd,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),{Bs:r,Ls:i}})}function xd(e,t){const n=Ea(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=bs),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ed(e,t){const n=Ea(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.li.getTargetData(e,t).next(i=>i?(r=i,ps.resolve(r)):n.li.allocateTargetId(e).next(i=>(r=new Pu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.vs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function Sd(e,t,n){const r=Ea(e),i=r.vs.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!ys(e))throw e;pa(pd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function kd(e,t,n){const r=Ea(e);let i=as.min(),a=Yl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ea(e),i=r.Fs.get(n);return void 0!==i?ps.resolve(r.vs.get(i)):r.li.getTargetData(t,n)}(r,e,Tl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:as.min(),n?a:Yl())).next(e=>(_d(r,Ll(t),e),{documents:e,ks:a})))}function _d(e,t,n){let r=e.Ms.get(t)||as.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ms.set(t,r)}class Nd{constructor(){this.activeTargetIds=$l()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Td{constructor(){this.vo=new Nd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Nd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cd{Mo(e){}shutdown(){}}const Id="ConnectivityMonitor";class jd{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pa(Id,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pa(Id,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ad=null;function Rd(){return null===Ad?Ad=268435456+Math.round(2147483648*Math.random()):Ad++,"0x"+Ad.toString(16)}const Pd="RestConnection",Dd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ld{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.$o=this.databaseId.database===wo?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const a=Rd(),s=this.Qo(e,t.toUriEncodedString());pa(Pd,"Sending RPC '".concat(e,"' ").concat(a,":"),s,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(o,r,i);const{host:l}=new URL(s),c=S(l);return this.zo(e,s,o,n,c).then(t=>(pa(Pd,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw ya(Pd,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",s,"request:",n),t})}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ha,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=Dd[e];let r="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(r="".concat(r,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),r}terminate(){}}class Od{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Md="WebChannelConnection",Fd=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class Ud extends Ld{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ud.c_){const e=oa();Fd(e,sa.STAT_EVENT,e=>{e.stat===aa.PROXY?pa(Md,"STAT_EVENT: detected buffering proxy"):e.stat===aa.NOPROXY&&pa(Md,"STAT_EVENT: detected no buffering proxy")}),Ud.c_=!0}}zo(e,t,n,r,i){const a=Rd();return new Promise((i,s)=>{const o=new ta;o.setWithCredentials(!0),o.listenOnce(ra.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ia.NO_ERROR:const n=o.getResponseJson();pa(Md,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(n)),i(n);break;case ia.TIMEOUT:pa(Md,"RPC '".concat(e,"' ").concat(a," timed out")),s(new ka(Sa.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const r=o.getStatus();if(pa(Md,"RPC '".concat(e,"' ").concat(a," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Sa).indexOf(t)>=0?t:Sa.UNKNOWN}(n.status);s(new ka(e,n.message))}else s(new ka(Sa.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new ka(Sa.UNAVAILABLE,"Connection failed."));break;default:ba(9055,{l_:e,streamId:a,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{pa(Md,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);pa(Md,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Rd(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;void 0!==o&&(s.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=i.join("");pa(Md,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);const c=a.createWebChannel(l,s);this.I_(c);let u=!1,d=!1;const h=new Od({Ho:t=>{d?pa(Md,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(pa(Md,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),u=!0),pa(Md,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Jo:()=>c.close()});return Fd(c,na.EventType.OPEN,()=>{d||(pa(Md,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.i_())}),Fd(c,na.EventType.CLOSE,()=>{d||(d=!0,pa(Md,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.o_(),this.E_(c))}),Fd(c,na.EventType.ERROR,t=>{d||(d=!0,ya(Md,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),h.o_(new ka(Sa.UNAVAILABLE,"The operation could not be completed")))}),Fd(c,na.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];xa(!!i,16349);const a=i,s=(null===a||void 0===a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(s){pa(Md,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Dc[e];if(void 0!==t)return Mc(t)}(t),i=s.message;"NOT_FOUND"===t&&i.includes("database")&&i.includes("does not exist")&&i.includes(this.databaseId.database)&&ya("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=Sa.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,h.o_(new ka(n,i)),c.close()}else pa(Md,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.__(i)}}),Ud.u_(),setTimeout(()=>{h.s_()},0),h}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return la()}}function Vd(e){return new Ud(e)}function zd(){return"undefined"!=typeof document?document:null}function Bd(e){return new ru(e,!0)}Ud.c_=!1;class qd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&pa("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Hd="PersistentStream";class Wd{constructor(e,t,n,r,i,a,s,o){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Sa.RESOURCE_EXHAUSTED?(ga(t.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Sa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ka(Sa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return pa(Hd,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(pa(Hd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kd extends Wd{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ba(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(xa(void 0===t||"string"==typeof t,58123),so.fromBase64String(t||"")):(xa(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),so.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?Sa.UNKNOWN:Mc(e.code);return new ka(t,e.message||"")}(s);n=new Yc(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fu(e,r.document.name),a=lu(r.document.updateTime),s=r.document.createTime?lu(r.document.createTime):as.min(),o=new Wo({mapValue:{fields:r.document.fields}}),l=Go.newFoundDocument(i,a,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Gc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fu(e,r.document),a=r.readTime?lu(r.readTime):as.min(),s=Go.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Gc([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fu(e,r.document),a=r.removedTargetIds||[];n=new Gc([],a,i,null)}else{if(!("filter"in t))return ba(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new Pc(r,i),s=e.targetId;n=new Qc(s,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return as.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?as.min():t.readTime?lu(t.readTime):as.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=gu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=wl(r)?{documents:wu(e,r)}:{query:xu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=su(e,t.resumeToken);const r=iu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(as.min())>0){n.readTime=au(e,t.snapshotVersion.toTimestamp());const r=iu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ba(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=gu(this.serializer),t.removeTarget=e,this.K_(t)}}class Gd extends Wd{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return xa(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xa(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){xa(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(xa(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?lu(e.updateTime):lu(t);return n.isEqual(as.min())&&(n=lu(t)),new mc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=lu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=gu(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>bu(this.serializer,e))};this.K_(t)}}class Qd{}class Yd extends Qd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ka(Sa.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Wo(e,uu(t,n),r,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ka(Sa.UNKNOWN,e.toString())})}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[s,o]=a;return this.connection.jo(e,uu(t,n),r,s,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ka(Sa.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Jd(e,t,n,r){return new Yd(e,t,n,r)}class $d{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ga(t),this.aa=!1):pa("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Xd="RemoteStore";class Zd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{lh(this)&&(pa(Xd,"Restarting streams for network reachability change."),await async function(e){const t=Ea(e);t.Ea.add(4),await th(t),t.Va.set("Unknown"),t.Ea.delete(4),await eh(t)}(this))})}),this.Va=new $d(n,r)}}async function eh(e){if(lh(e))for(const t of e.Ra)await t(!0)}async function th(e){for(const t of e.Ra)await t(!1)}function nh(e,t){const n=Ea(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),oh(n)?sh(n):Th(n).O_()&&ih(n,t))}function rh(e,t){const n=Ea(e),r=Th(n);n.Ia.delete(t),r.O_()&&ah(n,t),0===n.Ia.size&&(r.O_()?r.L_():lh(n)&&n.Va.set("Unknown"))}function ih(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(as.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Th(e).Z_(t)}function ah(e,t){e.da.$e(t),Th(e).X_(t)}function sh(e){e.da=new $c({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Th(e).start(),e.Va.ua()}function oh(e){return lh(e)&&!Th(e).x_()&&e.Ia.size>0}function lh(e){return 0===Ea(e).Ea.size}function ch(e){e.da=void 0}async function uh(e){e.Va.set("Online")}async function dh(e){e.Ia.forEach((t,n)=>{ih(e,t)})}async function hh(e,t){ch(e),oh(e)?(e.Va.ha(t),sh(e)):e.Va.set("Unknown")}async function fh(e,t,n){if(e.Va.set("Online"),t instanceof Yc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){pa(Xd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mh(e,n)}else if(t instanceof Gc?e.da.Xe(t):t instanceof Qc?e.da.st(t):e.da.tt(t),!n.isEqual(as.min()))try{const t=await bd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(so.EMPTY_BYTE_STRING,r.snapshotVersion)),ah(e,t);const i=new Pu(r.target,t,n,r.sequenceNumber);ih(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){pa(Xd,"Failed to raise snapshot:",t),await mh(e,t)}}async function mh(e,t,n){if(!ys(t))throw t;e.Ea.add(1),await th(e),e.Va.set("Offline"),n||(n=()=>bd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{pa(Xd,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await eh(e)})}function ph(e,t){return t().catch(n=>mh(e,n,t))}async function gh(e){const t=Ea(e),n=Ch(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:bs;for(;yh(t);)try{const e=await xd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,vh(t,e)}catch(e){await mh(t,e)}bh(t)&&wh(t)}function yh(e){return lh(e)&&e.Ta.length<10}function vh(e,t){e.Ta.push(t);const n=Ch(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function bh(e){return lh(e)&&!Ch(e).x_()&&e.Ta.length>0}function wh(e){Ch(e).start()}async function xh(e){Ch(e).ra()}async function Eh(e){const t=Ch(e);for(const n of e.Ta)t.ea(n.mutations)}async function Sh(e,t,n){const r=e.Ta.shift(),i=Ac.from(r,t,n);await ph(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await gh(e)}async function kh(e,t){t&&Ch(e).Y_&&await async function(e,t){if(function(e){return Oc(e)&&e!==Sa.ABORTED}(t.code)){const n=e.Ta.shift();Ch(e).B_(),await ph(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await gh(e)}}(e,t),bh(e)&&wh(e)}async function _h(e,t){const n=Ea(e);n.asyncQueue.verifyOperationInProgress(),pa(Xd,"RemoteStore received new credentials");const r=lh(n);n.Ea.add(3),await th(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await eh(n)}async function Nh(e,t){const n=Ea(e);t?(n.Ea.delete(2),await eh(n)):t||(n.Ea.add(2),await th(n),n.Va.set("Unknown"))}function Th(e){return e.ma||(e.ma=function(e,t,n){const r=Ea(e);return r.sa(),new Kd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:uh.bind(null,e),Yo:dh.bind(null,e),t_:hh.bind(null,e),J_:fh.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),oh(e)?sh(e):e.Va.set("Unknown")):(await e.ma.stop(),ch(e))})),e.ma}function Ch(e){return e.fa||(e.fa=function(e,t,n){const r=Ea(e);return r.sa(),new Gd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:xh.bind(null,e),t_:kh.bind(null,e),ta:Eh.bind(null,e),na:Sh.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await gh(e)):(await e.fa.stop(),e.Ta.length>0&&(pa(Xd,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ih{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,s=new Ih(e,t,a,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ka(Sa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jh(e,t){if(ga("AsyncQueue","".concat(t,": ").concat(e)),ys(e))return new ka(Sa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ah{static emptySet(e){return new Ah(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ga.comparator(t.key,n.key):(e,t)=>Ga.comparator(e.key,t.key),this.keyedMap=Bl(),this.sortedSet=new Zs(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ah))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ah;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Rh{constructor(){this.ga=new Zs(Ga.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ba(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ph{constructor(e,t,n,r,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new Ph(e,t,Ah.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Dh{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Lh{constructor(){this.queries=Oh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ea(e),r=n.queries;n.queries=Oh(),r.forEach((e,n)=>{for(const r of n.ba)r.onError(t)})}(this,new ka(Sa.ABORTED,"Firestore shutting down"))}}function Oh(){return new Fl(e=>Rl(e),Al)}async function Mh(e,t){const n=Ea(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new Dh,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=jh(e,"Initialization of query '".concat(Pl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&zh(n)}async function Fh(e,t){const n=Ea(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),0===a.ba.length?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uh(e,t){const n=Ea(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(i)&&(r=!0);t.wa=i}}r&&zh(n)}function Vh(e,t,n){const r=Ea(e),i=r.queries.get(t);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(t)}function zh(e){e.Ca.forEach(e=>{e.next()})}var Bh,qh;(qh=Bh||(Bh={})).Ma="default",qh.Cache="cache";class Hh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ph(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bh.Cache}}class Wh{constructor(e){this.key=e}}class Kh{constructor(e){this.key=e}}class Gh{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yl(),this.mutatedKeys=Yl(),this.eu=Ol(e),this.tu=new Ah(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new Rh,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Dl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(s=!0)),f&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ba(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Xa;return this.Xa=o,0!==a.length||l?{snapshot:new Ph(this.query,e.tu,i,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rh,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Yl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new Kh(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new Wh(n))}),t}cu(e){this.Za=e.ks,this.Ya=Yl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ph.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const Qh="SyncEngine";class Yh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jh{constructor(e){this.key=e,this.hu=!1}}class $h{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Fl(e=>Rl(e),Al),this.Iu=new Map,this.Eu=new Set,this.Ru=new Zs(Ga.comparator),this.Au=new Map,this.Vu=new nd,this.du={},this.mu=new Map,this.fu=Bu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Xh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=wf(e);let i;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await ef(r,t,n,!0),i}async function Zh(e,t){const n=wf(e);await ef(n,t,!0,!1)}async function ef(e,t,n,r){const i=await Ed(e.localStore,Tl(t)),a=i.targetId,s=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await tf(e,t,a,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&nh(e.remoteStore,i),o}async function tf(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await kd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const a=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,a,s);return mf(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const a=await kd(e.localStore,t,!0),s=new Gh(t,a.ks),o=s.ru(a.documents),l=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(o,e.isPrimaryClient,l);mf(e,n,c.au);const u=new Yh(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function nf(e,t,n){const r=Ea(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(e=>!Al(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rh(r.remoteStore,i.targetId),hf(r,i.targetId)}).catch(ms)):(hf(r,i.targetId),await Sd(r.localStore,i.targetId,!0))}async function rf(e,t){const n=Ea(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rh(n.remoteStore,r.targetId))}async function af(e,t){const n=Ea(e);try{const e=await function(e,t){const n=Ea(e),r=t.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const s=[];t.targetChanges.forEach((a,o)=>{const l=i.get(o);if(!l)return;s.push(n.li.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.li.addMatchingKeys(e,a.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(so.EMPTY_BYTE_STRING,as.min()).withLastLimboFreeSnapshotVersion(as.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&s.push(n.li.updateTargetData(e,c))});let o=Vl(),l=Yl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(wd(e,a,t.documentUpdates).next(e=>{o=e.Bs,l=e.Ls})),!r.isEqual(as.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return ps.waitFor(s).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.vs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(xa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?xa(r.hu,14607):e.removedDocuments.size>0&&(xa(r.hu,42227),r.hu=!1))}),await yf(n,e,t)}catch(e){await ms(e)}}function sf(e,t,n){const r=Ea(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ea(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ba)i.va(t)&&(r=!0)}),r&&zh(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function of(e,t,n){const r=Ea(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),a=i&&i.key;if(a){let e=new Zs(Ga.comparator);e=e.insert(a,Go.newNoDocument(a,as.min()));const n=Yl().add(a),i=new Wc(as.min(),new Map,new Zs(Oa),e,n);await af(r,i),r.Ru=r.Ru.remove(a),r.Au.delete(t),gf(r)}else await Sd(r.localStore,t,!1).then(()=>hf(r,t,n)).catch(ms)}async function lf(e,t){const n=Ea(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ea(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let s=ps.resolve();return a.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);xa(null!==a,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);df(n,r,null),uf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yf(n,e)}catch(e){await ms(e)}}async function cf(e,t,n){const r=Ea(e);try{const e=await function(e,t){const n=Ea(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(xa(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);df(r,t,n),uf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await yf(r,e)}catch(n){await ms(n)}}function uf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function df(e,t,n){const r=Ea(e);let i=r.du[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function hf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||ff(e,t)})}function ff(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(rh(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),gf(e))}function mf(e,t,n){for(const r of n)r instanceof Wh?(e.Vu.addReference(r.key,t),pf(e,r)):r instanceof Kh?(pa(Qh,"Document no longer in limbo: "+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||ff(e,r.key)):ba(19791,{wu:r})}function pf(e,t){const n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(pa(Qh,"New document in limbo: "+n),e.Eu.add(r),gf(e))}function gf(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ga(Ha.fromString(t)),r=e.fu.next();e.Au.set(r,new Jh(n)),e.Ru=e.Ru.insert(n,r),nh(e.remoteStore,new Pu(Tl(Sl(n.path)),r,"TargetPurposeLimboResolution",vs.ce))}}async function yf(e,t,n){const r=Ea(e),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{s.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=hd.Es(o.targetId,e);a.push(t)}}))}),await Promise.all(s),r.Pu.J_(i),await async function(e,t){const n=Ea(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ps.forEach(t,t=>ps.forEach(t.Ts,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ps.forEach(t.Is,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ys(e))throw e;pa(pd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.vs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(e,i)}}}(r.localStore,a))}async function vf(e,t){const n=Ea(e);if(!n.currentUser.isEqual(t)){pa(Qh,"User change. New user:",t.toKey());const e=await vd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ka(Sa.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await yf(n,e.Ns)}}function bf(e,t){const n=Ea(e),r=n.Au.get(t);if(r&&r.hu)return Yl().add(r.key);{let e=Yl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function wf(e){const t=Ea(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=af.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=of.bind(null,t),t.Pu.J_=Uh.bind(null,t.eventManager),t.Pu.yu=Vh.bind(null,t.eventManager),t}function xf(e){const t=Ea(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cf.bind(null,t),t}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yd(this.persistence,new md,e.initialUser,this.serializer)}Cu(e){return new ld(ud.Vi,this.serializer)}Du(e){return new Td}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class Sf extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xa(this.persistence.referenceDelegate instanceof dd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Gu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?zu.withCacheSize(this.cacheSizeBytes):zu.DEFAULT;return new ld(e=>dd.Vi(e,t),this.serializer)}}class kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>sf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=vf.bind(null,this.syncEngine),await Nh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Lh}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),n=Vd(e.databaseInfo);return Jd(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Zd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>sf(this.syncEngine,e,0),jd.v()?new jd:new Cd)}createSyncEngine(e,t){return function(e,t,n,r,i,a,s){const o=new $h(e,t,n,r,i,a);return s&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ea(e);pa(Xd,"RemoteStore shutting down."),t.Ea.add(5),await th(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}kf.provider={build:()=>new kf};class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ga("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Nf="FirestoreClient";class Tf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=da.UNAUTHENTICATED,this.clientId=La.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{pa(Nf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(pa(Nf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=jh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Cf(e,t){e.asyncQueue.verifyOperationInProgress(),pa(Nf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await vd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function If(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jf(e);pa(Nf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>_h(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>_h(t.remoteStore,n)),e._onlineComponents=t}async function jf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){pa(Nf,"Using user provided OfflineComponentProvider");try{await Cf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Sa.FAILED_PRECONDITION||e.code===Sa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await Cf(e,new Ef)}}else pa(Nf,"Using default OfflineComponentProvider"),await Cf(e,new Sf(void 0));return e._offlineComponents}async function Af(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(pa(Nf,"Using user provided OnlineComponentProvider"),await If(e,e._uninitializedComponentsProvider._online)):(pa(Nf,"Using default OnlineComponentProvider"),await If(e,new kf))),e._onlineComponents}function Rf(e){return Af(e).then(e=>e.syncEngine)}async function Pf(e){const t=await Af(e),n=t.eventManager;return n.onListen=Xh.bind(null,t.syncEngine),n.onUnlisten=nf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Zh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rf.bind(null,t.syncEngine),n}function Df(e,t){const n=new _a;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=xf(e);try{const e=await function(e,t){const n=Ea(e),r=is.now(),i=t.reduce((e,t)=>e.add(t.key),Yl());let a,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Vl(),l=Yl();return n.xs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{a=i;const s=[];for(const e of t){const t=xc(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new kc(e.key,t,Ko(t.value.mapValue),pc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:ql(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||(r=new Zs(Oa)),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await yf(r,e.changes),await gh(r.remoteStore)}catch(e){const t=jh(e,"Failed to persist write");n.reject(t)}}(await Rf(e),t,n)),n.promise}function Lf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Of="ComponentProvider",Mf=new Map;function Ff(e,t,n,r,i){return new bo(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Lf(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const Uf="firestore.googleapis.com",Vf=!0;class zf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ka(Sa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uf,this.ssl=Vf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Vf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Vu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Hu)throw new ka(Sa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ka(Sa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ka(Sa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ka(Sa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ka(Sa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ka(Sa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ka(Sa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ta;switch(e.type){case"firstParty":return new Aa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ka(Sa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mf.get(e);t&&(pa(Of,"Removing Datastore"),Mf.delete(e),t.terminate())}(this),Promise.resolve()}}function qf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Za(e,Bf);const i=S(t),a=e._getSettings(),s=u(u({},a),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(k("https://".concat(o)),C("Firestore",!0)),a.host!==Uf&&a.host!==o&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},a),{},{host:o,ssl:i,emulatorOptions:r});if(!O(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=da.MOCK_USER;else{var c;t=_(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ka(Sa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new da(i)}e._authCredentials=new Ca(new Na(t,n))}}class Hf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hf(this.firestore,e,this._query)}}class Wf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wf(this.firestore,e,this._key)}toJSON(){return{type:Wf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ts(t,Wf._jsonSchema))return new Wf(e,n||null,new Ga(Ha.fromString(t.referencePath)))}}Wf._jsonSchemaVersion="firestore/documentReference/1.0",Wf._jsonSchema={type:es("string",Wf._jsonSchemaVersion),referencePath:es("string")};class Kf extends Hf{constructor(e,t,n){super(e,t,Sl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wf(this.firestore,null,new Ga(e))}withConverter(e){return new Kf(this.firestore,e,this._path)}}function Gf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=q(e),Qa("collection","path",t),e instanceof Bf){const n=Ha.fromString(t,...r);return Ja(n),new Kf(e,null,n)}{if(!(e instanceof Wf||e instanceof Kf))throw new ka(Sa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ha.fromString(t,...r));return Ja(n),new Kf(e.firestore,null,n)}}function Qf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=q(e),1===arguments.length&&(t=La.newId()),Qa("doc","path",t),e instanceof Bf){const n=Ha.fromString(t,...r);return Ya(n),new Wf(e,null,new Ga(n))}{if(!(e instanceof Wf||e instanceof Kf))throw new ka(Sa.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ha.fromString(t,...r));return Ya(n),new Wf(e.firestore,e instanceof Kf?e.converter:null,new Ga(n))}}const Yf="AsyncQueue";class Jf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qd(this,"async_queue_retry"),this._c=()=>{const e=zd();e&&pa(Yf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=zd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new _a;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ys(e))throw e;pa(Yf,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ga("INTERNAL UNHANDLED ERROR: ",$f(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ih.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ba(47125,{Pc:$f(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $f(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Xf extends Bf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Jf,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jf(e),this._firestoreClient=void 0,await e}}}function Zf(e){if(e._terminated)throw new ka(Sa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||em(e),e._firestoreClient}function em(e){var t,n,r,i;const a=e._freezeSettings(),s=Ff(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,a);e._componentsProvider||null!==(r=a.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(i=a.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new Tf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class tm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tm(so.fromBase64String(e))}catch(e){throw new ka(Sa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new tm(so.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ts(e,tm._jsonSchema))return tm.fromBase64String(e.bytes)}}tm._jsonSchemaVersion="firestore/bytes/1.0",tm._jsonSchema={type:es("string",tm._jsonSchemaVersion),bytes:es("string")};class nm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ka(Sa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ka(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rm{constructor(e){this._methodName=e}}class im{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ka(Sa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ka(Sa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oa(this._lat,e._lat)||Oa(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:im._jsonSchemaVersion}}static fromJSON(e){if(ts(e,im._jsonSchema))return new im(e.latitude,e.longitude)}}im._jsonSchemaVersion="firestore/geoPoint/1.0",im._jsonSchema={type:es("string",im._jsonSchemaVersion),latitude:es("number"),longitude:es("number")};class am{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:am._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ts(e,am._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new am(e.vectorValues);throw new ka(Sa.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}am._jsonSchemaVersion="firestore/vectorValue/1.0",am._jsonSchema={type:es("string",am._jsonSchemaVersion),vectorValues:es("object")};const sm=/^__.*__$/;class om{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sc(e,this.data,t,this.fieldTransforms)}}class lm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new kc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ba(40011,{dataSource:e})}}class um{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new um(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(cm(this.dataSource)&&sm.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class dm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bd(e)}createContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new um({dataSource:e,methodName:t,targetDoc:n,path:Ka.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hm(e){const t=e._freezeSettings(),n=Bd(e._databaseId);return new dm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fm(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.createContext(a.merge||a.mergeFields?2:0,t,n,i);Em("Data must be an object, but it was:",s,r);const o=wm(r,s);let l,c;if(a.merge)l=new io(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=Sm(t,r,n);if(!s.contains(i))throw new ka(Sa.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Tm(e,i)||e.push(i)}l=new io(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new om(new Wo(o),l,c)}class mm extends rm{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError("".concat(this._methodName,"() can only appear at the top level of your update data")):e.createError("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mm}}class pm extends rm{_toFieldTransform(e){return new fc(e.path,new ac)}isEqual(e){return e instanceof pm}}function gm(e,t,n,r){const i=e.createContext(1,t,n);Em("Data must be an object, but it was:",i,r);const a=[],s=Wo.empty();$s(r,(e,r)=>{const o=_m(t,e,n);r=q(r);const l=i.childContextForFieldPath(o);if(r instanceof mm)a.push(o);else{const e=bm(r,l);null!=e&&(a.push(o),s.set(o,e))}});const o=new io(a);return new lm(s,o,i.fieldTransforms)}function ym(e,t,n,r,i,a){const s=e.createContext(1,t,n),o=[Sm(t,r,n)],l=[i];if(a.length%2!=0)throw new ka(Sa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(Sm(t,a[h])),l.push(a[h+1]);const c=[],u=Wo.empty();for(let h=o.length-1;h>=0;--h)if(!Tm(c,o[h])){const e=o[h];let t=l[h];t=q(t);const n=s.childContextForFieldPath(e);if(t instanceof mm)c.push(e);else{const r=bm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new io(c);return new lm(u,d,s.fieldTransforms)}function vm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return bm(n,e.createContext(r?4:3,t))}function bm(e,t){if(xm(e=q(e)))return Em("Unsupported field value:",t,e),wm(e,t);if(e instanceof rm)return function(e,t){if(!cm(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bm(i,t.childContextForArray(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=q(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ec(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=is.fromDate(e);return{timestampValue:au(t.serializer,n)}}if(e instanceof is){const n=new is(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:au(t.serializer,n)}}if(e instanceof im)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tm)return{bytesValue:su(t.serializer,e._byteString)};if(e instanceof Wf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:cu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof am)return function(e,t){const n=e instanceof am?e.toArray():e,r={fields:{[Eo]:{stringValue:_o},[No]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return Xl(t.serializer,e)})}}}};return{mapValue:r}}(e,t);if(Ru(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(Xa(e)))}(e,t)}function wm(e,t){const n={};return Xs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(e,r)=>{const i=bm(r,t.childContextForField(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function xm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof is||e instanceof im||e instanceof tm||e instanceof Wf||e instanceof rm||e instanceof am||Ru(e))}function Em(e,t,n){if(!xm(n)||!$a(n)){const r=Xa(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Sm(e,t,n){if((t=q(t))instanceof nm)return t._internalPath;if("string"==typeof t)return _m(e,t);throw Nm("Field path arguments must be of type string or ",e,!1,void 0,n)}const km=new RegExp("[~\\*/\\[\\]]");function _m(e,t,n){if(t.search(km)>=0)throw Nm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new nm(...t.split("."))._internalPath}catch(r){throw Nm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Nm(e,t,n,r,i){const a=r&&!r.isEmpty(),s=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new ka(Sa.INVALID_ARGUMENT,o+e+l)}function Tm(e,t){return e.some(e=>e.isEqual(t))}class Cm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(To(e)){case 0:return null;case 1:return e.booleanValue;case 2:return co(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ba(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return $s(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[No].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>co(e.doubleValue));return new am(n)}convertGeoPoint(e){return new im(co(e.latitude),co(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vo(e));default:return null}}convertTimestamp(e){const t=lo(e);return new is(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ha.fromString(e);xa(Au(n),9688,{name:e});const r=new xo(n.get(1),n.get(3)),i=new Ga(n.popFirst(5));return r.isEqual(t)||ga("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class Im extends Cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wf(this.firestore,null,t)}}function jm(){return new pm("serverTimestamp")}const Am="@firebase/firestore",Rm="4.11.0";function Pm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Dm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(Sm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lm extends Dm{data(){return super.data()}}function Om(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ka(Sa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mm{}class Fm extends Mm{}function Um(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Mm&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Bm).length,n=e.filter(e=>e instanceof Vm).length;if(t>1||t>0&&n>0)throw new ka(Sa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Vm extends Fm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vm(e,t,n)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Hf(e.firestore,e.converter,Il(e._query,t))}_parse(e){const t=hm(e.firestore),n=function(e,t,n,r,i,a,s){let o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ka(Sa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Qm(s,a);const t=[];for(const n of s)t.push(Gm(r,e,n));o={arrayValue:{values:t}}}else o=Gm(r,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Qm(s,a),o=vm(n,t,s,"in"===a||"not-in"===a);return el.create(i,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function zm(e,t,n){const r=t,i=Sm("where",e);return Vm._create(i,r,n)}class Bm extends Mm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:tl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ym(n,i),n=Il(n,i)}(e._query,t),new Hf(e.firestore,e.converter,Il(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qm extends Fm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qm(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(t,n)}(e._query,this._field,this._direction);return new Hf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new xl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Hm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Sm("orderBy",e);return qm._create(n,t)}class Wm extends Fm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Wm(e,t,n)}_apply(e){return new Hf(e.firestore,e.converter,jl(e._query,this._limit,this._limitType))}}function Km(e){return function(e,t){if(t<=0)throw new ka(Sa.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}("limit",e),Wm._create("limit",e,"F")}function Gm(e,t,n){if("string"==typeof(n=q(n))){if(""===n)throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_l(t)&&-1!==n.indexOf("/"))throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ha.fromString(n));if(!Ga.isDocumentKey(r))throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Oo(e,new Ga(r))}if(n instanceof Wf)return Oo(e,n._key);throw new ka(Sa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xa(n),"."))}function Qm(e,t){if(!Array.isArray(e)||0===e.length)throw new ka(Sa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ym(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ka(Sa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ka(Sa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Jm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $m{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xm extends Dm{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Sm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ka(Sa.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Xm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xm._jsonSchema={type:es("string",Xm._jsonSchemaVersion),bundleSource:es("string","DocumentSnapshot"),bundleName:es("string"),bundle:es("string")};class Zm extends Xm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ep{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $m(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Zm(this._firestore,this._userDataWriter,n.key,n,new $m(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ka(Sa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Zm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $m(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Zm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $m(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:tp(t.type),doc:r,oldIndex:i,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ka(Sa.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ep._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=La.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ba(61501,{type:e})}}ep._jsonSchemaVersion="firestore/querySnapshot/1.0",ep._jsonSchema={type:es("string",ep._jsonSchemaVersion),bundleSource:es("string","QuerySnapshot"),bundleName:es("string"),bundle:es("string")};function np(e){e=Za(e,Wf);const t=Za(e.firestore,Xf);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new _a;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new _f({next:o=>{a.Nu(),t.enqueueAndForget(()=>Fh(e,s));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new ka(Sa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new ka(Sa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Hh(Sl(n.path),a,{includeMetadataChanges:!0,Ka:!0});return Mh(e,s)}(await Pf(e),e.asyncQueue,t,n,r)),r.promise}(Zf(t),e._key).then(n=>lp(t,e,n))}function rp(e){e=Za(e,Hf);const t=Za(e.firestore,Xf),n=Zf(t),r=new Im(t);return Om(e._query),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new _a;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new _f({next:n=>{a.Nu(),t.enqueueAndForget(()=>Fh(e,s)),n.fromCache&&"server"===r.source?i.reject(new ka(Sa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Hh(n,a,{includeMetadataChanges:!0,Ka:!0});return Mh(e,s)}(await Pf(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new ep(t,r,e,n))}function ip(e,t,n){e=Za(e,Wf);const r=Za(e.firestore,Xf),i=Jm(e.converter,t,n);return op(r,[fm(hm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pc.none())])}function ap(e,t,n){e=Za(e,Wf);const r=Za(e.firestore,Xf),i=hm(r);let a;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return a="string"==typeof(t=q(t))||t instanceof nm?ym(i,"updateDoc",e._key,t,n,o):gm(i,"updateDoc",e._key,t),op(r,[a.toMutation(e._key,pc.exists(!0))])}function sp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=q(e);let i={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof n[a]||Pm(n[a])||(i=n[a++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Pm(n[a])){var o,l,c;const e=n[a];n[a]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[a+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[a+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Wf)d=Za(e.firestore,Xf),h=Sl(e._key.path),u={next:t=>{n[a]&&n[a](lp(d,e,t))},error:n[a+1],complete:n[a+2]};else{const t=Za(e,Hf);d=Za(t.firestore,Xf),h=t._query;const r=new Im(d);u={next:e=>{n[a]&&n[a](new ep(d,r,t,e))},error:n[a+1],complete:n[a+2]},Om(e._query)}return function(e,t,n,r){const i=new _f(r),a=new Hh(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Mh(await Pf(e),a)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Fh(await Pf(e),a))}}(Zf(d),h,s,u)}function op(e,t){return Df(Zf(e),t)}function lp(e,t,n){const r=n.docs.get(t._key),i=new Im(e);return new Xm(e,i,t._key,r,new $m(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ha=it,Ze(new H("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new Xf(new Ia(e.getProvider("auth-internal")),new Pa(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ka(Sa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(e.options.projectId,t)}(a,r),a);return i=u({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),ot(Am,Rm,e),ot(Am,Rm,"esm2020")}();const cp="firebasestorage.googleapis.com",up="storageBucket";class dp extends P{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(mp(e),"Firebase Storage: ".concat(t," (").concat(mp(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var hp,fp;function mp(e){return"storage/"+e}function pp(){return new dp(hp.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gp(){return new dp(hp.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yp(){return new dp(hp.CANCELED,"User canceled the upload/download.")}function vp(){return new dp(hp.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bp(e){return new dp(hp.INVALID_ARGUMENT,e)}function wp(){return new dp(hp.APP_DELETED,"The Firebase app was deleted.")}function xp(e,t){return new dp(hp.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ep(e){throw new dp(hp.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(hp||(hp={}));class Sp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Sp.makeFromUrl(e,t)}catch(i){return new Sp(e,"")}if(""===n.path)return n;throw r=e,new dp(hp.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(t===cp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Sp(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new dp(hp.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class kp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function _p(e){return"string"===typeof e||e instanceof String}function Np(e){return Tp()&&e instanceof Blob}function Tp(){return"undefined"!==typeof Blob}function Cp(e,t,n,r){if(r<t)throw bp("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw bp("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ip(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function jp(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Ap(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(fp||(fp={}));class Rp{constructor(e,t,n,r,i,a,s,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Pp(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===fp.NO_ERROR,i=n.getStatus();if(!t||Ap(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===fp.ABORT;return void e(!1,new Pp(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new Pp(a,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(a){r(a)}else if(null!==i){const e=pp();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?wp():yp())}else{r(gp())}};this.canceled_?t(0,new Pp(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){a&&clearTimeout(a)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===o?(o=2,a=0):a=1e3*(r+Math.random()),d(a)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Pp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Dp(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Lp(){const e=Dp();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Tp())return new Blob(n);throw new dp(hp.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Op(e){if("undefined"===typeof atob)throw t="base-64",new dp(hp.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Mp="raw",Fp="base64",Up="base64url",Vp="data_url";class zp{constructor(e,t){this.data=e,this.contentType=t||null}}function Bp(e,t){switch(e){case Mp:return new zp(qp(t));case Fp:case Up:return new zp(Hp(e,t));case Vp:return new zp(function(e){const t=new Wp(e);return t.base64?Hp(Fp,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw xp(Vp,"Malformed data URL.")}return qp(t)}(t.rest)}(t),new Wp(t).contentType)}throw pp()}function qp(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Hp(e,t){switch(e){case Fp:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw xp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Up:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw xp(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Op(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw xp(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class Wp{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw xp(Vp,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Kp{constructor(e,t){let n=0,r="";Np(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Np(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Kp(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Kp(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Tp()){const e=t.map(e=>e instanceof Kp?e.data_:e);return new Kp(Lp.apply(null,e))}{const e=t.map(e=>_p(e)?Bp(Mp,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Kp(r,!0)}}uploadData(){return this.data_}}function Gp(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Qp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Yp(e,t){return t}class Jp{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Yp}}let $p=null;function Xp(){if($p)return $p;const e=[];e.push(new Jp("bucket")),e.push(new Jp("generation")),e.push(new Jp("metageneration")),e.push(new Jp("name","fullPath",!0));const t=new Jp("name");t.xform=function(e,t){return function(e){return!_p(e)||e.length<2?e:Qp(e)}(t)},e.push(t);const n=new Jp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Jp("timeCreated")),e.push(new Jp("updated")),e.push(new Jp("md5Hash",null,!0)),e.push(new Jp("cacheControl",null,!0)),e.push(new Jp("contentDisposition",null,!0)),e.push(new Jp("contentEncoding",null,!0)),e.push(new Jp("contentLanguage",null,!0)),e.push(new Jp("contentType",null,!0)),e.push(new Jp("metadata","customMetadata",!0)),$p=e,$p}function Zp(e,t,n){const r={type:"file"},i=n.length;for(let a=0;a<i;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Sp(n,r);return t._makeStorageReference(i)}})}(r,e),r}function eg(e,t,n){const r=Gp(t);if(null===r)return null;return Zp(e,r,n)}function tg(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class ng{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rg(e){if(!e)throw pp()}function ig(e,t){return function(n,r){const i=eg(e,r,t);return rg(null!==i),i}}function ag(e,t){return function(n,r){const i=eg(e,r,t);return rg(null!==i),function(e,t,n,r){const i=Gp(t);if(null===i)return null;if(!_p(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const s=encodeURIComponent;return a.split(",").map(t=>{const i=e.bucket,a=e.fullPath;return Ip("/b/"+s(i)+"/o/"+s(a),n,r)+jp({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function sg(e){return function(t,n){let r;var i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new dp(hp.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new dp(hp.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new dp(hp.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new dp(hp.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function og(e){const t=sg(e);return function(n,r){let i=t(n,r);var a;return 404===n.getStatus()&&(a=e.path,i=new dp(hp.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function lg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function cg(e,t,n,r,i){const a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+o;const l=lg(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+tg(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Kp.getBlob(c,r,u);if(null===d)throw vp();const h={name:l.fullPath},f=Ip(a,e.host,e._protocol),m=e.maxUploadRetryTime,p=new ng(f,"POST",ig(e,n),m);return p.urlParams=h,p.headers=s,p.body=d.uploadData(),p.errorHandler=sg(t),p}class ug{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw Ep("cannot .send() more than once");if(S(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ep("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ep("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ep("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ep("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class dg extends ug{initXhr(){this.xhr_.responseType="text"}}function hg(){return new dg}class fg{constructor(e,t){this._service=e,this._location=t instanceof Sp?t:Sp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fg(e,t)}get root(){const e=new Sp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Sp(this._location.bucket,e);return new fg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new dp(hp.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function mg(e,t,n){e._throwIfRoot("uploadBytes");const r=cg(e.storage,e._location,Xp(),new Kp(t,!0),n);return e.storage.makeRequestWithTokens(r,hg).then(t=>({metadata:t,ref:e}))}function pg(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Ip(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ng(r,"GET",ag(e,n),i);return a.errorHandler=og(t),a}(e.storage,e._location,Xp());return e.storage.makeRequestWithTokens(t,hg).then(e=>{if(null===e)throw new dp(hp.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function gg(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Ip(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new ng(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=og(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,hg)}function yg(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Sp(e._location.bucket,n);return new fg(e.storage,r)}function vg(e,t){if(e instanceof xg){const n=e;if(null==n._bucket)throw new dp(hp.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+up+"' property when initializing the app?");const r=new fg(n,n._bucket);return null!=t?vg(r,t):r}return void 0!==t?yg(e,t):e}function bg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xg)return new fg(e,t);throw bp("To use ref(service, url), the first argument must be a Storage instance.")}return vg(e,t)}function wg(e,t){const n=null===t||void 0===t?void 0:t[up];return null==n?null:Sp.makeFromBucketSpec(n,e)}class xg{constructor(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=cp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Sp.makeFromBucketSpec(r,this._host):wg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Sp.makeFromBucketSpec(this._url,e):this._bucket=wg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fg(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new kp(wp());{const a=function(e,t,n,r,i,a){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=jp(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Rp(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Eg="@firebase/storage",Sg="0.14.0",kg="storage";function _g(e,t){return bg(e=q(e),t)}function Ng(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=S(t);i&&(k("https://".concat(e.host,"/b")),C("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(e._overrideAuthToken="string"===typeof a?a:_(a,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Tg(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new xg(r,i,a,n,it)}Ze(new H(kg,Tg,"PUBLIC").setMultipleInstances(!0)),ot(Eg,Sg,""),ot(Eg,Sg,"esm2020");const Cg=at({apiKey:"AIzaSyDemoKeyForLocalDevelopmentOnly123456",authDomain:"demo-ikhaya-rent.firebaseapp.com",projectId:"demo-ikhaya-rent",storageBucket:"demo-ikhaya-rent.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890abcdef"}),Ig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const t=et(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=et(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(O(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Tt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Hi,persistence:[ei,Dr,Ur]}),r=x("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qi)return;const r=null===t||void 0===t?void 0:t.token;Yi!==r&&(Yi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){q(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){q(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const a=v("auth");return a&&Yn(n,"http://".concat(a)),n}(Cg),jg=function(e,t){const n="object"==typeof e?e:st(),r="string"==typeof e?e:t||wo,i=et(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=b("firestore");e&&qf(i,...e)}return i}(Cg),Ag=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st(),t=arguments.length>1?arguments[1]:void 0;e=q(e);const n=et(e,kg).getImmediate({identifier:t}),r=b("storage");return r&&Ng(n,...r),n}(Cg);console.log("\ud83d\udd27 Connecting to Firebase Emulators..."),Yn(Ig,"http://localhost:9099",{disableWarnings:!0}),qf(jg,"localhost",8080),Ng(Ag,"localhost",9199),console.log("\u2705 Connected to Firebase Emulators");var Rg=n(579);const Pg=(0,r.createContext)(void 0),Dg=e=>{let{children:t}=e;const n={auth:Ig,db:jg,storage:Ag};return(0,Rg.jsx)(Pg.Provider,{value:n,children:t})};const Lg=new class{async register(e){try{this.validatePassword(e.password);const t=await async function(e,t,n){if(tt(e.app))return Promise.reject(jt(e));const r=Mn(e),i=Gn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yr,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t}),s=await vr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}(Ig,e.email,e.password),n=t.user;await Ir(n,{displayName:e.name});const r={uid:n.uid,email:e.email,name:e.name,role:e.role,phone:e.phone,emailVerified:!1,createdAt:jm(),updatedAt:jm()};await ip(Qf(jg,"users",n.uid),r),await Cr(n);return{user:u(u({id:n.uid},r),{},{createdAt:r.createdAt,updatedAt:r.updatedAt}),firebaseUser:n}}catch(t){if("auth/email-already-in-use"===t.code)throw new Error("An account with this email already exists");if("auth/invalid-email"===t.code)throw new Error("Invalid email address");if("auth/weak-password"===t.code)throw new Error("Password is too weak");throw t}}async login(e){try{const t=await function(e,t,n){return tt(e.app)?Promise.reject(jt(e)):_r(q(e),ur.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t})}(Ig,e.email,e.password),n=t.user,r=await np(Qf(jg,"users",n.uid));if(!r.exists())throw new Error("User profile not found");const i=r.data();return{user:u({id:r.id},i),firebaseUser:n}}catch(t){if("auth/user-not-found"===t.code||"auth/wrong-password"===t.code||"auth/invalid-credential"===t.code)throw new Error("Invalid email or password");if("auth/user-disabled"===t.code)throw new Error("This account has been disabled");if("auth/too-many-requests"===t.code)throw new Error("Too many failed login attempts. Please try again later");throw t}}async logout(){try{await function(e){return q(e).signOut()}(Ig)}catch(e){throw new Error("Failed to logout")}}async requestPasswordReset(e){try{await async function(e,t,n){const r=Mn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Nr(r,i,n),await Gn(r,i,"getOobCode",nr,"EMAIL_PASSWORD_PROVIDER")}(Ig,e)}catch(t){if("auth/user-not-found"===t.code)return;if("auth/invalid-email"===t.code)throw new Error("Invalid email address");throw t}}getCurrentUser(){return Ig.currentUser}async getUserProfile(e){try{const t=await np(Qf(jg,"users",e));if(!t.exists())return null;const n=t.data();return u({id:t.id},n)}catch(t){return console.error("Error fetching user profile:",t),null}}validatePassword(e){if(e.length<8)throw new Error("Password must be at least 8 characters long");if(!/[A-Z]/.test(e))throw new Error("Password must contain at least one uppercase letter");if(!/[a-z]/.test(e))throw new Error("Password must contain at least one lowercase letter");if(!/[0-9]/.test(e))throw new Error("Password must contain at least one number")}async resendEmailVerification(){const e=this.getCurrentUser();if(!e)throw new Error("No user is currently logged in");if(e.emailVerified)throw new Error("Email is already verified");try{await Cr(e)}catch(t){throw new Error("Failed to send verification email")}}},Og=(0,r.createContext)(void 0),Mg=()=>{const e=(0,r.useContext)(Og);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Fg=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return q(e).onAuthStateChanged(t,n,r)}(Ig,async e=>{if(i(e),e)try{const t=await Lg.getUserProfile(e.uid);s(t)}catch(t){console.error("Error fetching user profile:",t),s(null)}else s(null);l(!1)});return e},[]);const c={currentUser:n,userProfile:a,loading:o,logout:async()=>{try{await Lg.logout(),i(null),s(null)}catch(e){throw console.error("Logout error:",e),e}}};return(0,Rg.jsx)(Og.Provider,{value:c,children:t})};const Ug=["sri"],Vg=["page"],zg=["page","matches"],Bg=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],qg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Hg=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var Wg,Kg=e=>{throw TypeError(e)},Gg=(e,t,n)=>(((e,t,n)=>{t.has(e)||Kg("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e)),Qg="popstate";function Yg(){return ny(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Zg("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:ey(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function Jg(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function $g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Xg(e,t){return{usr:e.state,key:e.key,idx:t}}function Zg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ty(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function ey(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function ty(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function ny(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",l=null,c=d();function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function f(e){return ry(e)}null==c&&(c=0,s.replaceState(u(u({},s.state),{},{idx:c}),""));let m={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Qg,h),l=e,()=>{i.removeEventListener(Qg,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=Zg(m.location,e,t);n&&n(r,e),c=d()+1;let u=Xg(r,c),h=m.createHref(r);try{s.pushState(u,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}a&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=Zg(m.location,e,t);n&&n(r,e),c=d();let i=Xg(r,c),u=m.createHref(r);s.replaceState(i,"",u),a&&l&&l({action:o,location:m.location,delta:0})},go:e=>s.go(e)};return m}function ry(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),Jg(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:ey(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var iy=class{constructor(e){var t,n,r;if(t=this,n=Wg,r=new Map,n.has(t)?Kg("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,r),e)for(let[i,a]of e)this.set(i,a)}get(e){if(Gg(this,Wg).has(e))return Gg(this,Wg).get(e);if(void 0!==e.defaultValue)return e.defaultValue;throw new Error("No value found for context")}set(e,t){Gg(this,Wg).set(e,t)}};Wg=new WeakMap;var ay=new Set(["lazy","caseSensitive","path","id","index","children"]);var sy=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function oy(e){return sy.has(e)}function ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e.map((e,a)=>{let s=[...n,String(a)],o="string"===typeof e.id?e.id:s.join("-");if(Jg(!0!==e.index||!e.children,"Cannot specify children on an index route"),Jg(i||!r[o],'Found a route id collision on id "'.concat(o,"\".  Route id's must be globally unique within Data Router usages")),function(e){return!0===e.index}(e)){let n=u(u({},e),{},{id:o});return r[o]=cy(n,t(n)),n}{let n=u(u({},e),{},{id:o,children:void 0});return r[o]=cy(n,t(n)),e.children&&(n.children=ly(e.children,t,s,r,i)),n}})}function cy(e,t){return Object.assign(e,u(u({},t),"object"===typeof t.lazy&&null!=t.lazy?{lazy:u(u({},e.lazy),t.lazy)}:{}))}function uy(e,t){return dy(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function dy(e,t,n,r){let i=Ty(("string"===typeof t?ty(t):t).pathname||"/",n);if(null==i)return null;let a=fy(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=Ny(i);s=Sy(a[o],e,r)}return s}function hy(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function fy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;Jg(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Ly([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(Jg(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),fy(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:Ey(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of my(e.path))a(e,t,!0,r);else a(e,t)}),t}function my(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=my(r.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var py=/^:[\w-]+$/,gy=3,yy=2,vy=1,by=10,wy=-2,xy=e=>"*"===e;function Ey(e,t){let n=e.split("/"),r=n.length;return n.some(xy)&&(r+=wy),t&&(r+=yy),n.filter(e=>!xy(e)).reduce((e,t)=>e+(py.test(t)?gy:""===t?vy:by),r)}function Sy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=ky({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=ky({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:Ly([a,u.pathname]),pathnameBase:Oy(Ly([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Ly([a,u.pathnameBase]))}return s}function ky(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_y(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function _y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];$g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Ny(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return $g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function Ty(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var Cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iy=e=>Cy.test(e);function jy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Ay(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Ry(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Py(e){let t=Ry(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Dy(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=ty(e):(r=u({},e),Jg(!r.pathname||!r.pathname.includes("?"),Ay("?","pathname","search",r)),Jg(!r.pathname||!r.pathname.includes("#"),Ay("#","pathname","hash",r)),Jg(!r.search||!r.search.includes("#"),Ay("#","search","hash",r)));let a,s=""===e||""===r.pathname,o=s?"/":r.pathname;if(null==o)a=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:a=""}="string"===typeof e?ty(e):e;return r?(r=r.replace(/\/\/+/g,"/"),t=r.startsWith("/")?jy(r.substring(1),"/"):jy(r,n)):t=n,{pathname:t,search:My(i),hash:Fy(a)}}(r,a),c=o&&"/"!==o&&o.endsWith("/"),d=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Ly=e=>e.join("/").replace(/\/\/+/g,"/"),Oy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),My=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Fy=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Uy=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Vy(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function zy(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var By="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function qy(e,t){let n=e;if("string"!==typeof n||!Cy.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(By)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=Ty(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:i=!0}catch(a){$g(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:i,to:n}}var Hy=Symbol("Uninstrumented");function Wy(e,t){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(e=>e({id:t.id,index:t.index,path:t.path,instrument(e){let t=Object.keys(n);for(let r of t)e[r]&&n[r].push(e[r])}}));let r={};if("function"===typeof t.lazy&&n.lazy.length>0){let e=Ky(n.lazy,t.lazy,()=>{});e&&(r.lazy=e)}if("object"===typeof t.lazy){let e=t.lazy;["middleware","loader","action"].forEach(t=>{let i=e[t],a=n["lazy.".concat(t)];if("function"===typeof i&&a.length>0){let e=Ky(a,i,()=>{});e&&(r.lazy=Object.assign(r.lazy||{},{[t]:e}))}})}return["loader","action"].forEach(e=>{let i=t[e];if("function"===typeof i&&n[e].length>0){var a;let t=null!==(a=i[Hy])&&void 0!==a?a:i,s=Ky(n[e],t,function(){return Qy(arguments.length<=0?void 0:arguments[0])});s&&("loader"===e&&!0===t.hydrate&&(s.hydrate=!0),s[Hy]=t,r[e]=s)}}),t.middleware&&t.middleware.length>0&&n.middleware.length>0&&(r.middleware=t.middleware.map(e=>{var t;let r=null!==(t=e[Hy])&&void 0!==t?t:e,i=Ky(n.middleware,r,function(){return Qy(arguments.length<=0?void 0:arguments[0])});return i?(i[Hy]=r,i):e})),r}function Ky(e,t,n){return 0===e.length?null:async function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];let s=await Gy(e,n(...i),()=>t(...i),e.length-1);if("error"===s.type)throw s.value;return s.value}}async function Gy(e,t,n,r){let i,a=e[r];if(a){let o,l=async()=>(o?console.error("You cannot call instrumented handlers more than once"):o=Gy(e,t,n,r-1),i=await o,Jg(i,"Expected a result"),"error"===i.type&&i.value instanceof Error?{status:"error",error:i.value}:{status:"success",error:void 0});try{await a(l,t)}catch(s){console.error("An instrumentation function threw an error:",s)}o||await l(),await o}else try{let e=await n();i={type:"success",value:e}}catch(s){i={type:"error",value:s}}return i||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Qy(e){let{request:t,context:n,params:r,unstable_pattern:i}=e;return{request:Jy(t),params:u({},r),unstable_pattern:i,context:$y(n)}}function Yy(e,t){return u(u(u(u({currentUrl:ey(e.state.location)},"formMethod"in t?{formMethod:t.formMethod}:{}),"formEncType"in t?{formEncType:t.formEncType}:{}),"formData"in t?{formData:t.formData}:{}),"body"in t?{body:t.body}:{})}function Jy(e){return{method:e.method,url:e.url,headers:{get:function(){return e.headers.get(...arguments)}}}}function $y(e){if(function(e){if(null===e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t||Object.getOwnPropertyNames(t).sort().join("\0")===Xy}(e)){let t=u({},e);return Object.freeze(t),t}return{get:t=>e.get(t)}}var Xy=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zy=["POST","PUT","PATCH","DELETE"],ev=new Set(Zy),tv=["GET",...Zy],nv=new Set(tv),rv=new Set([301,302,303,307,308]),iv=new Set([307,308]),av={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sv={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ov={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lv=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),cv="remix-router-transitions",uv=Symbol("ResetLoaderData");function dv(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement;Jg(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.hydrationRouteProperties||[],i=e.mapRouteProperties||lv,a=i;if(e.unstable_instrumentations){let t=e.unstable_instrumentations;a=e=>u(u({},i(e)),Wy(t.map(e=>e.route).filter(Boolean),e))}let s,o={},l=ly(e.routes,a,void 0,o),c=e.basename||"/";c.startsWith("/")||(c="/".concat(c));let d,h,f=e.dataStrategy||kv,m=u({},e.future),p=null,g=new Set,y=null,v=null,b=null,w=null!=e.hydrationData,x=uy(l,e.history.location,c),E=!1,S=null;if(null!=x||e.patchRoutesOnNavigation){if(x&&!e.hydrationData){me(x,l,e.history.location.pathname).active&&(x=null)}if(x)if(x.some(e=>e.route.lazy))d=!1;else if(x.some(e=>pv(e.route))){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null;if(n){let e=x.findIndex(e=>void 0!==n[e.route.id]);d=x.slice(0,e+1).every(e=>!gv(e.route,t,n))}else d=x.every(e=>!gv(e.route,t,n))}else d=!0;else{d=!1,x=[];let t=me(null,l,e.history.location.pathname);t.active&&t.matches&&(E=!0,x=t.matches)}}else{let t=Wv(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=Hv(l);d=!0,x=n,S={[r.id]:t}}let k,_,N={historyAction:e.history.action,location:e.history.location,matches:x,initialized:d,navigation:av,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||S,fetchers:new Map,blockers:new Map},T="POP",C=null,I=!1,j=!1,A=new Map,R=null,P=!1,D=!1,L=new Set,O=new Map,M=0,F=-1,U=new Map,V=new Set,z=new Map,B=new Map,q=new Set,H=new Map,W=null;function K(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.matches&&(e.matches=e.matches.map(e=>{let t=o[e.route.id],n=e.route;return n.element!==t.element||n.errorElement!==t.errorElement||n.hydrateFallbackElement!==t.hydrateFallbackElement?u(u({},e),{},{route:t}):e})),N=u(u({},N),e);let n=[],r=[];N.fetchers.forEach((e,t)=>{"idle"===e.state&&(q.has(t)?n.push(t):r.push(t))}),q.forEach(e=>{N.fetchers.has(e)||O.has(e)||n.push(e)}),[...g].forEach(r=>{var i;return r(N,{deletedFetchers:n,newErrors:null!==(i=e.errors)&&void 0!==i?i:null,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync})}),n.forEach(e=>re(e)),r.forEach(e=>N.fetchers.delete(e))}function G(t,n){var r,i,a,o;let c,{flushSync:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=null!=N.actionData&&null!=N.navigation.formMethod&&ib(N.navigation.formMethod)&&"loading"===N.navigation.state&&!0!==(null===(r=t.state)||void 0===r?void 0:r._isRedirect);c=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:h?N.actionData:null;let f=n.loaderData?zv(N.loaderData,n.loaderData,n.matches||[],n.errors):N.loaderData,m=N.blockers;m.size>0&&(m=new Map(m),m.forEach((e,t)=>m.set(t,ov)));let p,g=!P&&fe(t,n.matches||N.matches),y=!0===I||null!=N.navigation.formMethod&&ib(N.navigation.formMethod)&&!0!==(null===(i=t.state)||void 0===i?void 0:i._isRedirect);if(s&&(l=s,s=void 0),P||"POP"===T||("PUSH"===T?e.history.push(t,t.state):"REPLACE"===T&&e.history.replace(t,t.state)),"POP"===T){let e=A.get(N.location.pathname);e&&e.has(t.pathname)?p={currentLocation:N.location,nextLocation:t}:A.has(t.pathname)&&(p={currentLocation:t,nextLocation:N.location})}else if(j){let e=A.get(N.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),A.set(N.location.pathname,e)),p={currentLocation:N.location,nextLocation:t}}K(u(u({},n),{},{actionData:c,loaderData:f,historyAction:T,location:t,initialized:!0,navigation:av,revalidation:"idle",restoreScrollPosition:g,preventScrollReset:y,blockers:m}),{viewTransitionOpts:p,flushSync:!0===d}),T="POP",I=!1,j=!1,P=!1,D=!1,null===(a=C)||void 0===a||a.resolve(),C=null,null===(o=W)||void 0===o||o.resolve(),W=null}async function Q(t,n,i){k&&k.abort(),k=null,T=t,P=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(y&&b){let n=he(e,t);y[n]=b()}}(N.location,N.matches),I=!0===(i&&i.preventScrollReset),j=!0===(i&&i.enableViewTransition);let d=s||l,h=i&&i.overrideNavigation,f=null!==i&&void 0!==i&&i.initialHydration&&N.matches&&N.matches.length>0&&!E?N.matches:uy(d,n,c),m=!0===(i&&i.flushSync);if(f&&N.initialized&&!D&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(N.location,n)&&!(i&&i.submission&&ib(i.submission.formMethod)))return void G(n,{matches:f},{flushSync:m});let p=me(f,d,n.pathname);if(p.active&&p.matches&&(f=p.matches),!f){let{error:e,notFoundMatches:t,route:r}=de(n.pathname);return void G(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:m})}k=new AbortController;let g,v=Ov(e.history,n,k.signal,i&&i.submission),w=e.getContext?await e.getContext():new iy;if(i&&i.pendingError)g=[qv(f).route.id,{type:"error",error:i.pendingError}];else if(i&&i.submission&&ib(i.submission.formMethod)){let t=await async function(t,n,i,s,u,d,h){let f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};Z();let m,p=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(n,i);if(K({navigation:p},{flushSync:!0===f.flushSync}),d){let e=await pe(s,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){if(0===e.partialMatches.length){let{matches:t,route:n}=Hv(l);return{matches:t,pendingActionResult:[n.id,{type:"error",error:e.error}]}}let t=qv(e.partialMatches).route.id;return{matches:e.partialMatches,pendingActionResult:[t,{type:"error",error:e.error}]}}if(!e.matches){let{notFoundMatches:e,error:t,route:r}=de(n.pathname);return{matches:e,pendingActionResult:[r.id,{type:"error",error:t}]}}s=e.matches}let g=sb(s,n);if(g.route.action||g.route.lazy){let e=jv(a,o,t,s,g,h?[]:r,u),n=await $(t,e,u,null);if(m=n[g.route.id],!m)for(let t of s)if(n[t.route.id]){m=n[t.route.id];break}if(t.signal.aborted)return{shortCircuited:!0}}else m={type:"error",error:Wv(405,{method:t.method,pathname:n.pathname,routeId:g.route.id})};if(Zv(m)){let n;if(f&&null!=f.replace)n=f.replace;else{n=Lv(m.response.headers.get("Location"),new URL(t.url),c,e.history)===N.location.pathname+N.location.search}return await J(t,m,!0,{submission:i,replace:n}),{shortCircuited:!0}}if(Xv(m)){let e=qv(s,g.route.id);return!0!==(f&&f.replace)&&(T="PUSH"),{matches:s,pendingActionResult:[e.route.id,m,g.route.id]}}return{matches:s,pendingActionResult:[g.route.id,m]}}(v,n,i.submission,f,w,p.active,i&&!0===i.initialHydration,{replace:i.replace,flushSync:m});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(Xv(r)&&Vy(r.error)&&404===r.error.status)return k=null,void G(n,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}f=t.matches||f,g=t.pendingActionResult,h=lb(n,i.submission),m=!1,p.active=!1,v=Ov(e.history,v.url,v.signal)}let{shortCircuited:x,matches:S,loaderData:_,errors:C}=await async function(t,n,i,d,h,f,m,p,g,y,v,b,w){let x=f||lb(n,m),E=m||p||ob(x),S=!P&&!y;if(h){if(S){let e=Y(b);K(u({navigation:x},void 0!==e?{actionData:e}:{}),{flushSync:v})}let e=await pe(i,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){if(0===e.partialMatches.length){let{matches:t,route:n}=Hv(l);return{matches:t,loaderData:{},errors:{[n.id]:e.error}}}let t=qv(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=de(n.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}i=e.matches}let _=s||l,{dsMatches:T,revalidatingFetchers:C}=mv(t,d,a,o,e.history,N,i,E,n,y?[]:r,!0===y,D,L,q,z,V,_,c,null!=e.patchRoutesOnNavigation,b,w);if(F=++M,!e.dataStrategy&&!T.some(e=>e.shouldLoad)&&!T.some(e=>e.route.middleware&&e.route.middleware.length>0)&&0===C.length){let e=se();return G(n,u(u({matches:i,loaderData:{},errors:b&&Xv(b[1])?{[b[0]]:b[1].error}:null},Bv(b)),e?{fetchers:new Map(N.fetchers)}:{}),{flushSync:v}),{shortCircuited:!0}}if(S){let e={};if(!h){e.navigation=x;let t=Y(b);void 0!==t&&(e.actionData=t)}C.length>0&&(e.fetchers=function(e){return e.forEach(e=>{let t=N.fetchers.get(e.key),n=cb(void 0,t?t.data:void 0);N.fetchers.set(e.key,n)}),new Map(N.fetchers)}(C)),K(e,{flushSync:v})}C.forEach(e=>{ie(e.key),e.controller&&O.set(e.key,e.controller)});let I=()=>C.forEach(e=>ie(e.key));k&&k.signal.addEventListener("abort",I);let{loaderResults:j,fetcherResults:A}=await X(T,C,t,d);if(t.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",I);C.forEach(e=>O.delete(e.key));let R=Kv(j);if(R)return await J(t,R.result,!0,{replace:g}),{shortCircuited:!0};if(R=Kv(A),R)return V.add(R.key),await J(t,R.result,!0,{replace:g}),{shortCircuited:!0};let{loaderData:U,errors:B}=Vv(N,i,j,b,C,A);y&&N.errors&&(B=u(u({},N.errors),B));let H=se(),W=oe(F),Q=H||W||C.length>0;return u({matches:i,loaderData:U,errors:B},Q?{fetchers:new Map(N.fetchers)}:{})}(v,n,f,w,p.active,h,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,m,g,i&&i.callSiteDefaultShouldRevalidate);x||(k=null,G(n,u(u({matches:S||f},Bv(g)),{},{loaderData:_,errors:C})))}function Y(e){return e&&!Xv(e[1])?{[e[0]]:e[1].data}:N.actionData?0===Object.keys(N.actionData).length?null:N.actionData:void 0}async function J(r,i,a){let{submission:s,fetcherSubmission:o,preventScrollReset:l,replace:d}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var h;a||(null===(h=C)||void 0===h||h.resolve(),C=null);i.response.headers.has("X-Remix-Revalidate")&&(D=!0);let f=i.response.headers.get("Location");Jg(f,"Expected a Location header on the redirect Response"),f=Lv(f,new URL(r.url),c,e.history);let m=Zg(N.location,f,{_isRedirect:!0});if(n){let e=!1;if(i.response.headers.has("X-Remix-Reload-Document"))e=!0;else if(Iy(f)){const n=ry(f,!0);e=n.origin!==t.location.origin||null==Ty(n.pathname,c)}if(e)return void(d?t.location.replace(f):t.location.assign(f))}k=null;let p=!0===d||i.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:g,formAction:y,formEncType:v}=N.navigation;!s&&!o&&g&&y&&v&&(s=ob(N.navigation));let b=s||o;if(iv.has(i.response.status)&&b&&ib(b.formMethod))await Q(p,m,{submission:u(u({},b),{},{formAction:f}),preventScrollReset:l||I,enableViewTransition:a?j:void 0});else{let e=lb(m,s);await Q(p,m,{overrideNavigation:e,fetcherSubmission:o,preventScrollReset:l||I,enableViewTransition:a?j:void 0})}}async function $(e,t,n,r){let i,a={};try{i=await Av(f,e,t,r,n,!1)}catch(o){return t.filter(e=>e.shouldLoad).forEach(e=>{a[e.route.id]={type:"error",error:o}}),a}if(e.signal.aborted)return a;if(!ib(e.method))for(let l of t){var s;if("error"===(null===(s=i[l.route.id])||void 0===s?void 0:s.type))break;i.hasOwnProperty(l.route.id)||N.loaderData.hasOwnProperty(l.route.id)||N.errors&&N.errors.hasOwnProperty(l.route.id)||!l.shouldCallHandler()||(i[l.route.id]={type:"error",result:new Error("No result returned from dataStrategy for route ".concat(l.route.id))})}for(let[l,u]of Object.entries(i))if($v(u)){let n=u.result;a[l]={type:"redirect",response:Dv(n,e,l,t,c)}}else a[l]=await Pv(u);return a}async function X(e,t,n,r){let i=$(n,e,r,null),a=Promise.all(t.map(async e=>{if(e.matches&&e.match&&e.request&&e.controller){let t=(await $(e.request,e.matches,r,e.key))[e.match.route.id];return{[e.key]:t}}return Promise.resolve({[e.key]:{type:"error",error:Wv(404,{pathname:e.path})}})}));return{loaderResults:await i,fetcherResults:(await a).reduce((e,t)=>Object.assign(e,t),{})}}function Z(){D=!0,z.forEach((e,t)=>{O.has(t)&&L.add(t),ie(t)})}function ee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N.fetchers.set(e,t),K({fetchers:new Map(N.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function te(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=qv(N.matches,t);re(e),K({errors:{[i.route.id]:n},fetchers:new Map(N.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function ne(e){return B.set(e,(B.get(e)||0)+1),q.has(e)&&q.delete(e),N.fetchers.get(e)||sv}function re(e){let t=N.fetchers.get(e);!O.has(e)||t&&"loading"===t.state&&U.has(e)||ie(e),z.delete(e),U.delete(e),V.delete(e),q.delete(e),L.delete(e),N.fetchers.delete(e)}function ie(e,t){let n=O.get(e);n&&(n.abort(t),O.delete(e))}function ae(e){for(let t of e){let e=ub(ne(t).data);N.fetchers.set(t,e)}}function se(){let e=[],t=!1;for(let n of V){let r=N.fetchers.get(n);Jg(r,"Expected fetcher: ".concat(n)),"loading"===r.state&&(V.delete(n),e.push(n),t=!0)}return ae(e),t}function oe(e){let t=[];for(let[n,r]of U)if(r<e){let e=N.fetchers.get(n);Jg(e,"Expected fetcher: ".concat(n)),"loading"===e.state&&(ie(n),U.delete(n),t.push(n))}return ae(t),t.length>0}function le(e){N.blockers.delete(e),H.delete(e)}function ce(e,t){let n=N.blockers.get(e)||ov;Jg("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: ".concat(n.state," -> ").concat(t.state));let r=new Map(N.blockers);r.set(e,t),K({blockers:r})}function ue(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===H.size)return;H.size>1&&$g(!1,"A router only supports one blocker at a time");let i=Array.from(H.entries()),[a,s]=i[i.length-1],o=N.blockers.get(a);return o&&"proceeding"===o.state?void 0:s({currentLocation:t,nextLocation:n,historyAction:r})?a:void 0}function de(e){let t=Wv(404,{pathname:e}),n=s||l,{matches:r,route:i}=Hv(n);return{notFoundMatches:r,route:i,error:t}}function he(e,t){if(v){return v(e,t.map(e=>hy(e,N.loaderData)))||e.key}return e.key}function fe(e,t){if(y){let n=he(e,t),r=y[n];if("number"===typeof r)return r}return null}function me(t,n,r){if(e.patchRoutesOnNavigation){if(!t){return{active:!0,matches:dy(n,r,c,!0)||[]}}if(Object.keys(t[0].params).length>0){return{active:!0,matches:dy(n,r,c,!0)}}}return{active:!1,matches:null}}async function pe(t,n,r,i){if(!e.patchRoutesOnNavigation)return{type:"success",matches:t};let u=t;for(;;){let t=null==s,h=s||l,f=o;try{await e.patchRoutesOnNavigation({signal:r,path:n,matches:u,fetcherKey:i,patch:(e,t)=>{r.aborted||vv(e,t,h,f,a,!1)}})}catch(d){return{type:"error",error:d,partialMatches:u}}finally{t&&!r.aborted&&(l=[...l])}if(r.aborted)return{type:"aborted"};let m=uy(h,n,c),p=null;if(m){if(0===Object.keys(m[0].params).length)return{type:"success",matches:m};if(p=dy(h,n,c,!0),!(p&&u.length<p.length&&ge(u,p.slice(0,u.length))))return{type:"success",matches:m}}if(p||(p=dy(h,n,c,!0)),!p||ge(u,p))return{type:"success",matches:null};u=p}}function ge(e,t){return e.length===t.length&&e.every((e,n)=>e.route.id===t[n].route.id)}return h={get basename(){return c},get future(){return m},get state(){return N},get routes(){return l},get window(){return t},initialize:function(){if(p=e.history.listen(t=>{let{action:n,location:r,delta:i}=t;if(_)return _(),void(_=void 0);$g(0===H.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a=ue({currentLocation:N.location,nextLocation:r,historyAction:n});if(a&&null!=i){var s;let t=new Promise(e=>{_=e});return e.history.go(-1*i),ce(a,{state:"blocked",location:r,proceed(){ce(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.then(()=>e.history.go(i))},reset(){let e=new Map(N.blockers);e.set(a,ov),K({blockers:e})}}),null===(s=C)||void 0===s||s.resolve(),void(C=null)}return Q(n,r)}),n){!function(e,t){try{let n=e.sessionStorage.getItem(cv);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,A);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(cv,JSON.stringify(r))}catch(n){$g(!1,"Failed to save applied view transitions in sessionStorage (".concat(n,")."))}}}(t,A);t.addEventListener("pagehide",e),R=()=>t.removeEventListener("pagehide",e)}return N.initialized||Q("POP",N.location,{initialHydration:!0}),h},subscribe:function(e){return g.add(e),()=>g.delete(e)},enableScrollRestoration:function(e,t,n){if(y=e,b=t,v=n||null,!w&&N.navigation===av){w=!0;let e=fe(N.location,N.matches);null!=e&&K({restoreScrollPosition:e})}return()=>{y=null,b=null,v=null}},navigate:async function t(n,r){var i;if(null===(i=C)||void 0===i||i.resolve(),C=null,"number"===typeof n){C||(C=db());let t=C.promise;return e.history.go(n),t}let a=hv(N.location,N.matches,c,n,null===r||void 0===r?void 0:r.fromRouteId,null===r||void 0===r?void 0:r.relative),{path:s,submission:o,error:l}=fv(!1,a,r),d=N.location,h=Zg(N.location,s,r&&r.state);h=u(u({},h),e.history.encodeLocation(h));let f=r&&null!=r.replace?r.replace:void 0,m="PUSH";!0===f?m="REPLACE":!1===f||null!=o&&ib(o.formMethod)&&o.formAction===N.location.pathname+N.location.search&&(m="REPLACE");let p=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,g=!0===(r&&r.flushSync),y=ue({currentLocation:d,nextLocation:h,historyAction:m});y?ce(y,{state:"blocked",location:h,proceed(){ce(y,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),t(n,r)},reset(){let e=new Map(N.blockers);e.set(y,ov),K({blockers:e})}}):await Q(m,h,{submission:o,pendingError:l,preventScrollReset:p,replace:r&&r.replace,enableViewTransition:r&&r.viewTransition,flushSync:g,callSiteDefaultShouldRevalidate:r&&r.unstable_defaultShouldRevalidate})},fetch:async function(t,n,i,u){ie(t);let d=!0===(u&&u.flushSync),h=s||l,f=hv(N.location,N.matches,c,i,n,null===u||void 0===u?void 0:u.relative),m=uy(h,f,c),p=me(m,h,f);if(p.active&&p.matches&&(m=p.matches),!m)return void te(t,n,Wv(404,{pathname:f}),{flushSync:d});let{path:g,submission:y,error:v}=fv(!0,f,u);if(v)return void te(t,n,v,{flushSync:d});let b=e.getContext?await e.getContext():new iy,w=!0===(u&&u.preventScrollReset);y&&ib(y.formMethod)?await async function(t,n,i,u,d,h,f,m,p,g){Z(),z.delete(t);let y=N.fetchers.get(t);ee(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(p,y),{flushSync:f});let v=new AbortController,b=Ov(e.history,i,v.signal,p);if(h){let e=await pe(u,new URL(b.url).pathname,b.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void te(t,n,e.error,{flushSync:f});if(!e.matches)return void te(t,n,Wv(404,{pathname:i}),{flushSync:f});u=e.matches}let w=sb(u,i);if(!w.route.action&&!w.route.lazy){let e=Wv(405,{method:p.formMethod,pathname:i,routeId:n});return void te(t,n,e,{flushSync:f})}O.set(t,v);let x=M,E=jv(a,o,b,u,w,r,d),S=await $(b,E,d,t),_=S[w.route.id];if(!_)for(let e of E)if(S[e.route.id]){_=S[e.route.id];break}if(b.signal.aborted)return void(O.get(t)===v&&O.delete(t));if(q.has(t)){if(Zv(_)||Xv(_))return void ee(t,ub(void 0))}else{if(Zv(_))return O.delete(t),F>x?void ee(t,ub(void 0)):(V.add(t),ee(t,cb(p)),J(b,_,!1,{fetcherSubmission:p,preventScrollReset:m}));if(Xv(_))return void te(t,n,_.error)}let C=N.navigation.location||N.location,I=Ov(e.history,C,v.signal),j=s||l,A="idle"!==N.navigation.state?uy(j,N.navigation.location,c):N.matches;Jg(A,"Didn't find any matches after fetcher action");let R=++M;U.set(t,R);let P=cb(p,_.data);N.fetchers.set(t,P);let{dsMatches:B,revalidatingFetchers:H}=mv(I,d,a,o,e.history,N,A,p,C,r,!1,D,L,q,z,V,j,c,null!=e.patchRoutesOnNavigation,[w.route.id,_],g);H.filter(e=>e.key!==t).forEach(e=>{let t=e.key,n=N.fetchers.get(t),r=cb(void 0,n?n.data:void 0);N.fetchers.set(t,r),ie(t),e.controller&&O.set(t,e.controller)}),K({fetchers:new Map(N.fetchers)});let W=()=>H.forEach(e=>ie(e.key));v.signal.addEventListener("abort",W);let{loaderResults:Q,fetcherResults:Y}=await X(B,H,I,d);if(v.signal.aborted)return;if(v.signal.removeEventListener("abort",W),U.delete(t),O.delete(t),H.forEach(e=>O.delete(e.key)),N.fetchers.has(t)){let e=ub(_.data);N.fetchers.set(t,e)}let ne=Kv(Q);if(ne)return J(I,ne.result,!1,{preventScrollReset:m});if(ne=Kv(Y),ne)return V.add(ne.key),J(I,ne.result,!1,{preventScrollReset:m});let{loaderData:re,errors:ae}=Vv(N,A,Q,void 0,H,Y);oe(R),"loading"===N.navigation.state&&R>F?(Jg(T,"Expected pending action"),k&&k.abort(),G(N.navigation.location,{matches:A,loaderData:re,errors:ae,fetchers:new Map(N.fetchers)})):(K({errors:ae,loaderData:zv(N.loaderData,re,A,ae),fetchers:new Map(N.fetchers)}),D=!1)}(t,n,g,m,b,p.active,d,w,y,u&&u.unstable_defaultShouldRevalidate):(z.set(t,{routeId:n,path:g}),await async function(t,n,i,s,l,c,u,d,h){let f=N.fetchers.get(t);ee(t,cb(h,f?f.data:void 0),{flushSync:u});let m=new AbortController,p=Ov(e.history,i,m.signal);if(c){let e=await pe(s,new URL(p.url).pathname,p.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void te(t,n,e.error,{flushSync:u});if(!e.matches)return void te(t,n,Wv(404,{pathname:i}),{flushSync:u});s=e.matches}let g=sb(s,i);O.set(t,m);let y=M,v=jv(a,o,p,s,g,r,l),b=await $(p,v,l,t),w=b[g.route.id];O.get(t)===m&&O.delete(t);if(p.signal.aborted)return;if(q.has(t))return void ee(t,ub(void 0));if(Zv(w))return F>y?void ee(t,ub(void 0)):(V.add(t),void await J(p,w,!1,{preventScrollReset:d}));if(Xv(w))return void te(t,n,w.error);ee(t,ub(w.data))}(t,n,g,m,b,p.active,d,w,y))},revalidate:function(){W||(W=db()),Z(),K({revalidation:"loading"});let e=W.promise;return"submitting"===N.navigation.state?e:"idle"===N.navigation.state?(Q(N.historyAction,N.location,{startUninterruptedRevalidation:!0}),e):(Q(T||N.historyAction,N.navigation.location,{overrideNavigation:N.navigation,enableViewTransition:!0===j}),e)},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:ne,resetFetcher:function(e,t){ie(e,null===t||void 0===t?void 0:t.reason),ee(e,ub(null))},deleteFetcher:function(e){let t=(B.get(e)||0)-1;t<=0?(B.delete(e),q.add(e)):B.set(e,t),K({fetchers:new Map(N.fetchers)})},dispose:function(){p&&p(),R&&R(),g.clear(),k&&k.abort(),N.fetchers.forEach((e,t)=>re(t)),N.blockers.forEach((e,t)=>le(t))},getBlocker:function(e,t){let n=N.blockers.get(e)||ov;return H.get(e)!==t&&H.set(e,t),n},deleteBlocker:le,patchRoutes:function(e,t){let n=null==s;vv(e,t,s||l,o,a,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n&&(l=[...l],K({}))},_internalFetchControllers:O,_internalSetRoutes:function(e){o={},s=ly(e,a,void 0,o)},_internalSetStateDoNotUseOrYouWillBreakYourApp(e){K(e)}},e.unstable_instrumentations&&(h=function(e,t){let n={navigate:[],fetch:[]};if(t.forEach(e=>e({instrument(e){let t=Object.keys(e);for(let r of t)e[r]&&n[r].push(e[r])}})),n.navigate.length>0){var r;let t=null!==(r=e.navigate[Hy])&&void 0!==r?r:e.navigate,i=Ky(n.navigate,t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let[i,a]=n;return u({to:"number"===typeof i||"string"===typeof i?i:i?ey(i):"."},Yy(e,null!==a&&void 0!==a?a:{}))});i&&(i[Hy]=t,e.navigate=i)}if(n.fetch.length>0){var i;let t=null!==(i=e.fetch[Hy])&&void 0!==i?i:e.fetch,r=Ky(n.fetch,t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let[i,,a,s]=n;return u({href:null!==a&&void 0!==a?a:".",fetcherKey:i},Yy(e,null!==s&&void 0!==s?s:{}))});r&&(r[Hy]=t,e.fetch=r)}return e}(h,e.unstable_instrumentations.map(e=>e.router).filter(Boolean))),h}function hv(e,t,n,r,i,a){let s,o;if(i){s=[];for(let e of t)if(s.push(e),e.route.id===i){o=e;break}}else s=t,o=t[t.length-1];let l=Dy(r||".",Py(s),Ty(e.pathname,n)||e.pathname,"path"===a);if(null==r&&(l.search=e.search,l.hash=e.hash),(null==r||""===r||"."===r)&&o){let e=ab(l.search);if(o.route.index&&!e)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&e){let e=new URLSearchParams(l.search),t=e.getAll("index");e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();l.search=n?"?".concat(n):""}}return"/"!==n&&(l.pathname=function(e){let{basename:t,pathname:n}=e;return"/"===n?t:Ly([t,n])}({basename:n,pathname:l.pathname})),ey(l)}function fv(e,t,n){if(!n||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(n))return{path:t};if(n.formMethod&&!rb(n.formMethod))return{path:t,error:Wv(405,{method:n.formMethod})};let r,i,a=()=>({path:t,error:Wv(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),o=Gv(t);if(void 0!==n.body){if("text/plain"===n.formEncType){if(!ib(s))return a();let e="string"===typeof n.body?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,"\n")},""):String(n.body);return{path:t,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===n.formEncType){if(!ib(s))return a();try{let e="string"===typeof n.body?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:e,text:void 0}}}catch(u){return a()}}}if(Jg("function"===typeof FormData,"FormData is not available in this environment"),n.formData)r=Mv(n.formData),i=n.formData;else if(n.body instanceof FormData)r=Mv(n.body),i=n.body;else if(n.body instanceof URLSearchParams)r=n.body,i=Fv(r);else if(null==n.body)r=new URLSearchParams,i=new FormData;else try{r=new URLSearchParams(n.body),i=Fv(r)}catch(u){return a()}let l={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:i,json:void 0,text:void 0};if(ib(l.formMethod))return{path:t,submission:l};let c=ty(t);return e&&c.search&&ab(c.search)&&r.append("index",""),c.search="?".concat(r),{path:ey(c),submission:l}}function mv(e,t,n,r,i,a,s,o,l,c,d,h,f,m,p,g,y,v,b,w,x){var E;let S,k=w?Xv(w[1])?w[1].error:w[1].data:void 0,_=i.createURL(a.location),N=i.createURL(l);if(d&&a.errors){let e=Object.keys(a.errors)[0];S=s.findIndex(t=>t.route.id===e)}else if(w&&Xv(w[1])){let e=w[0];S=s.findIndex(t=>t.route.id===e)-1}let T=w?w[1].statusCode:void 0,C=T&&T>=400,I=u(u({currentUrl:_,currentParams:(null===(E=a.matches[0])||void 0===E?void 0:E.params)||{},nextUrl:N,nextParams:s[0].params},o),{},{actionResult:k,actionStatus:T}),j=zy(s),A=s.map((i,s)=>{let{route:o}=i,l=null;if(null!=S&&s>S?l=!1:o.lazy?l=!0:pv(o)?d?l=gv(o,a.loaderData,a.errors):function(e,t,n){let r=!t||n.route.id!==t.route.id,i=!e.hasOwnProperty(n.route.id);return r||i}(a.loaderData,a.matches[s],i)&&(l=!0):l=!1,null!==l)return Iv(n,r,e,j,i,c,t,l);let f=!1;"boolean"===typeof x?f=x:C?f=!1:(h||_.pathname+_.search===N.pathname+N.search||_.search!==N.search||function(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}(a.matches[s],i))&&(f=!0);let m=u(u({},I),{},{defaultShouldRevalidate:f}),p=yv(i,m);return Iv(n,r,e,j,i,c,t,p,m,x)}),R=[];return p.forEach((e,o)=>{if(d||!s.some(t=>t.route.id===e.routeId)||m.has(o))return;let l=a.fetchers.get(o),p=l&&"idle"!==l.state&&void 0===l.data,w=uy(y,e.path,v);if(!w){if(b&&p)return;return void R.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,request:null,controller:null})}if(g.has(o))return;let E=sb(w,e.path),S=new AbortController,k=Ov(i,e.path,S.signal),_=null;if(f.has(o))f.delete(o),_=jv(n,r,k,w,E,c,t);else if(p)h&&(_=jv(n,r,k,w,E,c,t));else{let e;e="boolean"===typeof x?x:!C&&h;let i=u(u({},I),{},{defaultShouldRevalidate:e});yv(E,i)&&(_=jv(n,r,k,w,E,c,t,i))}_&&R.push({key:o,routeId:e.routeId,path:e.path,matches:_,match:E,request:k,controller:S})}),{dsMatches:A,revalidatingFetchers:R}}function pv(e){return null!=e.loader||null!=e.middleware&&e.middleware.length>0}function gv(e,t,n){if(e.lazy)return!0;if(!pv(e))return!1;let r=null!=t&&e.id in t,i=null!=n&&void 0!==n[e.id];return!(!r&&i)&&("function"===typeof e.loader&&!0===e.loader.hydrate||!r&&!i)}function yv(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function vv(e,t,n,r,i,a){let s;if(e){let t=r[e];Jg(t,"No route found to patch children into: routeId = ".concat(e)),t.children||(t.children=[]),s=t.children}else s=n;let o=[],l=[];if(t.forEach(e=>{let t=s.find(t=>bv(e,t));t?l.push({existingRoute:t,newRoute:e}):o.push(e)}),o.length>0){var c;let t=ly(o,i,[e||"_","patch",String((null===(c=s)||void 0===c?void 0:c.length)||"0")],r);s.push(...t)}if(a&&l.length>0)for(let u=0;u<l.length;u++){let{existingRoute:e,newRoute:t}=l[u],n=e,[r]=ly([t],i,[],{},!0);Object.assign(n,{element:r.element?r.element:n.element,errorElement:r.errorElement?r.errorElement:n.errorElement,hydrateFallbackElement:r.hydrateFallbackElement?r.hydrateFallbackElement:n.hydrateFallbackElement})}}function bv(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every((e,n)=>{var r;return null===(r=t.children)||void 0===r?void 0:r.some(t=>bv(e,t))}))}var wv=new WeakMap,xv=e=>{let{key:t,route:n,manifest:r,mapRouteProperties:i}=e,a=r[n.id];if(Jg(a,"No route found in manifest"),!a.lazy||"object"!==typeof a.lazy)return;let s=a.lazy[t];if(!s)return;let o=wv.get(a);o||(o={},wv.set(a,o));let l=o[t];if(l)return l;let c=(async()=>{let e=function(e){return ay.has(e)}(t),n=void 0!==a[t]&&"hasErrorBoundary"!==t;if(e)$g(!e,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(n)$g(!1,'Route "'.concat(a.id,'" has a static property "').concat(t,'" defined. The lazy property will be ignored.'));else{let e=await s();null!=e&&(Object.assign(a,{[t]:e}),Object.assign(a,i(a)))}"object"===typeof a.lazy&&(a.lazy[t]=void 0,Object.values(a.lazy).every(e=>void 0===e)&&(a.lazy=void 0))})();return o[t]=c,c},Ev=new WeakMap;async function Sv(e){let t=e.matches.filter(e=>e.shouldLoad),n={};return(await Promise.all(t.map(e=>e.resolve()))).forEach((e,r)=>{n[t[r].route.id]=e}),n}async function kv(e){return e.matches.some(e=>e.route.middleware)?_v(e,()=>Sv(e)):Sv(e)}function _v(e,t){return Nv(e,t,e=>{if(nb(e))throw e;return e},Yv,function(t,n,r){if(r)return Promise.resolve(Object.assign(r.value,{[n]:{type:"error",result:t}}));{let{matches:r}=e,i=Math.min(Math.max(r.findIndex(e=>e.route.id===n),0),Math.max(r.findIndex(e=>e.shouldCallHandler()),0)),a=qv(r,r[i].route.id).route.id;return Promise.resolve({[a]:{type:"error",result:t}})}})}async function Nv(e,t,n,r,i){let{matches:a,request:s,params:o,context:l,unstable_pattern:c}=e,u=a.flatMap(e=>e.route.middleware?e.route.middleware.map(t=>[e.route.id,t]):[]);return await Tv({request:s,params:o,context:l,unstable_pattern:c},u,t,n,r,i)}async function Tv(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,{request:o}=e;var l;if(o.signal.aborted)throw null!==(l=o.signal.reason)&&void 0!==l?l:new Error("Request aborted: ".concat(o.method," ").concat(o.url));let c=t[s];if(!c){return await n()}let u,[d,h]=c,f=async()=>{if(u)throw new Error("You may only call `next()` once per middleware");try{let o=await Tv(e,t,n,r,i,a,s+1);return u={value:o},u.value}catch(o){return u={value:await a(o,d,u)},u.value}};try{let t=await h(e,f),n=null!=t?r(t):void 0;return i(n)?n:u?null!==n&&void 0!==n?n:u.value:(u={value:await f()},u.value)}catch(m){return await a(m,d,u)}}function Cv(e,t,n,r,i){let a=xv({key:"middleware",route:r.route,manifest:t,mapRouteProperties:e}),s=function(e,t,n,r,i){var a;let s=n[e.id];if(Jg(s,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if("function"===typeof e.lazy){let t=Ev.get(s);if(t)return{lazyRoutePromise:t,lazyHandlerPromise:t};let n=(async()=>{Jg("function"===typeof e.lazy,"No lazy route function found");let t=await e.lazy(),n={};for(let e in t){let r=t[e];if(void 0===r)continue;let i=oy(e),a=void 0!==s[e]&&"hasErrorBoundary"!==e;i?$g(!i,"Route property "+e+" is not a supported property to be returned from a lazy route function. This property will be ignored."):a?$g(!a,'Route "'.concat(s.id,'" has a static property "').concat(e,'" defined but its lazy function is also returning a value for this property. The lazy route property "').concat(e,'" will be ignored.')):n[e]=r}Object.assign(s,n),Object.assign(s,u(u({},r(s)),{},{lazy:void 0}))})();return Ev.set(s,n),n.catch(()=>{}),{lazyRoutePromise:n,lazyHandlerPromise:n}}let o,l=Object.keys(e.lazy),c=[];for(let u of l){if(i&&i.includes(u))continue;let a=xv({key:u,route:e,manifest:n,mapRouteProperties:r});a&&(c.push(a),u===t&&(o=a))}let d=c.length>0?Promise.all(c).then(()=>{}):void 0;return null===d||void 0===d||d.catch(()=>{}),null===(a=o)||void 0===a||a.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:o}}(r.route,ib(n.method)?"action":"loader",t,e,i);return{middleware:a,route:s.lazyRoutePromise,handler:s.lazyHandlerPromise}}function Iv(e,t,n,r,i,a,s,o){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9?arguments[9]:void 0,d=!1,h=Cv(e,t,n,i,a);return u(u({},i),{},{_lazyPromises:h,shouldLoad:o,shouldRevalidateArgs:l,shouldCallHandler:e=>(d=!0,l?yv(i,"boolean"===typeof c?u(u({},l),{},{defaultShouldRevalidate:c}):"boolean"===typeof e?u(u({},l),{},{defaultShouldRevalidate:e}):l):o),resolve(e){let{lazy:t,loader:a,middleware:l}=i.route,c=d||o||e&&!ib(n.method)&&(t||a),u=l&&l.length>0&&!a&&!t;return!c||!ib(n.method)&&u?Promise.resolve({type:"data",result:void 0}):async function(e){let t,n,{request:r,unstable_pattern:i,match:a,lazyHandlerPromise:s,lazyRoutePromise:o,handlerOverride:l,scopedContext:c}=e,u=ib(r.method),d=u?"action":"loader",h=e=>{let t,s=new Promise((e,n)=>t=n);n=()=>t(),r.signal.addEventListener("abort",n);let o=t=>"function"!==typeof e?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'.concat(d,'" [routeId: ').concat(a.route.id,"]"))):e({request:r,unstable_pattern:i,params:a.params,context:c},...void 0!==t?[t]:[]),u=(async()=>{try{return{type:"data",result:await(l?l(e=>o(e)):o())}}catch(e){return{type:"error",result:e}}})();return Promise.race([u,s])};try{let e=u?a.route.action:a.route.loader;if(s||o)if(e){let n,[r]=await Promise.all([h(e).catch(e=>{n=e}),s,o]);if(void 0!==n)throw n;t=r}else{await s;let e=u?a.route.action:a.route.loader;if(!e){if("action"===d){let e=new URL(r.url),t=e.pathname+e.search;throw Wv(405,{method:r.method,pathname:t,routeId:a.route.id})}return{type:"data",result:void 0}}[t]=await Promise.all([h(e),o])}else{if(!e){let e=new URL(r.url);throw Wv(404,{pathname:e.pathname+e.search})}t=await h(e)}}catch(f){return{type:"error",result:f}}finally{n&&r.signal.removeEventListener("abort",n)}return t}({request:n,unstable_pattern:r,match:i,lazyHandlerPromise:null===h||void 0===h?void 0:h.handler,lazyRoutePromise:null===h||void 0===h?void 0:h.route,handlerOverride:e,scopedContext:s})}})}function jv(e,t,n,r,i,a,s){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return r.map(l=>l.route.id!==i.route.id?u(u({},l),{},{shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:Cv(e,t,n,l,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}):Iv(e,t,n,zy(r),l,a,s,!0,o))}async function Av(e,t,n,r,i,a){n.some(e=>{var t;return null===(t=e._lazyPromises)||void 0===t?void 0:t.middleware})&&await Promise.all(n.map(e=>{var t;return null===(t=e._lazyPromises)||void 0===t?void 0:t.middleware}));let s={request:t,unstable_pattern:zy(n),params:n[0].params,context:i,matches:n},o=a?()=>{throw new Error("You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`")}:e=>{let t=s;return _v(t,()=>e(u(u({},t),{},{fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}})))},l=await e(u(u({},s),{},{fetcherKey:r,runClientMiddleware:o}));try{await Promise.all(n.flatMap(e=>{var t,n;return[null===(t=e._lazyPromises)||void 0===t?void 0:t.handler,null===(n=e._lazyPromises)||void 0===n?void 0:n.route]}))}catch(c){}return l}async function Rv(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?null==e.body?null:e.json():e.text()}async function Pv(e){let{result:t,type:n}=e;if(tb(t)){let e;try{e=await Rv(t)}catch(l){return{type:"error",error:l}}return"error"===n?{type:"error",error:new Uy(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:"data",data:e,statusCode:t.status,headers:t.headers}}var r,i,a,s,o;return"error"===n?eb(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:null===(i=t.init)||void 0===i?void 0:i.status,headers:null!==(a=t.init)&&void 0!==a&&a.headers?new Headers(t.init.headers):void 0}:{type:"error",error:Qv(t),statusCode:Vy(t)?t.status:void 0,headers:null!==(r=t.init)&&void 0!==r&&r.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Vy(t)?t.status:void 0}:eb(t)?{type:"data",data:t.data,statusCode:null===(s=t.init)||void 0===s?void 0:s.status,headers:null!==(o=t.init)&&void 0!==o&&o.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Dv(e,t,n,r,i){let a=e.headers.get("Location");if(Jg(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Iy(a)){let s=r.slice(0,r.findIndex(e=>e.route.id===n)+1);a=hv(new URL(t.url),s,i,a),e.headers.set("Location",a)}return e}function Lv(e,t,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Iy(e)){let r=e,a=r.startsWith("//")?new URL(t.protocol+r):new URL(r);if(i.includes(a.protocol))throw new Error("Invalid redirect location");let s=null!=Ty(a.pathname,n);if(a.origin===t.origin&&s)return a.pathname+a.search+a.hash}try{let t=r.createURL(e);if(i.includes(t.protocol))throw new Error("Invalid redirect location")}catch(a){}return e}function Ov(e,t,n,r){let i=e.createURL(Gv(t)).toString(),a={signal:n};if(r&&ib(r.formMethod)){let{formMethod:e,formEncType:t}=r;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(r.json)):"text/plain"===t?a.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?a.body=Mv(r.formData):a.body=r.formData}return new Request(i,a)}function Mv(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function Fv(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Uv(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={},o=null,l=!1,c={},u=n&&Xv(n[1])?n[1].error:void 0;return e.forEach(n=>{if(!(n.route.id in t))return;let d=n.route.id,h=t[d];if(Jg(!Zv(h),"Cannot handle redirect results in processLoaderData"),Xv(h)){let t=h.error;if(void 0!==u&&(t=u,u=void 0),o=o||{},a)o[d]=t;else{let n=qv(e,d);null==o[n.route.id]&&(o[n.route.id]=t)}i||(s[d]=uv),l||(l=!0,r=Vy(h.error)?h.error.status:500),h.headers&&(c[d]=h.headers)}else s[d]=h.data,h.statusCode&&200!==h.statusCode&&!l&&(r=h.statusCode),h.headers&&(c[d]=h.headers)}),void 0!==u&&n&&(o={[n[0]]:u},n[2]&&(s[n[2]]=void 0)),{loaderData:s,errors:o,statusCode:r||200,loaderHeaders:c}}function Vv(e,t,n,r,i,a){let{loaderData:s,errors:o}=Uv(t,n,r);return i.filter(e=>!e.matches||e.matches.some(e=>e.shouldLoad)).forEach(t=>{let{key:n,match:r,controller:i}=t;if(i&&i.signal.aborted)return;let s=a[n];if(Jg(s,"Did not find corresponding fetcher result"),Xv(s)){let t=qv(e.matches,null===r||void 0===r?void 0:r.route.id);o&&o[t.route.id]||(o=u(u({},o),{},{[t.route.id]:s.error})),e.fetchers.delete(n)}else if(Zv(s))Jg(!1,"Unhandled fetcher revalidation redirect");else{let t=ub(s.data);e.fetchers.set(n,t)}}),{loaderData:s,errors:o}}function zv(e,t,n,r){let i=Object.entries(t).filter(e=>{let[,t]=e;return t!==uv}).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{});for(let a of n){let n=a.route.id;if(!t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&a.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function Bv(e){return e?Xv(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function qv(e,t){return(t?e.slice(0,e.findIndex(e=>e.route.id===t)+1):[...e]).reverse().find(e=>!0===e.route.hasErrorBoundary)||e[0]}function Hv(e){let t=1===e.length?e[0]:e.find(e=>e.index||!e.path||"/"===e.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Wv(e){let{pathname:t,routeId:n,method:r,type:i,message:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="Unknown Server Error",o="Unknown @remix-run/router error";return 400===e?(s="Bad Request",r&&t&&n?o="You made a ".concat(r,' request to "').concat(t,'" but did not provide a `loader` for route "').concat(n,'", so there is no way to handle the request.'):"invalid-body"===i&&(o="Unable to encode submission body")):403===e?(s="Forbidden",o='Route "'.concat(n,'" does not match URL "').concat(t,'"')):404===e?(s="Not Found",o='No route matches URL "'.concat(t,'"')):405===e&&(s="Method Not Allowed",r&&t&&n?o="You made a ".concat(r.toUpperCase(),' request to "').concat(t,'" but did not provide an `action` for route "').concat(n,'", so there is no way to handle the request.'):r&&(o='Invalid request method "'.concat(r.toUpperCase(),'"'))),new Uy(e||500,s,new Error(o),!0)}function Kv(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[e,r]=t[n];if(Zv(r))return{key:e,result:r}}}function Gv(e){return ey(u(u({},"string"===typeof e?ty(e):e),{},{hash:""}))}function Qv(e){var t,n,r,i;return new Uy(null!==(t=null===(n=e.init)||void 0===n?void 0:n.status)&&void 0!==t?t:500,null!==(r=null===(i=e.init)||void 0===i?void 0:i.statusText)&&void 0!==r?r:"Internal Server Error",e.data)}function Yv(e){return null!=e&&"object"===typeof e&&Object.entries(e).every(e=>{let[t,n]=e;return"string"===typeof t&&Jv(n)})}function Jv(e){return null!=e&&"object"===typeof e&&"type"in e&&"result"in e&&("data"===e.type||"error"===e.type)}function $v(e){return tb(e.result)&&rv.has(e.result.status)}function Xv(e){return"error"===e.type}function Zv(e){return"redirect"===(e&&e.type)}function eb(e){return"object"===typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function tb(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function nb(e){return tb(e)&&(t=e.status,rv.has(t))&&e.headers.has("Location");var t}function rb(e){return nv.has(e.toUpperCase())}function ib(e){return ev.has(e.toUpperCase())}function ab(e){return new URLSearchParams(e).getAll("index").some(e=>""===e)}function sb(e,t){let n="string"===typeof t?ty(t).search:t.search;if(e[e.length-1].route.index&&ab(n||""))return e[e.length-1];let r=Ry(e);return r[r.length-1]}function ob(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:a,json:s}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function lb(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function cb(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ub(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function db(){let e,t,n=new Promise((r,i)=>{e=async e=>{r(e);try{await n}catch(t){}},t=async e=>{i(e);try{await n}catch(t){}}});return{promise:n,resolve:e,reject:t}}var hb=r.createContext(null);hb.displayName="DataRouter";var fb=r.createContext(null);fb.displayName="DataRouterState";var mb=r.createContext(!1);function pb(){return r.useContext(mb)}var gb=r.createContext({isTransitioning:!1});gb.displayName="ViewTransition";var yb=r.createContext(new Map);yb.displayName="Fetchers";var vb=r.createContext(null);vb.displayName="Await";var bb=r.createContext(null);bb.displayName="Navigation";var wb=r.createContext(null);wb.displayName="Location";var xb=r.createContext({outlet:null,matches:[],isDataRoute:!1});xb.displayName="Route";var Eb=r.createContext(null);Eb.displayName="RouteError";var Sb="REACT_ROUTER_ERROR";function kb(){return null!=r.useContext(wb)}function _b(){return Jg(kb(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(wb).location}var Nb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tb(e){r.useContext(bb).static||r.useLayoutEffect(e)}function Cb(){let{isDataRoute:e}=r.useContext(xb);return e?function(){let{router:e}=Vb("useNavigate"),t=Bb("useNavigate"),n=r.useRef(!1);Tb(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$g(n.current,Nb),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,u({fromRouteId:t},i)))},[e,t]);return i}():function(){Jg(kb(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(hb),{basename:t,navigator:n}=r.useContext(bb),{matches:i}=r.useContext(xb),{pathname:a}=_b(),s=JSON.stringify(Py(i)),o=r.useRef(!1);Tb(()=>{o.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if($g(o.current,Nb),!o.current)return;if("number"===typeof r)return void n.go(r);let l=Dy(r,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ly([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,s,a,e]);return l}()}r.createContext(null);function Ib(){let{matches:e}=r.useContext(xb),t=e[e.length-1];return t?t.params:{}}function jb(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(xb),{pathname:i}=_b(),a=JSON.stringify(Py(n));return r.useMemo(()=>Dy(e,JSON.parse(a),i,"path"===t),[e,a,i,t])}function Ab(e,t,n,i,a){Jg(kb(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(bb),{matches:o}=r.useContext(xb),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Wb(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,p=_b();if(t){var g;let e="string"===typeof t?ty(t):t;Jg("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=p;let y=m.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=uy(e,{pathname:v});$g(f||null!=b,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),$g(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=Fb(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ly([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Ly([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,i,a);return t&&w?r.createElement(wb.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},w):w}function Rb(){let e=qb(),t=Vy(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:s},"ErrorBoundary")," or"," ",r.createElement("code",{style:s},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,o)}var Pb=r.createElement(Rb,null),Db=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(Sb,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new Uy(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?r.createElement(xb.Provider,{value:this.props.routeContext},r.createElement(Eb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?r.createElement(Ob,{error:e},t):t}};Db.contextType=mb;var Lb=new WeakMap;function Ob(e){let{children:t,error:n}=e,{basename:i}=r.useContext(bb);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(Sb,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Lb.get(n);if(t)throw t;let a=qy(e.location,i);if(By&&!Lb.get(n)){if(!a.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:e.replace}));throw Lb.set(n,t),t}window.location.href=a.absoluteURL||a.to}return r.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return t}function Mb(e){let{routeContext:t,match:n,children:i}=e,a=r.useContext(hb);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(xb.Provider,{value:t},i)}function Fb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=a.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));Jg(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(n)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=n&&i?(e,t)=>{var r,a;i(e,{location:n.location,params:null!==(r=null===(a=n.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==r?r:{},unstable_pattern:zy(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,i,u)=>{let d,h=!1,f=null,m=null;n&&(d=s&&i.route.id?s[i.route.id]:void 0,f=i.route.errorElement||Pb,o&&(l<0&&0===u?(Wb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=i.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,u+1)),g=()=>{let t;return t=d?f:h?m:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Mb,{match:i,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(Db,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},onError:c}):g()},null)}function Ub(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Vb(e){let t=r.useContext(hb);return Jg(t,Ub(e)),t}function zb(e){let t=r.useContext(fb);return Jg(t,Ub(e)),t}function Bb(e){let t=function(e){let t=r.useContext(xb);return Jg(t,Ub(e)),t}(e),n=t.matches[t.matches.length-1];return Jg(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function qb(){var e;let t=r.useContext(Eb),n=zb("useRouteError"),i=Bb("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Hb={};function Wb(e,t,n){t||Hb[e]||(Hb[e]=!0,$g(!1,n))}var Kb={};function Gb(e,t){e||Kb[t]||(Kb[t]=!0,console.warn(t))}var Qb=i.useOptimistic,Yb=()=>{};function Jb(e){let t={hasErrorBoundary:e.hasErrorBoundary||null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&(e.element&&$g(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:r.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&$g(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:r.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&$g(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:r.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var $b=["HydrateFallback","hydrateFallbackElement"];var Xb=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}})}};function Zb(e){let{router:t,flushSync:n,onError:i,unstable_useTransitions:a}=e,s=pb();a=s||a;let[o,l]=r.useState(t.state),[c,u]=(d=o,Qb?Qb(d):[d,Yb]);var d;let[h,f]=r.useState(),[m,p]=r.useState({isTransitioning:!1}),[g,y]=r.useState(),[v,b]=r.useState(),[w,x]=r.useState(),E=r.useRef(new Map),S=r.useCallback((e,s)=>{let{deletedFetchers:o,newErrors:c,flushSync:d,viewTransitionOpts:h}=s;c&&i&&Object.values(c).forEach(t=>{var n,r;return i(t,{location:e.location,params:null!==(n=null===(r=e.matches[0])||void 0===r?void 0:r.params)&&void 0!==n?n:{},unstable_pattern:zy(e.matches)})}),e.fetchers.forEach((e,t)=>{void 0!==e.data&&E.current.set(t,e.data)}),o.forEach(e=>E.current.delete(e)),Gb(!1===d||null!=n,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let m=null!=t.window&&null!=t.window.document&&"function"===typeof t.window.document.startViewTransition;if(Gb(null==h||m,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),h&&m){if(n&&d){n(()=>{v&&(null===g||void 0===g||g.resolve(),v.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:h.currentLocation,nextLocation:h.nextLocation})});let r=t.window.document.startViewTransition(()=>{n(()=>l(e))});return r.finished.finally(()=>{n(()=>{y(void 0),b(void 0),f(void 0),p({isTransitioning:!1})})}),void n(()=>b(r))}v?(null===g||void 0===g||g.resolve(),v.skipTransition(),x({state:e,currentLocation:h.currentLocation,nextLocation:h.nextLocation})):(f(e),p({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}))}else n&&d?n(()=>l(e)):!1===a?l(e):r.startTransition(()=>{!0===a&&u(t=>ew(t,e)),l(e)})},[t.window,n,v,g,a,u,i]);r.useLayoutEffect(()=>t.subscribe(S),[t,S]),r.useEffect(()=>{m.isTransitioning&&!m.flushSync&&y(new Xb)},[m]),r.useEffect(()=>{if(g&&h&&t.window){let e=h,n=g.promise,i=t.window.document.startViewTransition(async()=>{!1===a?l(e):r.startTransition(()=>{!0===a&&u(t=>ew(t,e)),l(e)}),await n});i.finished.finally(()=>{y(void 0),b(void 0),f(void 0),p({isTransitioning:!1})}),b(i)}},[h,g,t.window,a,u]),r.useEffect(()=>{g&&h&&c.location.key===h.location.key&&g.resolve()},[g,v,c.location,h]),r.useEffect(()=>{!m.isTransitioning&&w&&(f(w.state),p({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),x(void 0))},[m.isTransitioning,w]);let k=r.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:e=>t.navigate(e),push:(e,n,r)=>t.navigate(e,{state:n,preventScrollReset:null===r||void 0===r?void 0:r.preventScrollReset}),replace:(e,n,r)=>t.navigate(e,{replace:!0,state:n,preventScrollReset:null===r||void 0===r?void 0:r.preventScrollReset})}),[t]),_=t.basename||"/",N=r.useMemo(()=>({router:t,navigator:k,static:!1,basename:_,onError:i}),[t,k,_,i]);return r.createElement(r.Fragment,null,r.createElement(hb.Provider,{value:N},r.createElement(fb.Provider,{value:c},r.createElement(yb.Provider,{value:E.current},r.createElement(gb.Provider,{value:m},r.createElement(rw,{basename:_,location:c.location,navigationType:c.historyAction,navigator:k,unstable_useTransitions:a},r.createElement(tw,{routes:t.routes,future:t.future,state:c,onError:i})))))),null)}function ew(e,t){return u(u({},e),{},{navigation:"idle"!==t.navigation.state?t.navigation:e.navigation,revalidation:"idle"!==t.revalidation?t.revalidation:e.revalidation,actionData:"submitting"!==t.navigation.state?t.actionData:e.actionData,fetchers:t.fetchers})}var tw=r.memo(function(e){let{routes:t,future:n,state:r,onError:i}=e;return Ab(t,void 0,r,i,n)});function nw(e){let{to:t,replace:n,state:i,relative:a}=e;Jg(kb(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=r.useContext(bb);$g(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(xb),{pathname:l}=_b(),c=Cb(),u=Dy(t,Py(o),l,"path"===a),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:i,relative:a})},[c,d,a,n,i]),null}function rw(e){let{basename:t="/",children:n=null,location:i,navigationType:a="POP",navigator:s,static:o=!1,unstable_useTransitions:l}=e;Jg(!kb(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[c,s,o,l]);"string"===typeof i&&(i=ty(i));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=i,g=r.useMemo(()=>{let e=Ty(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:m,key:p},navigationType:a}},[c,d,h,f,m,p,a]);return $g(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(bb.Provider,{value:u},r.createElement(wb.Provider,{children:n,value:g}))}r.Component;var iw="get",aw="application/x-www-form-urlencoded";function sw(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var ow=null;var lw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cw(e){return null==e||lw.has(e)?e:($g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(aw,'"')),null)}function uw(e,t){let n,r,i,a,s;if(sw(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?Ty(s,t):null,n=e.getAttribute("method")||iw,i=cw(e.getAttribute("enctype"))||aw,a=new FormData(e)}else if(function(e){return sw(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return sw(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?Ty(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||iw,i=cw(e.getAttribute("formenctype"))||cw(s.getAttribute("enctype"))||aw,a=new FormData(s,e),!function(){if(null===ow)try{new FormData(document.createElement("form"),0),ow=!1}catch(e){ow=!0}return ow}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,r)}}else{if(sw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=iw,r=null,i=aw,s=e}var o;return a&&"text/plain"===i&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function dw(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function hw(e,t,n,r){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname="".concat(i.pathname,"_.").concat(r):i.pathname="".concat(i.pathname,".").concat(r):"/"===i.pathname?i.pathname="_root.".concat(r):t&&"/"===Ty(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(r),i}async function fw(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mw(e){return null!=e&&"string"===typeof e.page}function pw(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function gw(e,t,n,r,i,a){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function yw(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function vw(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!mw(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function bw(e,t){return"lazy"===e.mode&&!0===t}function ww(){let e=r.useContext(hb);return dw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xw(){let e=r.useContext(fb);return dw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ew=r.createContext(void 0);function Sw(){let e=r.useContext(Ew);return dw(e,"You must render this element inside a <HydratedRouter> element"),e}function kw(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function _w(e,t,n){if(n&&!Iw)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ew.displayName="FrameworkContext";function Nw(e){let{page:t}=e,n=vt(e,Vg),{router:i}=ww(),a=r.useMemo(()=>uy(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?r.createElement(Cw,u({page:t,matches:a},n)):null}function Tw(e){let{manifest:t,routeModules:n}=Sw(),[i,a]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return vw((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await fw(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(pw).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,n]),i}function Cw(e){let{page:t,matches:n}=e,i=vt(e,zg),a=_b(),{future:s,manifest:o,routeModules:l}=Sw(),{basename:c}=ww(),{loaderData:d,matches:h}=xw(),f=r.useMemo(()=>gw(t,n,h,o,a,"data"),[t,n,h,o,a]),m=r.useMemo(()=>gw(t,n,h,o,a,"assets"),[t,n,h,o,a]),p=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=o.routes[t.route.id];i&&i.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=hw(t,c,s.unstable_trailingSlashAwareDataRequests,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[c,s.unstable_trailingSlashAwareDataRequests,d,a,o,f,n,t,l]),g=r.useMemo(()=>yw(m,o),[m,o]),y=Tw(m);return r.createElement(r.Fragment,null,p.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},i))),g.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},i))),y.map(e=>{var t;let{key:n,link:a}=e;return r.createElement("link",u(u({key:n,nonce:i.nonce},a),{},{crossOrigin:null!==(t=a.crossOrigin)&&void 0!==t?t:i.crossOrigin}))}))}var Iw=!1;function jw(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:a,routeDiscovery:s,ssr:o}=Sw(),{router:l,static:c,staticContext:d}=ww(),{matches:h}=xw(),f=pb(),m=bw(s,o);a&&(a.didRenderScripts=!0);let p=_w(h,null,i);r.useEffect(()=>{Iw=!0},[]);let g=r.useMemo(()=>{var i;if(f)return null;let a=d?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=c?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(p.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];dw(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...a?[{module:a,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=vt(e,Ug),i=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(a.pop();a.length>0;)s.push("/".concat(a.join("/"))),a.pop();s.forEach(e=>{let n=uy(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let o=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return u(u({},r),{},{routes:o,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(p.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),y=Iw||f?[]:(v=t.entry.imports.concat(yw(p,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let b="object"===typeof t.sri?t.sri:{};return Gb(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Iw||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",u(u({},e),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}})):null,m?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:b[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:b[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:b[t],suppressHydrationWarning:!0})),g)}function Aw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function Rw(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,a=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Vy(t))return r.createElement(Pw,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),a);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(Pw,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),a)}function Pw(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:a,children:s}=e,{routeModules:o}=Sw();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!a?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,i?r.createElement(jw,null):null)))}var Dw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Dw&&(window.__reactRouterVersion="7.13.0")}catch(Zx){}function Lw(){var e;let t=null===(e=window)||void 0===e?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=u(u({},t),{},{errors:Ow(t.errors)})),t}function Ow(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new Uy(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(Zx){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}var Mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fw=r.forwardRef(function(e,t){let{onClick:n,discover:i="render",prefetch:a="none",relative:s,reloadDocument:o,replace:l,state:c,target:d,to:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:p}=e,g=vt(e,Bg),{basename:y,unstable_useTransitions:v}=r.useContext(bb),b="string"===typeof h&&Mw.test(h),w=qy(h,y);h=w.to;let x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jg(kb(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(bb),{hash:a,pathname:s,search:o}=jb(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:Ly([n,s])),i.createHref({pathname:l,search:o,hash:a})}(h,{relative:s}),[E,S,k]=function(e,t){let n=r.useContext(Ew),[i,a]=r.useState(!1),[s,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let m=()=>{a(!0)},p=()=>{a(!1),o(!1)};return n?"intent"!==e?[s,f,{}]:[s,f,{onFocus:kw(l,m),onBlur:kw(c,p),onMouseEnter:kw(u,m),onMouseLeave:kw(d,p),onTouchStart:kw(h,m)}]:[!1,f,{}]}(a,g),_=function(e){let{target:t,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Cb(),d=_b(),h=jb(e,{relative:s});return r.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,t)){f.preventDefault();let t=void 0!==n?n:ey(d)===ey(h),m=()=>u(e,{replace:t,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l});c?r.startTransition(()=>m()):m()}},[d,u,h,n,i,t,e,a,s,o,l,c])}(h,{replace:l,state:c,target:d,preventScrollReset:f,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});let N=r.createElement("a",u(u(u({},g),k),{},{href:w.absoluteURL||x,onClick:w.isExternal||o?n:function(e){n&&n(e),e.defaultPrevented||_(e)},ref:Aw(t,S),target:d,"data-discover":b||"render"!==i?void 0:"true"}));return E&&!b?r.createElement(r.Fragment,null,N,r.createElement(Nw,{page:x})):N});Fw.displayName="Link";var Uw=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:c,children:d}=e,h=vt(e,qg),f=jb(l,{relative:h.relative}),m=_b(),p=r.useContext(fb),{navigator:g,basename:y}=r.useContext(bb),v=null!=p&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(gb);Jg(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Bw("useViewTransitionState"),a=jb(e,{relative:t});if(!n.isTransitioning)return!1;let s=Ty(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ty(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=ky(a.pathname,o)||null!=ky(a.pathname,s)}(f)&&!0===c,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=m.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=Ty(x,y)||x);const E="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,k=w===b||!s&&w.startsWith(b)&&"/"===w.charAt(E),_=null!=x&&(x===b||!s&&x.startsWith(b)&&"/"===x.charAt(b.length)),N={isActive:k,isPending:_,isTransitioning:v},T=k?n:void 0;S="function"===typeof a?a(N):[a,k?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof o?o(N):o;return r.createElement(Fw,u(u({},h),{},{"aria-current":T,className:S,ref:t,style:C,to:l,viewTransition:c}),"function"===typeof d?d(N):d)});Uw.displayName="NavLink";var Vw=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:a,reloadDocument:s,replace:o,state:l,method:c=iw,action:d,onSubmit:h,relative:f,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g}=e,y=vt(e,Hg),{unstable_useTransitions:v}=r.useContext(bb),b=Ww(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(bb),i=r.useContext(xb);Jg(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s=u({},jb(e||".",{relative:t})),o=_b();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:Ly([n,s.pathname]));return ey(s)}(d,{relative:f}),x="get"===c.toLowerCase()?"get":"post",E="string"===typeof d&&Mw.test(d);return r.createElement("form",u(u({ref:t,method:x,action:w,onSubmit:s?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c,s=()=>b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:a,replace:o,state:l,relative:f,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g});v&&!1!==a?r.startTransition(()=>s()):s()}},y),{},{"data-discover":E||"render"!==n?void 0:"true"}))});function zw(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Bw(e){let t=r.useContext(hb);return Jg(t,zw(e)),t}Vw.displayName="Form";var qw=0,Hw=()=>"__".concat(String(++qw),"__");function Ww(){let{router:e}=Bw("useSubmit"),{basename:t}=r.useContext(bb),n=Bb("useRouteId"),i=e.fetch,a=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:l,formData:c,body:u}=uw(e,t);if(!1===r.navigate){let e=r.fetcherKey||Hw();await i(e,n,r.action||s,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await a(r.action||s,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,a,t,n])}var Kw=n(950);function Gw(e){return r.createElement(Zb,u({flushSync:Kw.flushSync},e))}const Qw="properties",Yw="leads",Jw="messages",$w="leases",Xw="maintenance",Zw="invoices",ex="payments",tx="notifications",nx="userPreferences",rx=e=>"".concat(Yw,"/").concat(e,"/").concat(Jw);const ix=new class{async createNotification(e){try{this.validateNotificationData(e);const t=Qf(Gf(jg,tx)),n={userId:e.userId,type:e.type,title:e.title,message:e.message,link:e.link,priority:e.priority,read:!1,createdAt:jm()};await ip(t,n);return u(u({id:t.id},n),{},{createdAt:n.createdAt})}catch(t){throw console.error("Error creating notification:",t),new Error("Failed to create notification: ".concat(t.message))}}async getUserNotifications(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let n;n=t?Um(Gf(jg,tx),zm("userId","==",e),zm("read","==",!1),Hm("createdAt","desc")):Um(Gf(jg,tx),zm("userId","==",e),Hm("createdAt","desc"));return(await rp(n)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(n){throw console.error("Error fetching user notifications:",n),new Error("Failed to fetch user notifications: ".concat(n.message))}}async markAsRead(e){try{const t=Qf(jg,tx,e);if(!(await np(t)).exists())throw new Error("Notification not found");await ap(t,{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),new Error("Failed to mark notification as read: ".concat(t.message))}}async markAllAsRead(e){try{const t=(await this.getUserNotifications(e,!0)).map(e=>this.markAsRead(e.id));await Promise.all(t)}catch(t){throw console.error("Error marking all notifications as read:",t),new Error("Failed to mark all notifications as read: ".concat(t.message))}}async getUnreadCount(e){try{return(await this.getUserNotifications(e,!0)).length}catch(t){throw console.error("Error getting unread notification count:",t),new Error("Failed to get unread notification count: ".concat(t.message))}}async updatePreferences(e,t){try{this.validatePreferences(t);const n=Qf(jg,nx,e);if((await np(n)).exists())await ap(n,{notifications:t,updatedAt:jm()});else{const r={userId:e,notifications:t,updatedAt:jm()};await ip(n,r)}const r=await np(n),i=r.data();return u({id:r.id},i)}catch(n){throw console.error("Error updating notification preferences:",n),new Error("Failed to update notification preferences: ".concat(n.message))}}async getPreferences(e){try{const t=Qf(jg,nx,e),n=await np(t);if(!n.exists())return this.getDefaultPreferences(e);const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching notification preferences:",t),new Error("Failed to fetch notification preferences: ".concat(t.message))}}async deleteNotification(e){try{const t=Qf(jg,tx,e);if(!(await np(t)).exists())throw new Error("Notification not found");await ap(t,{read:!0})}catch(t){throw console.error("Error deleting notification:",t),new Error("Failed to delete notification: ".concat(t.message))}}getDefaultPreferences(e){return{id:e,userId:e,notifications:{email:!0,sms:!1,inApp:!0,types:{new_lead:!0,new_message:!0,maintenance_request:!0,lease_expiring:!0,payment_due:!0,payment_received:!0,listing_approved:!0}},updatedAt:is.now()}}validateNotificationData(e){if(!e.userId||0===e.userId.trim().length)throw new Error("User ID is required");if(!e.type)throw new Error("Notification type is required");if(!e.title||0===e.title.trim().length)throw new Error("Notification title is required");if(e.title.length>100)throw new Error("Notification title must be 100 characters or less");if(!e.message||0===e.message.trim().length)throw new Error("Notification message is required");if(e.message.length>500)throw new Error("Notification message must be 500 characters or less");if(!e.priority)throw new Error("Notification priority is required")}validatePreferences(e){if("boolean"!==typeof e.email)throw new Error("Email preference must be a boolean");if("boolean"!==typeof e.sms)throw new Error("SMS preference must be a boolean");if("boolean"!==typeof e.inApp)throw new Error("In-app preference must be a boolean");if(!e.types||"object"!==typeof e.types)throw new Error("Notification types must be an object")}},ax=()=>{const{currentUser:e}=Mg(),[t,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(0),[l,c]=(0,r.useState)(!0),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{if(!e)return a([]),o(0),void c(!1);const t=sp(Um(Gf(jg,"notifications"),zm("userId","==",e.uid),Hm("createdAt","desc")),e=>{const t=[];let n=0;e.forEach(e=>{const r=e.data(),i=u({id:e.id},r);t.push(i),i.read||n++}),a(t.slice(0,10)),o(n),c(!1)});return()=>t()},[e]);const h=e=>{switch(e){case"new_lead":return(0,Rg.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});case"new_message":return(0,Rg.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})});case"maintenance_request":return(0,Rg.jsxs)("svg",{className:"h-5 w-5 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});case"lease_expiring":return(0,Rg.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"payment_due":case"payment_received":return(0,Rg.jsx)("svg",{className:"h-5 w-5 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return(0,Rg.jsx)("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}},f=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):i<24?"".concat(i,"h ago"):a<7?"".concat(a,"d ago"):t.toLocaleDateString()};return e?(0,Rg.jsxs)("div",{className:"relative",ref:d,children:[(0,Rg.jsxs)("button",{onClick:()=>n(!t),className:"relative p-2 text-gray-700 hover:text-indigo-600 focus:outline-none",children:[(0,Rg.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s>0&&(0,Rg.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:s>99?"99+":s})]}),t&&(0,Rg.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[(0,Rg.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),s>0&&(0,Rg.jsx)("button",{onClick:async()=>{if(e)try{await ix.markAllAsRead(e.uid)}catch(t){console.error("Error marking all notifications as read:",t)}},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Mark all as read"})]}),(0,Rg.jsx)("div",{className:"max-h-96 overflow-y-auto",children:l?(0,Rg.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:(0,Rg.jsxs)("svg",{className:"animate-spin h-8 w-8 mx-auto text-indigo-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Rg.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Rg.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):0===i.length?(0,Rg.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500",children:[(0,Rg.jsx)("svg",{className:"h-12 w-12 mx-auto text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,Rg.jsx)("p",{children:"No notifications yet"})]}):i.map(e=>(0,Rg.jsx)("div",{className:"px-4 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ".concat(e.read?"":"bg-blue-50"),onClick:()=>{e.read||(async e=>{try{await ix.markAsRead(e)}catch(t){console.error("Error marking notification as read:",t)}})(e.id),e.link&&n(!1)},children:e.link?(0,Rg.jsx)(Fw,{to:e.link,className:"block",children:(0,Rg.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0 mt-1",children:h(e.type)}),(0,Rg.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,Rg.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:f(e.createdAt)})]}),!e.read&&(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-600"})})]})}):(0,Rg.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0 mt-1",children:h(e.type)}),(0,Rg.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,Rg.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:f(e.createdAt)})]}),!e.read&&(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-600"})})]})},e.id))}),i.length>0&&(0,Rg.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 text-center",children:(0,Rg.jsx)(Fw,{to:"/notifications",className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",onClick:()=>n(!1),children:"View all notifications"})})]})]}):null},sx=e=>{let{children:t}=e;const{currentUser:n,userProfile:i,logout:a}=Mg(),s=Cb(),[o,l]=(0,r.useState)(!1),c=async()=>{try{await a(),s("/")}catch(e){console.error("Logout failed:",e)}};return(0,Rg.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rg.jsxs)("nav",{className:"bg-white shadow-lg",children:[(0,Rg.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rg.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)(Fw,{to:"/",className:"flex items-center",children:(0,Rg.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-8 w-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"IKHAYA"})]})}),(0,Rg.jsxs)("div",{className:"hidden md:ml-10 md:flex md:space-x-8",children:[(0,Rg.jsx)(Fw,{to:"/search",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Search Properties"}),n&&"landlord"===(null===i||void 0===i?void 0:i.role)&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/properties/manage",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"My Properties"}),(0,Rg.jsx)(Fw,{to:"/leads",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Leads"})]}),n&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/leases",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Leases"}),(0,Rg.jsx)(Fw,{to:"/maintenance",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Maintenance"})]})]})]}),(0,Rg.jsx)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:n?(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(ax,{}),(0,Rg.jsx)(Fw,{to:"/dashboard",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Dashboard"}),(0,Rg.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rg.jsx)("span",{className:"text-sm text-gray-700",children:null===i||void 0===i?void 0:i.email}),(0,Rg.jsx)("button",{onClick:c,className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:"Logout"})]})]}):(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/login",className:"text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",children:"Login"}),(0,Rg.jsx)(Fw,{to:"/register",className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:"Sign Up"})]})}),(0,Rg.jsx)("div",{className:"flex items-center md:hidden",children:(0,Rg.jsx)("button",{onClick:()=>l(!o),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-indigo-600 hover:bg-gray-100",children:(0,Rg.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o?(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),o&&(0,Rg.jsx)("div",{className:"md:hidden",children:(0,Rg.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,Rg.jsx)(Fw,{to:"/search",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Search Properties"}),n&&"landlord"===(null===i||void 0===i?void 0:i.role)&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/properties/manage",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"My Properties"}),(0,Rg.jsx)(Fw,{to:"/leads",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Leads"})]}),n&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/leases",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Leases"}),(0,Rg.jsx)(Fw,{to:"/maintenance",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Maintenance"}),(0,Rg.jsx)(Fw,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Dashboard"})]}),n?(0,Rg.jsx)("button",{onClick:c,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Logout"}):(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)(Fw,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Login"}),(0,Rg.jsx)(Fw,{to:"/register",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-indigo-600 hover:bg-gray-50",children:"Sign Up"})]})]})})]}),(0,Rg.jsx)("main",{children:t}),(0,Rg.jsx)("footer",{className:"bg-gray-800 text-white mt-12",children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"IKHAYA RENT"}),(0,Rg.jsx)("p",{className:"text-gray-400",children:"Your trusted platform for property rentals in South Africa."})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),(0,Rg.jsxs)("ul",{className:"space-y-2",children:[(0,Rg.jsx)("li",{children:(0,Rg.jsx)(Fw,{to:"/search",className:"text-gray-400 hover:text-white",children:"Search Properties"})}),(0,Rg.jsx)("li",{children:(0,Rg.jsx)(Fw,{to:"/register",className:"text-gray-400 hover:text-white",children:"List Your Property"})}),(0,Rg.jsx)("li",{children:(0,Rg.jsx)(Fw,{to:"/about",className:"text-gray-400 hover:text-white",children:"About Us"})})]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),(0,Rg.jsx)("p",{className:"text-gray-400",children:"Email: info@ikhayarent.co.za"}),(0,Rg.jsx)("p",{className:"text-gray-400",children:"Phone: +27 11 123 4567"})]})]}),(0,Rg.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-400",children:(0,Rg.jsx)("p",{children:"\xa9 2026 IKHAYA RENT PROPERTIES. All rights reserved."})})]})})]})},ox=()=>(0,Rg.jsxs)(sx,{children:[(0,Rg.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:(0,Rg.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("h1",{className:"text-5xl font-bold mb-6",children:"Find Your Perfect Home"}),(0,Rg.jsx)("p",{className:"text-xl mb-8 text-indigo-100",children:"Discover quality rental properties across South Africa"}),(0,Rg.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Rg.jsx)(Fw,{to:"/search",className:"bg-white text-indigo-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-100 transition",children:"Search Properties"}),(0,Rg.jsx)(Fw,{to:"/register",className:"bg-indigo-700 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-indigo-800 transition border-2 border-white",children:"List Your Property"})]})]})})}),(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"Why Choose IKHAYA?"}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Rg.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rg.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Rg.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Easy Search"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Find properties that match your needs with our advanced search filters"})]}),(0,Rg.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rg.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Rg.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Direct Messaging"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Connect directly with landlords and tenants through our messaging system"})]}),(0,Rg.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rg.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,Rg.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Secure & Trusted"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"All listings are verified and your data is protected with enterprise-grade security"})]})]})]}),(0,Rg.jsx)("div",{className:"bg-gray-100 py-16",children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"How It Works"}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4",children:"1"}),(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Create Account"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Sign up as a tenant or landlord"})]}),(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4",children:"2"}),(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Search or List"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Find properties or list your own"})]}),(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4",children:"3"}),(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Connect"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Message and schedule viewings"})]}),(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("div",{className:"w-16 h-16 bg-indigo-600 text-white rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4",children:"4"}),(0,Rg.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Move In"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Sign lease and manage everything online"})]})]})]})}),(0,Rg.jsx)("div",{className:"bg-indigo-600 text-white py-16",children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Started?"}),(0,Rg.jsx)("p",{className:"text-xl mb-8 text-indigo-100",children:"Join thousands of landlords and tenants using IKHAYA"}),(0,Rg.jsx)(Fw,{to:"/register",className:"bg-white text-indigo-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-100 transition inline-block",children:"Sign Up Now"})]})})]}),lx=()=>{const e=Cb(),[t,n]=(0,r.useState)({email:"",password:""}),[i,a]=(0,r.useState)({}),[s,o]=(0,r.useState)(!1),l=e=>{const{name:t,value:r}=e.target;n(e=>u(u({},e),{},{[t]:r})),i[t]&&a(e=>u(u({},e),{},{[t]:void 0}))};return(0,Rg.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),a({}),(()=>{const e={};return t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password||(e.password="Password is required"),a(e),0===Object.keys(e).length})()){o(!0);try{const n={email:t.email.trim(),password:t.password};await Lg.login(n),e("/dashboard")}catch(r){a({general:r.message||"Login failed. Please try again."})}finally{o(!1)}}},className:"space-y-6",children:[i.general&&(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:i.general}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,Rg.jsx)("input",{type:"email",id:"email",name:"email",value:t.email,onChange:l,className:"mt-1 block w-full px-3 py-2 border ".concat(i.email?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s,autoComplete:"email"}),i.email&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,Rg.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:l,className:"mt-1 block w-full px-3 py-2 border ".concat(i.password?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s,autoComplete:"current-password"}),i.password&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),(0,Rg.jsx)("div",{className:"flex items-center justify-end",children:(0,Rg.jsx)(Fw,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})}),(0,Rg.jsx)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(s?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:s?"Signing in...":"Sign in"}),(0,Rg.jsxs)("div",{className:"text-center text-sm",children:[(0,Rg.jsx)("span",{className:"text-gray-600",children:"Don't have an account? "}),(0,Rg.jsx)(Fw,{to:"/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Create one"})]})]})},cx=()=>(0,Rg.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Rg.jsxs)("div",{className:"max-w-md w-full",children:[(0,Rg.jsx)("div",{className:"text-center mb-8",children:(0,Rg.jsxs)(Fw,{to:"/",className:"inline-flex items-center justify-center",children:[(0,Rg.jsx)("svg",{className:"h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsx)("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:"IKHAYA"})]})}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,Rg.jsxs)("div",{className:"text-center mb-8",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome Back"}),(0,Rg.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your account"})]}),(0,Rg.jsx)(lx,{}),(0,Rg.jsx)("div",{className:"mt-6 text-center",children:(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,Rg.jsx)(Fw,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign up"})]})})]})]})}),ux=()=>{const e=Cb(),[t,n]=(0,r.useState)({name:"",email:"",password:"",confirmPassword:"",role:"",phone:""}),[i,a]=(0,r.useState)({}),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),d=e=>{const{name:t,value:r}=e.target;n(e=>u(u({},e),{},{[t]:r})),i[t]&&a(e=>u(u({},e),{},{[t]:void 0}))};return(0,Rg.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),a({}),c(""),(()=>{const e={};return t.name.trim()?t.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password?t.password.length<8?e.password="Password must be at least 8 characters":/[A-Z]/.test(t.password)?/[a-z]/.test(t.password)?/[0-9]/.test(t.password)||(e.password="Password must contain at least one number"):e.password="Password must contain at least one lowercase letter":e.password="Password must contain at least one uppercase letter":e.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",t.role||(e.role="Please select a role"),t.phone&&!/^\+?[\d\s-()]+$/.test(t.phone)&&(e.phone="Invalid phone number format"),a(e),0===Object.keys(e).length})()){o(!0);try{const n={name:t.name.trim(),email:t.email.trim(),password:t.password,role:t.role,phone:t.phone.trim()||void 0};await Lg.register(n),c("Registration successful! Please check your email to verify your account."),setTimeout(()=>{e("/login")},2e3)}catch(r){a({general:r.message||"Registration failed. Please try again."})}finally{o(!1)}}},className:"space-y-6",children:[l&&(0,Rg.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded",children:l}),i.general&&(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:i.general}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),(0,Rg.jsx)("input",{type:"text",id:"name",name:"name",value:t.name,onChange:d,className:"mt-1 block w-full px-3 py-2 border ".concat(i.name?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s}),i.name&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),(0,Rg.jsx)("input",{type:"email",id:"email",name:"email",value:t.email,onChange:d,className:"mt-1 block w-full px-3 py-2 border ".concat(i.email?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s}),i.email&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"I am a *"}),(0,Rg.jsxs)("select",{id:"role",name:"role",value:t.role,onChange:d,className:"mt-1 block w-full px-3 py-2 border ".concat(i.role?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s,children:[(0,Rg.jsx)("option",{value:"",children:"Select your role"}),(0,Rg.jsx)("option",{value:"landlord",children:"Landlord (I have properties to rent)"}),(0,Rg.jsx)("option",{value:"tenant",children:"Tenant (I'm looking for a property)"})]}),i.role&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.role})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number (Optional)"}),(0,Rg.jsx)("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:d,placeholder:"+27 12 345 6789",className:"mt-1 block w-full px-3 py-2 border ".concat(i.phone?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s}),i.phone&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.phone})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password *"}),(0,Rg.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:d,className:"mt-1 block w-full px-3 py-2 border ".concat(i.password?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s}),i.password&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.password}),(0,Rg.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters with uppercase, lowercase, and number"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password *"}),(0,Rg.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:d,className:"mt-1 block w-full px-3 py-2 border ".concat(i.confirmPassword?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:s}),i.confirmPassword&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),(0,Rg.jsx)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(s?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:s?"Creating Account...":"Create Account"}),(0,Rg.jsxs)("div",{className:"text-center text-sm",children:[(0,Rg.jsx)("span",{className:"text-gray-600",children:"Already have an account? "}),(0,Rg.jsx)(Fw,{to:"/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Sign in"})]})]})},dx=()=>(0,Rg.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Rg.jsxs)("div",{className:"max-w-md w-full",children:[(0,Rg.jsx)("div",{className:"text-center mb-8",children:(0,Rg.jsxs)(Fw,{to:"/",className:"inline-flex items-center justify-center",children:[(0,Rg.jsx)("svg",{className:"h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsx)("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:"IKHAYA"})]})}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,Rg.jsxs)("div",{className:"text-center mb-8",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Create Account"}),(0,Rg.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Join IKHAYA today"})]}),(0,Rg.jsx)(ux,{}),(0,Rg.jsx)("div",{className:"mt-6 text-center",children:(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,Rg.jsx)(Fw,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign in"})]})})]})]})}),hx=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)({}),[a,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)("");return(0,Rg.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),i({}),l(""),(()=>{const t={};return e.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(t.email="Invalid email address"):t.email="Email is required",i(t),0===Object.keys(t).length})()){s(!0);try{await Lg.requestPasswordReset(e.trim()),l("Password reset email sent! Please check your inbox for instructions."),t("")}catch(r){i({general:r.message||"Failed to send reset email. Please try again."})}finally{s(!1)}}},className:"space-y-6",children:[o&&(0,Rg.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded",children:o}),n.general&&(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:n.general}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,Rg.jsx)("input",{type:"email",id:"email",name:"email",value:e,onChange:e=>{t(e.target.value),n.email&&i(e=>u(u({},e),{},{email:void 0}))},className:"mt-1 block w-full px-3 py-2 border ".concat(n.email?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:a,autoComplete:"email"}),n.email&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.email})]}),(0,Rg.jsx)("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(a?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:a?"Sending...":"Send Reset Link"}),(0,Rg.jsx)("div",{className:"text-center text-sm",children:(0,Rg.jsx)(Fw,{to:"/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Back to Sign in"})})]})},fx=()=>(0,Rg.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Rg.jsxs)("div",{className:"max-w-md w-full",children:[(0,Rg.jsx)("div",{className:"text-center mb-8",children:(0,Rg.jsxs)(Fw,{to:"/",className:"inline-flex items-center justify-center",children:[(0,Rg.jsx)("svg",{className:"h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsx)("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:"IKHAYA"})]})}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,Rg.jsxs)("div",{className:"text-center mb-8",children:[(0,Rg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Reset Password"}),(0,Rg.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email to receive a reset link"})]}),(0,Rg.jsx)(hx,{}),(0,Rg.jsx)("div",{className:"mt-6 text-center",children:(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",(0,Rg.jsx)(Fw,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign in"})]})})]})]})}),mx=["image/jpeg","image/jpg","image/png"],px=5242880;const gx=new class{async uploadImage(e,t){try{this.validateImage(e);const n=this.generateUniqueFilename(e.name),r="".concat(t,"/").concat(n),i=_g(Ag,r);await function(e,t,n){return mg(e=q(e),t,n)}(i,e);const a=await function(e){return pg(e=q(e))}(i);return a}catch(n){throw console.error("Error uploading image:",n),new Error("Failed to upload image: ".concat(n.message))}}async uploadImages(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;try{if(e.length>n)throw new Error("Maximum ".concat(n," images allowed"));e.forEach(e=>this.validateImage(e));const r=e.map(e=>this.uploadImage(e,t));return await Promise.all(r)}catch(r){throw console.error("Error uploading images:",r),new Error("Failed to upload images: ".concat(r.message))}}async deleteImage(e){try{const t=this.extractPathFromUrl(e);if(!t)throw new Error("Invalid image URL");const n=_g(Ag,t);await function(e){return gg(e=q(e))}(n)}catch(t){throw console.error("Error deleting image:",t),new Error("Failed to delete image: ".concat(t.message))}}async deleteImages(e){try{const t=e.map(e=>this.deleteImage(e));await Promise.all(t)}catch(t){throw console.error("Error deleting images:",t),new Error("Failed to delete images: ".concat(t.message))}}validateImage(e){if(!e)throw new Error("No file provided");if(!mx.includes(e.type))throw new Error("Invalid file format. Only JPEG and PNG images are allowed");if(e.size>px)throw new Error("File size exceeds maximum limit of ".concat(5,"MB"))}generateUniqueFilename(e){const t=Date.now(),n=Math.random().toString(36).substring(2,15),r=e.split(".").pop();return"".concat(t,"_").concat(n,".").concat(r)}extractPathFromUrl(e){try{const t=e.match(/\/o\/(.+?)\?/);return t&&t[1]?decodeURIComponent(t[1]):null}catch(t){return null}}getFileSizeInMB(e){return e/1048576}isValidFormat(e){return mx.includes(e.type)}isValidSize(e){return e.size<=px}};const yx=new class{async createProperty(e,t){try{this.validatePropertyData(t);const n=Qf(Gf(jg,Qw)),r={landlordId:e,address:t.address,city:t.city,province:t.province,postalCode:t.postalCode,propertyType:t.propertyType,bedrooms:t.bedrooms,bathrooms:t.bathrooms,rentAmount:t.rentAmount,deposit:t.deposit,description:t.description,amenities:t.amenities,availableFrom:is.fromDate(t.availableFrom),status:"available",isPremium:!1,images:[],viewCount:0,createdAt:jm(),updatedAt:jm()};await ip(n,r);return u(u({id:n.id},r),{},{createdAt:r.createdAt,updatedAt:r.updatedAt})}catch(n){throw console.error("Error creating property:",n),new Error("Failed to create property: ".concat(n.message))}}async updateProperty(e,t){try{const n=Qf(jg,Qw,e);if(!(await np(n)).exists())throw new Error("Property not found");const r=u(u({},t),{},{updatedAt:jm()});t.availableFrom&&(r.availableFrom=is.fromDate(t.availableFrom)),await ap(n,r);const i=await np(n),a=i.data();return u({id:i.id},a)}catch(n){throw console.error("Error updating property:",n),new Error("Failed to update property: ".concat(n.message))}}async deleteProperty(e){try{const n=Qf(jg,Qw,e);if(!(await np(n)).exists())throw new Error("Property not found");await(t=n,op(Za(t.firestore,Xf),[new Cc(t._key,pc.none())]))}catch(n){throw console.error("Error deleting property:",n),new Error("Failed to delete property: ".concat(n.message))}var t}async getProperty(e){try{const t=Qf(jg,Qw,e),n=await np(t);if(!n.exists())return null;const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching property:",t),new Error("Failed to fetch property: ".concat(t.message))}}async searchProperties(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{location:t,minPrice:n,maxPrice:r,bedrooms:i,bathrooms:a,propertyType:s,sortBy:o="date",page:l=1,limit:c=20}=e,d=[];d.push(zm("status","==","available")),t&&d.push(zm("city","==",t)),s&&d.push(zm("propertyType","==",s)),void 0!==i&&d.push(zm("bedrooms",">=",i)),void 0!==a&&d.push(zm("bathrooms",">=",a)),void 0!==n&&d.push(zm("rentAmount",">=",n)),void 0!==r&&d.push(zm("rentAmount","<=",r)),d.push(Hm("isPremium","desc")),"price"===o?d.push(Hm("rentAmount","asc")):("date"===o||d.push(Hm("viewCount","desc")),d.push(Hm("createdAt","desc")));const h=Um(Gf(jg,Qw),...d,Km(c)),f=(await rp(h)).docs.map(e=>{const t=e.data();return u({id:e.id},t)}),m=f.length;return{properties:f,total:m,page:l,totalPages:Math.ceil(m/c)}}catch(t){throw console.error("Error searching properties:",t),new Error("Failed to search properties: ".concat(t.message))}}async updateStatus(e,t){try{const n=Qf(jg,Qw,e);if(!(await np(n)).exists())throw new Error("Property not found");await ap(n,{status:t,updatedAt:jm()});const r=await np(n),i=r.data();return u({id:r.id},i)}catch(n){throw console.error("Error updating property status:",n),new Error("Failed to update property status: ".concat(n.message))}}async getLandlordProperties(e){try{const t=Um(Gf(jg,Qw),zm("landlordId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching landlord properties:",t),new Error("Failed to fetch landlord properties: ".concat(t.message))}}async uploadImages(e,t){try{var n;const r=Qf(jg,Qw,e),i=await np(r);if(!i.exists())throw new Error("Property not found");const a=i.data(),s=a.isPremium?1/0:5,o=(null===(n=a.images)||void 0===n?void 0:n.length)||0,l=s===1/0?t.length:s-o;if(t.length>l)throw new Error("Cannot upload ".concat(t.length," images. Only ").concat(l," slots available. ").concat(a.isPremium?"":"Upgrade to premium for unlimited images."));const c="properties/".concat(e),u=await gx.uploadImages(t,c,t.length),d=[...a.images||[],...u];return await ap(r,{images:d,updatedAt:jm()}),u}catch(r){throw console.error("Error uploading property images:",r),new Error("Failed to upload property images: ".concat(r.message))}}async deleteImage(e,t){try{const n=Qf(jg,Qw,e),r=await np(n);if(!r.exists())throw new Error("Property not found");const i=(r.data().images||[]).filter(e=>e!==t);await gx.deleteImage(t),await ap(n,{images:i,updatedAt:jm()})}catch(n){throw console.error("Error deleting property image:",n),new Error("Failed to delete property image: ".concat(n.message))}}validatePropertyData(e){if(!e.address||0===e.address.trim().length)throw new Error("Address is required");if(!e.city||0===e.city.trim().length)throw new Error("City is required");if(!e.province||0===e.province.trim().length)throw new Error("Province is required");if(e.bedrooms<0)throw new Error("Bedrooms must be a non-negative number");if(e.bathrooms<0)throw new Error("Bathrooms must be a non-negative number");if(e.rentAmount<=0)throw new Error("Rent amount must be greater than zero");if(e.deposit<0)throw new Error("Deposit must be a non-negative number");if(!e.description||0===e.description.trim().length)throw new Error("Description is required");if(!e.availableFrom)throw new Error("Available from date is required");if(!["apartment","house","townhouse","room"].includes(e.propertyType))throw new Error("Invalid property type")}};const vx=new class{async createLead(e){try{this.validateLeadData(e);const t=Qf(Gf(jg,Yw)),n={tenantId:e.tenantId,propertyId:e.propertyId,landlordId:e.landlordId,status:"new",initialMessage:e.initialMessage,createdAt:jm(),updatedAt:jm()};await ip(t,n);return u(u({id:t.id},n),{},{createdAt:n.createdAt,updatedAt:n.updatedAt})}catch(t){throw console.error("Error creating lead:",t),new Error("Failed to create lead: ".concat(t.message))}}async getLeadsForProperty(e){try{const t=Um(Gf(jg,Yw),zm("propertyId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leads for property:",t),new Error("Failed to fetch leads for property: ".concat(t.message))}}async getLeadsForLandlord(e){try{const t=Um(Gf(jg,Yw),zm("landlordId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leads for landlord:",t),new Error("Failed to fetch leads for landlord: ".concat(t.message))}}async getLeadsForTenant(e){try{const t=Um(Gf(jg,Yw),zm("tenantId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leads for tenant:",t),new Error("Failed to fetch leads for tenant: ".concat(t.message))}}async getLead(e){try{const t=Qf(jg,Yw,e),n=await np(t);if(!n.exists())return null;const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching lead:",t),new Error("Failed to fetch lead: ".concat(t.message))}}async updateLeadStatus(e,t){try{const n=Qf(jg,Yw,e);if(!(await np(n)).exists())throw new Error("Lead not found");await ap(n,{status:t,updatedAt:jm()});const r=await np(n),i=r.data();return u({id:r.id},i)}catch(n){throw console.error("Error updating lead status:",n),new Error("Failed to update lead status: ".concat(n.message))}}async sendMessage(e){try{this.validateMessageData(e);const t=Qf(jg,Yw,e.leadId);if(!(await np(t)).exists())throw new Error("Lead not found");const n=rx(e.leadId),r=Qf(Gf(jg,n)),i={senderId:e.senderId,content:e.content,read:!1,createdAt:jm()};await ip(r,i),await ap(t,{updatedAt:jm()});return u(u({id:r.id},i),{},{createdAt:i.createdAt})}catch(t){throw console.error("Error sending message:",t),new Error("Failed to send message: ".concat(t.message))}}async getMessages(e){try{const t=Qf(jg,Yw,e);if(!(await np(t)).exists())throw new Error("Lead not found");const n=rx(e),r=Um(Gf(jg,n),Hm("createdAt","asc"));return(await rp(r)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching messages:",t),new Error("Failed to fetch messages: ".concat(t.message))}}async markMessageAsRead(e,t){try{const n=rx(e),r=Qf(jg,n,t);if(!(await np(r)).exists())throw new Error("Message not found");await ap(r,{read:!0})}catch(n){throw console.error("Error marking message as read:",n),new Error("Failed to mark message as read: ".concat(n.message))}}async getUnreadMessageCount(e,t){try{const n=rx(e),r=Um(Gf(jg,n),zm("read","==",!1),zm("senderId","!=",t));return(await rp(r)).size}catch(n){throw console.error("Error getting unread message count:",n),new Error("Failed to get unread message count: ".concat(n.message))}}validateLeadData(e){if(!e.tenantId||0===e.tenantId.trim().length)throw new Error("Tenant ID is required");if(!e.propertyId||0===e.propertyId.trim().length)throw new Error("Property ID is required");if(!e.landlordId||0===e.landlordId.trim().length)throw new Error("Landlord ID is required");if(!e.initialMessage||0===e.initialMessage.trim().length)throw new Error("Initial message is required");if(e.initialMessage.length>1e3)throw new Error("Initial message must be 1000 characters or less")}validateMessageData(e){if(!e.leadId||0===e.leadId.trim().length)throw new Error("Lead ID is required");if(!e.senderId||0===e.senderId.trim().length)throw new Error("Sender ID is required");if(!e.content||0===e.content.trim().length)throw new Error("Message content is required");if(e.content.length>1e3)throw new Error("Message content must be 1000 characters or less")}};const bx=new class{async createLease(e){try{this.validateLeaseData(e);const t=Qf(Gf(jg,$w)),n={propertyId:e.propertyId,landlordId:e.landlordId,tenantId:e.tenantId,rentAmount:e.rentAmount,deposit:e.deposit,startDate:is.fromDate(e.startDate),endDate:is.fromDate(e.endDate),terms:e.terms,status:"draft",createdAt:jm(),updatedAt:jm()};await ip(t,n);return u(u({id:t.id},n),{},{createdAt:n.createdAt,updatedAt:n.updatedAt})}catch(t){throw console.error("Error creating lease:",t),new Error("Failed to create lease: ".concat(t.message))}}async getLease(e){try{const t=Qf(jg,$w,e),n=await np(t);if(!n.exists())return null;const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching lease:",t),new Error("Failed to fetch lease: ".concat(t.message))}}async signLease(e,t,n){try{const r=Qf(jg,$w,e),i=await np(r);if(!i.exists())throw new Error("Lease not found");const a=i.data();if(!n||0===n.trim().length)throw new Error("Signature is required");const s={updatedAt:jm()};if(t===a.landlordId){if(a.landlordSignature)throw new Error("Landlord has already signed this lease");s.landlordSignature=n}else{if(t!==a.tenantId)throw new Error("User is not authorized to sign this lease");if(a.tenantSignature)throw new Error("Tenant has already signed this lease");s.tenantSignature=n}"draft"===a.status&&(s.status="pending_signatures"),await ap(r,s);const o=await np(r),l=o.data();return u({id:o.id},l)}catch(r){throw console.error("Error signing lease:",r),new Error("Failed to sign lease: ".concat(r.message))}}async terminateLease(e,t){try{const t=Qf(jg,$w,e),n=await np(t);if(!n.exists())throw new Error("Lease not found");if("active"!==n.data().status)throw new Error("Only active leases can be terminated");await ap(t,{status:"terminated",updatedAt:jm()});const r=await np(t),i=r.data();return u({id:r.id},i)}catch(n){throw console.error("Error terminating lease:",n),new Error("Failed to terminate lease: ".concat(n.message))}}async getActiveLeasesForLandlord(e){try{const t=Um(Gf(jg,$w),zm("landlordId","==",e),zm("status","==","active"),Hm("endDate","asc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching active leases for landlord:",t),new Error("Failed to fetch active leases for landlord: ".concat(t.message))}}async getActiveLeasesForTenant(e){try{const t=Um(Gf(jg,$w),zm("tenantId","==",e),zm("status","==","active"),Hm("endDate","asc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching active leases for tenant:",t),new Error("Failed to fetch active leases for tenant: ".concat(t.message))}}async getLeasesForLandlord(e){try{const t=Um(Gf(jg,$w),zm("landlordId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leases for landlord:",t),new Error("Failed to fetch leases for landlord: ".concat(t.message))}}async getLeasesForTenant(e){try{const t=Um(Gf(jg,$w),zm("tenantId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leases for tenant:",t),new Error("Failed to fetch leases for tenant: ".concat(t.message))}}async getLeasesForProperty(e){try{const t=Um(Gf(jg,$w),zm("propertyId","==",e),Hm("startDate","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching leases for property:",t),new Error("Failed to fetch leases for property: ".concat(t.message))}}async checkExpiringLeases(){try{const e=new Date;e.setDate(e.getDate()+30);const t=Um(Gf(jg,$w),zm("status","==","active"),zm("endDate","<=",is.fromDate(e)),Hm("endDate","asc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(e){throw console.error("Error checking expiring leases:",e),new Error("Failed to check expiring leases: ".concat(e.message))}}async updateLeaseStatus(e,t){try{const n=Qf(jg,$w,e);if(!(await np(n)).exists())throw new Error("Lease not found");await ap(n,{status:t,updatedAt:jm()});const r=await np(n),i=r.data();return u({id:r.id},i)}catch(n){throw console.error("Error updating lease status:",n),new Error("Failed to update lease status: ".concat(n.message))}}validateLeaseData(e){if(!e.propertyId||0===e.propertyId.trim().length)throw new Error("Property ID is required");if(!e.landlordId||0===e.landlordId.trim().length)throw new Error("Landlord ID is required");if(!e.tenantId||0===e.tenantId.trim().length)throw new Error("Tenant ID is required");if(e.rentAmount<=0)throw new Error("Rent amount must be greater than zero");if(e.deposit<0)throw new Error("Deposit must be a non-negative number");if(!e.startDate)throw new Error("Start date is required");if(!e.endDate)throw new Error("End date is required");if(e.endDate<=e.startDate)throw new Error("End date must be after start date");if(!e.terms||0===e.terms.trim().length)throw new Error("Lease terms are required")}};const wx=new class{async getLandlordDashboard(e){try{const t=await yx.getLandlordProperties(e),n=t.filter(e=>"available"===e.status).length,r=await vx.getLeadsForLandlord(e),i=r.length,a=t.length,s=t.filter(e=>"occupied"===e.status).length,o=a>0?s/a*100:0,l=(await bx.getActiveLeasesForLandlord(e)).reduce((e,t)=>e+t.rentAmount,0),c=this.generateLeadTrends(r,30);return{activeListings:n,totalLeads:i,occupancyRate:o,monthlyRevenue:l,leadTrends:c,propertyPerformance:await this.calculatePropertyPerformance(t,r)}}catch(t){throw console.error("Error fetching landlord dashboard:",t),new Error("Failed to fetch landlord dashboard: ".concat(t.message))}}async getTenantDashboard(e){try{const t=await this.getSavedProperties(e),n=await vx.getLeadsForTenant(e),r=await bx.getActiveLeasesForTenant(e),i=r.length>0?r[0]:void 0;return{savedProperties:t,activeInquiries:n,currentLease:i,maintenanceRequests:await this.getMaintenanceRequestsForTenant(e)}}catch(t){throw console.error("Error fetching tenant dashboard:",t),new Error("Failed to fetch tenant dashboard: ".concat(t.message))}}generateLeadTrends(e,t){const n=[],r=new Date;for(let i=t-1;i>=0;i--){const e=new Date(r);e.setDate(e.getDate()-i),e.setHours(0,0,0,0),n.push({date:e,value:0})}return e.forEach(e=>{const t=e.createdAt instanceof is?e.createdAt.toDate():new Date(e.createdAt);t.setHours(0,0,0,0);const r=n.find(e=>e.date.getTime()===t.getTime());r&&r.value++}),n}async calculatePropertyPerformance(e,t){const n=[];for(const r of e){const e=t.filter(e=>e.propertyId===r.id),i=e.length,a=e.filter(e=>"converted"===e.status).length,s=i>0?a/i*100:0;n.push({propertyId:r.id,propertyAddress:"".concat(r.address,", ").concat(r.city),views:r.viewCount||0,leads:i,conversionRate:s})}return n.sort((e,t)=>t.leads-e.leads),n}async getSavedProperties(e){try{const t="users/".concat(e,"/savedProperties"),n=Um(Gf(jg,t)),r=await rp(n),i=[];for(const e of r.docs){const t=e.id,n=await yx.getProperty(t);n&&i.push(n)}return i}catch(t){return console.error("Error fetching saved properties:",t),[]}}async getMaintenanceRequestsForTenant(e){try{const t=Um(Gf(jg,Xw),zm("tenantId","==",e));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){return console.error("Error fetching maintenance requests for tenant:",t),[]}}},xx=()=>{const{currentUser:e}=Mg(),[t,n]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(e)try{a(!0),o(null);const t=await wx.getLandlordDashboard(e.uid);n(t)}catch(t){console.error("Error fetching dashboard data:",t),o(t.message||"Failed to load dashboard data")}finally{a(!1)}})()},[e]),i?(0,Rg.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Rg.jsxs)("p",{className:"text-red-800",children:["Error: ",s]})}):t?(0,Rg.jsxs)("div",{className:"space-y-6",children:[(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Listings"}),(0,Rg.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.activeListings})]}),(0,Rg.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]})}),(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Leads"}),(0,Rg.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.totalLeads})]}),(0,Rg.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Occupancy Rate"}),(0,Rg.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[t.occupancyRate.toFixed(1),"%"]})]}),(0,Rg.jsx)("div",{className:"bg-purple-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),(0,Rg.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["R",t.monthlyRevenue.toLocaleString()]})]}),(0,Rg.jsx)("div",{className:"bg-yellow-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lead Trends (Last 30 Days)"}),(0,Rg.jsx)("div",{className:"h-64 flex items-end justify-between space-x-2",children:t.leadTrends.map((e,n)=>{const r=Math.max(...t.leadTrends.map(e=>e.value),1),i=e.value/r*100;return(0,Rg.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,Rg.jsx)("div",{className:"w-full bg-blue-500 rounded-t hover:bg-blue-600 transition-colors",style:{height:"".concat(i,"%"),minHeight:e.value>0?"4px":"0"},title:"".concat(e.date.toLocaleDateString(),": ").concat(e.value," leads")}),n%5===0&&(0,Rg.jsxs)("span",{className:"text-xs text-gray-500 mt-2",children:[e.date.getDate(),"/",e.date.getMonth()+1]})]},n)})})]}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Performance"}),0===t.propertyPerformance.length?(0,Rg.jsx)("p",{className:"text-gray-600",children:"No properties to display"}):(0,Rg.jsx)("div",{className:"overflow-x-auto",children:(0,Rg.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rg.jsx)("thead",{className:"bg-gray-50",children:(0,Rg.jsxs)("tr",{children:[(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leads"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conversion Rate"})]})}),(0,Rg.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.propertyPerformance.map(e=>(0,Rg.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.propertyAddress}),(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.views}),(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.leads}),(0,Rg.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[e.conversionRate.toFixed(1),"%"]})]},e.propertyId))})]})})]})]}):(0,Rg.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Rg.jsx)("p",{className:"text-gray-600",children:"No dashboard data available"})})},Ex=()=>{const{currentUser:e}=Mg(),t=Cb(),[n,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(e)try{s(!0),l(null);const t=await wx.getTenantDashboard(e.uid);i(t)}catch(t){console.error("Error fetching dashboard data:",t),l(t.message||"Failed to load dashboard data")}finally{s(!1)}})()},[e]),a?(0,Rg.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Rg.jsxs)("p",{className:"text-red-800",children:["Error: ",o]})}):n?(0,Rg.jsxs)("div",{className:"space-y-6",children:[n.currentLease&&(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Lease"}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Rent Amount"}),(0,Rg.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["R",n.currentLease.rentAmount.toLocaleString(),"/month"]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Lease End Date"}),(0,Rg.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:n.currentLease.endDate instanceof Date?n.currentLease.endDate.toLocaleDateString():new Date(1e3*n.currentLease.endDate.seconds).toLocaleDateString()})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,Rg.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:n.currentLease.status})]})]})]}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Saved Properties"}),(0,Rg.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.savedProperties.length})]}),(0,Rg.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})}),(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Inquiries"}),(0,Rg.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.activeInquiries.length})]}),(0,Rg.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,Rg.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})})]})}),(0,Rg.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Maintenance Requests"}),(0,Rg.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.maintenanceRequests.length})]}),(0,Rg.jsx)("div",{className:"bg-yellow-100 rounded-full p-3",children:(0,Rg.jsxs)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Saved Properties"}),0===n.savedProperties.length?(0,Rg.jsxs)("div",{className:"text-center py-8",children:[(0,Rg.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't saved any properties yet"}),(0,Rg.jsx)("button",{onClick:()=>t("/properties"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Browse Properties"})]}):(0,Rg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.savedProperties.map(e=>(0,Rg.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition cursor-pointer",onClick:()=>t("/properties/".concat(e.id)),children:[e.images&&e.images.length>0?(0,Rg.jsx)("img",{src:e.images[0],alt:e.address,className:"w-full h-48 object-cover"}):(0,Rg.jsx)("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:(0,Rg.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,Rg.jsxs)("div",{className:"p-4",children:[(0,Rg.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.address}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.city,", ",e.province]}),(0,Rg.jsxs)("p",{className:"text-lg font-bold text-blue-600",children:["R",e.rentAmount.toLocaleString(),"/month"]}),(0,Rg.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[(0,Rg.jsxs)("span",{children:[e.bedrooms," bed"]}),(0,Rg.jsxs)("span",{children:[e.bathrooms," bath"]})]})]})]},e.id))})]}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Inquiries"}),0===n.activeInquiries.length?(0,Rg.jsx)("p",{className:"text-gray-600",children:"No active inquiries"}):(0,Rg.jsx)("div",{className:"space-y-4",children:n.activeInquiries.map(e=>(0,Rg.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition cursor-pointer",onClick:()=>t("/leads/".concat(e.id)),children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Rg.jsx)("p",{className:"font-medium text-gray-900",children:"Property Inquiry"}),(0,Rg.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("new"===e.status?"bg-blue-100 text-blue-800":"contacted"===e.status?"bg-yellow-100 text-yellow-800":"scheduled"===e.status?"bg-purple-100 text-purple-800":"converted"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.initialMessage}),(0,Rg.jsx)("p",{className:"text-xs text-gray-500",children:e.createdAt instanceof Date?e.createdAt.toLocaleDateString():new Date(1e3*e.createdAt.seconds).toLocaleDateString()})]},e.id))})]}),(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Maintenance Requests"}),0===n.maintenanceRequests.length?(0,Rg.jsx)("p",{className:"text-gray-600",children:"No maintenance requests"}):(0,Rg.jsx)("div",{className:"space-y-4",children:n.maintenanceRequests.map(e=>(0,Rg.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.category}),(0,Rg.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ".concat("urgent"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.priority})]}),(0,Rg.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})]}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,Rg.jsx)("p",{className:"text-xs text-gray-500",children:e.createdAt instanceof Date?e.createdAt.toLocaleDateString():new Date(1e3*e.createdAt.seconds).toLocaleDateString()})]},e.id))})]})]}):(0,Rg.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Rg.jsx)("p",{className:"text-gray-600",children:"No dashboard data available"})})},Sx=()=>{const{userProfile:e}=Mg();return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"landlord"===(null===e||void 0===e?void 0:e.role)?"Landlord Dashboard":"Tenant Dashboard"}),(0,Rg.jsx)("p",{className:"text-gray-600 mt-2",children:"landlord"===(null===e||void 0===e?void 0:e.role)?"Manage your properties and track performance":"View your saved properties and inquiries"})]}),"landlord"===(null===e||void 0===e?void 0:e.role)?(0,Rg.jsx)(xx,{}):(0,Rg.jsx)(Ex,{})]})})},kx=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),[o,l]=(0,r.useState)({location:"",minPrice:void 0,maxPrice:void 0,bedrooms:void 0,bathrooms:void 0,propertyType:void 0,sortBy:"date"});(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{i(!0),s(null);const e={};o.location&&(e.location=o.location),o.minPrice&&(e.minPrice=o.minPrice),o.maxPrice&&(e.maxPrice=o.maxPrice),o.bedrooms&&(e.bedrooms=o.bedrooms),o.bathrooms&&(e.bathrooms=o.bathrooms),o.propertyType&&(e.propertyType=o.propertyType),o.sortBy&&(e.sortBy=o.sortBy);const n=await yx.searchProperties(e);t(n.properties)}catch(e){s(e.message||"Failed to search properties")}finally{i(!1)}},d=e=>{const{name:t,value:n}=e.target;l(e=>u(u({},e),{},{[t]:"minPrice"===t||"maxPrice"===t||"bedrooms"===t||"bathrooms"===t?n?Number(n):void 0:n||void 0}))};return(0,Rg.jsxs)(sx,{children:[(0,Rg.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-16",children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Rg.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Find Your Perfect Home"}),(0,Rg.jsx)("p",{className:"text-xl text-indigo-100",children:"Search from thousands of available properties"})]})}),(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 mb-8",children:[(0,Rg.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Search Filters"}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,Rg.jsx)("input",{type:"text",id:"location",name:"location",value:o.location||"",onChange:d,placeholder:"City or Province",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"propertyType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,Rg.jsxs)("select",{id:"propertyType",name:"propertyType",value:o.propertyType||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Rg.jsx)("option",{value:"",children:"All Types"}),(0,Rg.jsx)("option",{value:"apartment",children:"Apartment"}),(0,Rg.jsx)("option",{value:"house",children:"House"}),(0,Rg.jsx)("option",{value:"townhouse",children:"Townhouse"}),(0,Rg.jsx)("option",{value:"room",children:"Room"})]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Bedrooms"}),(0,Rg.jsx)("input",{type:"number",id:"bedrooms",name:"bedrooms",min:"0",value:o.bedrooms||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Bathrooms"}),(0,Rg.jsx)("input",{type:"number",id:"bathrooms",name:"bathrooms",min:"0",step:"0.5",value:o.bathrooms||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"minPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price (R)"}),(0,Rg.jsx)("input",{type:"number",id:"minPrice",name:"minPrice",min:"0",value:o.minPrice||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"maxPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price (R)"}),(0,Rg.jsx)("input",{type:"number",id:"maxPrice",name:"maxPrice",min:"0",value:o.maxPrice||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,Rg.jsxs)("select",{id:"sortBy",name:"sortBy",value:o.sortBy||"date",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Rg.jsx)("option",{value:"date",children:"Newest First"}),(0,Rg.jsx)("option",{value:"price",children:"Price: Low to High"}),(0,Rg.jsx)("option",{value:"relevance",children:"Most Relevant"})]})]})]}),(0,Rg.jsxs)("div",{className:"flex gap-4",children:[(0,Rg.jsx)("button",{onClick:c,disabled:n,className:"flex-1 bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 transition",children:n?"Searching...":"Search"}),(0,Rg.jsx)("button",{onClick:()=>{l({location:"",minPrice:void 0,maxPrice:void 0,bedrooms:void 0,bathrooms:void 0,propertyType:void 0,sortBy:"date"})},className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition",children:"Reset"})]})]}),a&&(0,Rg.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:a}),!n&&(0,Rg.jsxs)("div",{className:"mb-4 text-gray-600 font-medium",children:["Found ",e.length," ",1===e.length?"property":"properties"]}),n&&(0,Rg.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}),!n&&0===e.length&&(0,Rg.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,Rg.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Rg.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties found"}),(0,Rg.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search criteria to find more results."})]}),!n&&e.length>0&&(0,Rg.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{return(0,Rg.jsxs)(Fw,{to:"/properties/".concat(e.id),className:"bg-white overflow-hidden shadow-md rounded-lg hover:shadow-xl transition-shadow",children:[(0,Rg.jsxs)("div",{className:"h-48 bg-gray-200 relative",children:[e.images&&e.images.length>0?(0,Rg.jsx)("img",{src:e.images[0],alt:e.address,className:"w-full h-full object-cover"}):(0,Rg.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Rg.jsx)("svg",{className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.isPremium&&(0,Rg.jsx)("span",{className:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs font-semibold",children:"Premium"})]}),(0,Rg.jsxs)("div",{className:"p-4",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.propertyType.charAt(0).toUpperCase()+e.propertyType.slice(1)}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mb-2 truncate",children:e.address}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:[e.city,", ",e.province]}),(0,Rg.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[(0,Rg.jsxs)("span",{children:[e.bedrooms," bed"]}),(0,Rg.jsx)("span",{children:"\u2022"}),(0,Rg.jsxs)("span",{children:[e.bathrooms," bath"]})]}),(0,Rg.jsxs)("p",{className:"text-xl font-bold text-indigo-600",children:[(t=e.rentAmount,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0}).format(t)),"/mo"]})]})]},e.id);var t})})]})]})},_x=()=>{const{id:e}=Ib(),t=Cb(),[n,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{d()},[e]);const d=async()=>{if(!e)return l("Property ID is required"),void s(!1);try{s(!0),l(null);const t=await yx.getProperty(e);t?i(t):l("Property not found")}catch(t){l(t.message||"Failed to load property")}finally{s(!1)}},h=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0}).format(e);return a?(0,Rg.jsx)(sx,{children:(0,Rg.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):o||!n?(0,Rg.jsx)(sx,{children:(0,Rg.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Property Not Found"}),(0,Rg.jsx)("p",{className:"text-gray-600 mb-4",children:o||"The property you are looking for does not exist."}),(0,Rg.jsx)("button",{onClick:()=>t("/search"),className:"px-6 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Back to Search"})]})})}):(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("button",{onClick:()=>t(-1),className:"mb-4 flex items-center text-gray-600 hover:text-gray-900",children:[(0,Rg.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,Rg.jsxs)("div",{className:"relative",children:[n.images&&n.images.length>0?(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsx)("div",{className:"h-96 bg-gray-200",children:(0,Rg.jsx)("img",{src:n.images[c],alt:n.address,className:"w-full h-full object-cover"})}),n.images.length>1&&(0,Rg.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:n.images.map((e,t)=>(0,Rg.jsx)("button",{onClick:()=>u(t),className:"w-3 h-3 rounded-full ".concat(t===c?"bg-white":"bg-white/50")},t))}),n.images.length>1&&(0,Rg.jsxs)("div",{className:"absolute top-1/2 left-4 right-4 flex justify-between transform -translate-y-1/2",children:[(0,Rg.jsx)("button",{onClick:()=>u(e=>0===e?n.images.length-1:e-1),className:"bg-white/80 hover:bg-white p-2 rounded-full",children:(0,Rg.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Rg.jsx)("button",{onClick:()=>u(e=>e===n.images.length-1?0:e+1),className:"bg-white/80 hover:bg-white p-2 rounded-full",children:(0,Rg.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}):(0,Rg.jsx)("div",{className:"h-96 bg-gray-200 flex items-center justify-center",children:(0,Rg.jsx)("svg",{className:"h-24 w-24 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n.isPremium&&(0,Rg.jsx)("span",{className:"absolute top-4 right-4 bg-yellow-400 text-yellow-900 px-3 py-1 rounded text-sm font-semibold",children:"Premium Listing"})]}),(0,Rg.jsx)("div",{className:"p-8",children:(0,Rg.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Rg.jsxs)("div",{className:"lg:col-span-2",children:[(0,Rg.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[n.propertyType.charAt(0).toUpperCase()+n.propertyType.slice(1)," for Rent"]}),(0,Rg.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:n.address}),(0,Rg.jsxs)("p",{className:"text-lg text-gray-500 mb-6",children:[n.city,", ",n.province,n.postalCode&&", ".concat(n.postalCode)]}),(0,Rg.jsxs)("div",{className:"flex items-center gap-6 mb-8 pb-8 border-b",children:[(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-6 w-6 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsxs)("span",{className:"text-lg font-medium",children:[n.bedrooms," Bedrooms"]})]}),(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-6 w-6 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Rg.jsxs)("span",{className:"text-lg font-medium",children:[n.bathrooms," Bathrooms"]})]})]}),(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Description"}),(0,Rg.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:n.description})]}),n.amenities&&n.amenities.length>0&&(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Amenities"}),(0,Rg.jsx)("div",{className:"grid grid-cols-2 gap-3",children:n.amenities.map(e=>(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Rg.jsx)("span",{className:"text-gray-700",children:e})]},e))})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Additional Information"}),(0,Rg.jsxs)("dl",{className:"grid grid-cols-1 gap-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Available From"}),(0,Rg.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-ZA",{year:"numeric",month:"long",day:"numeric"})})(n.availableFrom)})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Deposit"}),(0,Rg.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:h(n.deposit)})]})]})]})]}),(0,Rg.jsx)("div",{className:"lg:col-span-1",children:(0,Rg.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-4",children:[(0,Rg.jsxs)("div",{className:"mb-6",children:[(0,Rg.jsx)("p",{className:"text-3xl font-bold text-blue-600 mb-2",children:h(n.rentAmount)}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"per month"})]}),(0,Rg.jsx)("button",{onClick:()=>t("/register"),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 font-medium mb-3",children:"Express Interest"}),(0,Rg.jsx)("button",{onClick:()=>t("/register"),className:"w-full border border-blue-600 text-blue-600 px-6 py-3 rounded-md hover:bg-blue-50 font-medium",children:"Contact Landlord"}),(0,Rg.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,Rg.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Sign in or create an account to contact the landlord"})})]})})]})})]})]})})},Nx=e=>{let{initialData:t,onSubmit:n,onCancel:i,isEdit:a=!1}=e;const[s,o]=(0,r.useState)({address:(null===t||void 0===t?void 0:t.address)||"",city:(null===t||void 0===t?void 0:t.city)||"",province:(null===t||void 0===t?void 0:t.province)||"",postalCode:(null===t||void 0===t?void 0:t.postalCode)||"",propertyType:(null===t||void 0===t?void 0:t.propertyType)||"apartment",bedrooms:(null===t||void 0===t?void 0:t.bedrooms)||1,bathrooms:(null===t||void 0===t?void 0:t.bathrooms)||1,rentAmount:(null===t||void 0===t?void 0:t.rentAmount)||0,deposit:(null===t||void 0===t?void 0:t.deposit)||0,description:(null===t||void 0===t?void 0:t.description)||"",amenities:(null===t||void 0===t?void 0:t.amenities)||[],availableFrom:(null===t||void 0===t?void 0:t.availableFrom)||new Date}),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)({}),[p,g]=(0,r.useState)(!1),y=e=>{const{name:t,value:n}=e.target;o(e=>u(u({},e),{},{[t]:"bedrooms"===t||"bathrooms"===t||"rentAmount"===t||"deposit"===t?Number(n):n})),f[t]&&m(e=>u(u({},e),{},{[t]:void 0}))},v=()=>{d.trim()&&!s.amenities.includes(d.trim())&&(o(e=>u(u({},e),{},{amenities:[...e.amenities,d.trim()]})),h(""))};return(0,Rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m({}),(()=>{const e={};return s.address.trim()||(e.address="Address is required"),s.city.trim()||(e.city="City is required"),s.province.trim()||(e.province="Province is required"),s.bedrooms<0&&(e.bedrooms="Bedrooms must be non-negative"),s.bathrooms<0&&(e.bathrooms="Bathrooms must be non-negative"),s.rentAmount<=0&&(e.rentAmount="Rent amount must be greater than zero"),s.deposit<0&&(e.deposit="Deposit must be non-negative"),s.description.trim()||(e.description="Description is required"),m(e),0===Object.keys(e).length})()){g(!0);try{await n(s,l)}catch(t){m({general:t.message||"Failed to save property. Please try again."})}finally{g(!1)}}},className:"space-y-6 max-w-4xl mx-auto",children:[f.general&&(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:f.general}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Property Details"}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rg.jsxs)("div",{className:"md:col-span-2",children:[(0,Rg.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address *"}),(0,Rg.jsx)("input",{type:"text",id:"address",name:"address",value:s.address,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.address?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.address&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.address})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City *"}),(0,Rg.jsx)("input",{type:"text",id:"city",name:"city",value:s.city,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.city?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.city&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.city})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province *"}),(0,Rg.jsx)("input",{type:"text",id:"province",name:"province",value:s.province,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.province?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.province&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.province})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rg.jsx)("input",{type:"text",id:"postalCode",name:"postalCode",value:s.postalCode,onChange:y,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:p})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"propertyType",className:"block text-sm font-medium text-gray-700",children:"Property Type *"}),(0,Rg.jsx)("select",{id:"propertyType",name:"propertyType",value:s.propertyType,onChange:y,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:p,children:["apartment","house","townhouse","room"].map(e=>(0,Rg.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700",children:"Bedrooms *"}),(0,Rg.jsx)("input",{type:"number",id:"bedrooms",name:"bedrooms",min:"0",value:s.bedrooms,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.bedrooms?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.bedrooms&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.bedrooms})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700",children:"Bathrooms *"}),(0,Rg.jsx)("input",{type:"number",id:"bathrooms",name:"bathrooms",min:"0",step:"0.5",value:s.bathrooms,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.bathrooms?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.bathrooms&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.bathrooms})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"rentAmount",className:"block text-sm font-medium text-gray-700",children:"Monthly Rent (R) *"}),(0,Rg.jsx)("input",{type:"number",id:"rentAmount",name:"rentAmount",min:"0",value:s.rentAmount,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.rentAmount?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.rentAmount&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.rentAmount})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"deposit",className:"block text-sm font-medium text-gray-700",children:"Deposit (R) *"}),(0,Rg.jsx)("input",{type:"number",id:"deposit",name:"deposit",min:"0",value:s.deposit,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.deposit?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.deposit&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.deposit})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"availableFrom",className:"block text-sm font-medium text-gray-700",children:"Available From *"}),(0,Rg.jsx)("input",{type:"date",id:"availableFrom",name:"availableFrom",value:s.availableFrom instanceof Date?s.availableFrom.toISOString().split("T")[0]:new Date(s.availableFrom).toISOString().split("T")[0],onChange:e=>o(t=>u(u({},t),{},{availableFrom:new Date(e.target.value)})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:p})]}),(0,Rg.jsxs)("div",{className:"md:col-span-2",children:[(0,Rg.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description *"}),(0,Rg.jsx)("textarea",{id:"description",name:"description",rows:4,value:s.description,onChange:y,className:"mt-1 block w-full px-3 py-2 border ".concat(f.description?"border-red-300":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),disabled:p}),f.description&&(0,Rg.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.description})]})]})]}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Amenities"}),(0,Rg.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,Rg.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),v()),placeholder:"Add amenity (e.g., Parking, WiFi)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:p}),(0,Rg.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",disabled:p,children:"Add"})]}),(0,Rg.jsx)("div",{className:"flex flex-wrap gap-2",children:s.amenities.map(e=>(0,Rg.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,Rg.jsx)("button",{type:"button",onClick:()=>(e=>{o(t=>u(u({},t),{},{amenities:t.amenities.filter(t=>t!==e)}))})(e),className:"ml-2 text-blue-600 hover:text-blue-800",disabled:p,children:"\xd7"})]},e))})]}),!a&&(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Property Images"}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("label",{htmlFor:"images",className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images (JPEG/PNG, max 5MB each)"}),(0,Rg.jsx)("input",{type:"file",id:"images",accept:"image/jpeg,image/jpg,image/png",multiple:!0,onChange:e=>{if(e.target.files){const t=Array.from(e.target.files);c(t)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:p}),l.length>0&&(0,Rg.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:[l.length," file(s) selected"]})]})]}),(0,Rg.jsxs)("div",{className:"flex justify-end gap-4",children:[i&&(0,Rg.jsx)("button",{type:"button",onClick:i,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:p,children:"Cancel"}),(0,Rg.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-white ".concat(p?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:p?"Saving...":a?"Update Property":"Create Property"})]})]})},Tx=()=>{const e=Cb(),{currentUser:t}=Mg();return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Property"}),(0,Rg.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Fill in the details below to list your property"})]}),(0,Rg.jsx)(Nx,{onSubmit:async(n,r)=>{if(!t)throw new Error("You must be logged in to create a property");const i=await yx.createProperty(t.uid,n);r.length>0&&await yx.uploadImages(i.id,r),e("/properties/manage")},onCancel:()=>{e("/properties/manage")}})]})})},Cx=e=>{let{properties:t,onStatusChange:n,onDelete:r,isLoading:i=!1}=e;const a=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"occupied":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i?(0,Rg.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):0===t.length?(0,Rg.jsxs)("div",{className:"text-center py-12",children:[(0,Rg.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Rg.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No properties"}),(0,Rg.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new property listing."}),(0,Rg.jsx)("div",{className:"mt-6",children:(0,Rg.jsxs)(Fw,{to:"/properties/create",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,Rg.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Rg.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New Property"]})})]}):(0,Rg.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{return(0,Rg.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-shadow",children:[(0,Rg.jsxs)("div",{className:"h-48 bg-gray-200 relative",children:[e.images&&e.images.length>0?(0,Rg.jsx)("img",{src:e.images[0],alt:e.address,className:"w-full h-full object-cover"}):(0,Rg.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Rg.jsx)("svg",{className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.isPremium&&(0,Rg.jsx)("span",{className:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs font-semibold",children:"Premium"})]}),(0,Rg.jsxs)("div",{className:"p-4",children:[(0,Rg.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rg.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.propertyType.charAt(0).toUpperCase()+e.propertyType.slice(1)}),(0,Rg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(a(e.status)),children:e.status})]}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600 mb-2 truncate",children:e.address}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:[e.city,", ",e.province]}),(0,Rg.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,Rg.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,Rg.jsxs)("span",{className:"flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.bedrooms," bed"]}),(0,Rg.jsxs)("span",{className:"flex items-center",children:[(0,Rg.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.bathrooms," bath"]})]})}),(0,Rg.jsxs)("p",{className:"text-xl font-bold text-blue-600 mb-4",children:[(t=e.rentAmount,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0}).format(t)),"/mo"]}),(0,Rg.jsxs)("div",{className:"flex items-center justify-between border-t pt-3",children:[(0,Rg.jsx)(Fw,{to:"/properties/".concat(e.id,"/edit"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),n&&(0,Rg.jsxs)("select",{value:e.status,onChange:t=>n(e.id,t.target.value),className:"text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,Rg.jsx)("option",{value:"available",children:"Available"}),(0,Rg.jsx)("option",{value:"occupied",children:"Occupied"}),(0,Rg.jsx)("option",{value:"inactive",children:"Inactive"})]}),r&&(0,Rg.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this property?")&&r(e.id)},className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Delete"})]})]})]},e.id);var t})})},Ix=()=>{const{currentUser:e}=Mg(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{l()},[e]);const l=async()=>{if(!e)return o("You must be logged in to view properties"),void a(!1);try{a(!0),o(null);const t=await yx.getLandlordProperties(e.uid);n(t)}catch(t){o(t.message||"Failed to load properties")}finally{a(!1)}};return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Properties"}),(0,Rg.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your property listings and track their status"})]}),(0,Rg.jsxs)(Fw,{to:"/properties/create",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,Rg.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Rg.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New Property"]})]}),s&&(0,Rg.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:s}),!i&&t.length>0&&(0,Rg.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,Rg.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rg.jsx)("div",{className:"p-5",children:(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,Rg.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rg.jsxs)("dl",{children:[(0,Rg.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Properties"}),(0,Rg.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:t.length})]})})]})})}),(0,Rg.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rg.jsx)("div",{className:"p-5",children:(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("svg",{className:"h-6 w-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Rg.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rg.jsxs)("dl",{children:[(0,Rg.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Available"}),(0,Rg.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:t.filter(e=>"available"===e.status).length})]})})]})})}),(0,Rg.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,Rg.jsx)("div",{className:"p-5",children:(0,Rg.jsxs)("div",{className:"flex items-center",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("svg",{className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rg.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,Rg.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Rg.jsxs)("dl",{children:[(0,Rg.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Occupied"}),(0,Rg.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:t.filter(e=>"occupied"===e.status).length})]})})]})})})]}),(0,Rg.jsx)(Cx,{properties:t,onStatusChange:async(e,t)=>{try{await yx.updateStatus(e,t),n(n=>n.map(n=>n.id===e?u(u({},n),{},{status:t}):n))}catch(r){alert(r.message||"Failed to update property status")}},onDelete:async e=>{try{await yx.deleteProperty(e),n(t=>t.filter(t=>t.id!==e))}catch(t){alert(t.message||"Failed to delete property")}},isLoading:i})]})})},jx=e=>{let{leadId:t,recipientName:n}=e;const{currentUser:i}=Mg(),[a,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!t)return;const e=rx(t),n=sp(Um(Gf(jg,e),Hm("createdAt","asc")),e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));s(n),(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})(),n.forEach(e=>{e.read||e.senderId===(null===i||void 0===i?void 0:i.uid)||vx.markMessageAsRead(t,e.id).catch(e=>{console.error("Error marking message as read:",e)})})},e=>{console.error("Error listening to messages:",e),f("Failed to load messages")});return()=>n()},[t,null===i||void 0===i?void 0:i.uid]);const p=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return((new Date).getTime()-t.getTime())/36e5<24?t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})};return(0,Rg.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-md",children:[(0,Rg.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Rg.jsxs)("h2",{className:"text-xl font-semibold",children:["Conversation with ",n]})}),(0,Rg.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[0===a.length?(0,Rg.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No messages yet. Start the conversation!"}):a.map(e=>{const t=e.senderId===(null===i||void 0===i?void 0:i.uid);return(0,Rg.jsx)("div",{className:"flex ".concat(t?"justify-end":"justify-start"),children:(0,Rg.jsxs)("div",{className:"max-w-[70%] rounded-lg px-4 py-2 ".concat(t?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,Rg.jsx)("p",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,Rg.jsx)("p",{className:"text-xs mt-1 ".concat(t?"text-blue-100":"text-gray-500"),children:p(e.createdAt)})]})},e.id)}),(0,Rg.jsx)("div",{ref:m})]}),h&&(0,Rg.jsx)("div",{className:"mx-6 mb-2 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h}),(0,Rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(null),i){if(o.trim()){d(!0);try{await vx.sendMessage({leadId:t,senderId:i.uid,content:o.trim()}),l("")}catch(n){f(n.message||"Failed to send message")}finally{d(!1)}}}else f("You must be logged in to send messages")},className:"px-6 py-4 border-t border-gray-200",children:[(0,Rg.jsxs)("div",{className:"flex gap-2",children:[(0,Rg.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:1e3,disabled:c}),(0,Rg.jsx)("button",{type:"submit",disabled:c||!o.trim(),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:c?"Sending...":"Send"})]}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[o.length,"/1000 characters"]})]})]})},Ax=()=>{const{leadId:e}=Ib(),{currentUser:t}=Mg(),n=Cb(),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e||!t)return;(async()=>{d(!0),f(null);try{const n=await vx.getLead(e);if(!n)return void f("Lead not found");if(n.tenantId!==t.uid&&n.landlordId!==t.uid)return void f("You are not authorized to view this lead");a(n);const r=await yx.getProperty(n.propertyId);o(r);const i=n.tenantId===t.uid?n.landlordId:n.tenantId,s=await Lg.getUserProfile(i);c(s)}catch(n){f(n.message||"Failed to load lead details")}finally{d(!1)}})()},[e,t]),u?(0,Rg.jsx)(sx,{children:(0,Rg.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):!h&&i&&s&&l?(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("button",{onClick:()=>n(-1),className:"mb-4 text-indigo-600 hover:text-indigo-800 flex items-center gap-2 font-medium",children:[(0,Rg.jsx)("span",{children:"\u2190"})," Back"]}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Rg.jsx)("div",{className:"lg:col-span-1",children:(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[(0,Rg.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Lead Information"}),(0,Rg.jsxs)("div",{className:"space-y-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Property"}),(0,Rg.jsx)("p",{className:"font-semibold",children:s.address}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:[s.city,", ",s.province]}),(0,Rg.jsxs)("p",{className:"text-lg font-bold text-indigo-600 mt-2",children:["R",s.rentAmount.toLocaleString(),"/month"]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:(null===t||void 0===t?void 0:t.uid)===i.landlordId?"Tenant":"Landlord"}),(0,Rg.jsx)("p",{className:"font-semibold",children:l.name}),(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:l.email}),l.phone&&(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:l.phone})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,Rg.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium capitalize bg-indigo-100 text-indigo-800",children:i.status})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Initial Message"}),(0,Rg.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.initialMessage})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"}),(0,Rg.jsx)("p",{className:"text-sm text-gray-700",children:i.createdAt&&(i.createdAt.toDate?i.createdAt.toDate():new Date(1e3*i.createdAt.seconds)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})})]})]})]})}),(0,Rg.jsx)("div",{className:"lg:col-span-2",children:(0,Rg.jsx)("div",{className:"h-[600px]",children:(0,Rg.jsx)(jx,{leadId:i.id,recipientName:l.name})})})]})]})}):(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:h||"Failed to load lead details"}),(0,Rg.jsx)("button",{onClick:()=>n(-1),className:"mt-4 text-indigo-600 hover:text-indigo-800 font-medium",children:"\u2190 Go Back"})]})})},Rx=()=>{const{currentUser:e}=Mg(),t=Cb(),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(new Map),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[h,f]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(!e)return;(async()=>{l(!0),d(null);try{const t=await vx.getLeadsForLandlord(e.uid);i(t);const n=Array.from(new Set(t.map(e=>e.propertyId))),r=new Map;await Promise.all(n.map(async e=>{const t=await yx.getProperty(e);t&&r.set(e,t)})),s(r)}catch(t){d(t.message||"Failed to load leads")}finally{l(!1)}})()},[e]);const m="all"===h?n:n.filter(e=>e.status===h),p=e=>{switch(e){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"scheduled":return"bg-purple-100 text-purple-800";case"converted":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})};return o?(0,Rg.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Rg.jsx)("div",{className:"text-gray-600",children:"Loading leads..."})}):(0,Rg.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-6",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Lead Management"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Manage inquiries for your properties"})]}),c&&(0,Rg.jsx)("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),(0,Rg.jsxs)("div",{className:"mb-6 flex gap-2 flex-wrap",children:[(0,Rg.jsxs)("button",{onClick:()=>f("all"),className:"px-4 py-2 rounded-md transition-colors ".concat("all"===h?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["All (",n.length,")"]}),["new","contacted","scheduled","converted","closed"].map(e=>{const t=n.filter(t=>t.status===e).length;return(0,Rg.jsxs)("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-md transition-colors capitalize ".concat(h===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e," (",t,")"]},e)})]}),0===m.length?(0,Rg.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,Rg.jsx)("p",{className:"text-gray-600 text-lg",children:"all"===h?"No leads yet. Your property inquiries will appear here.":"No ".concat(h," leads.")})}):(0,Rg.jsx)("div",{className:"space-y-4",children:m.map(e=>{const n=a.get(e.propertyId);return(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Rg.jsxs)("div",{className:"flex-1",children:[(0,Rg.jsx)("h3",{className:"text-xl font-semibold mb-1",children:(null===n||void 0===n?void 0:n.address)||"Property"}),(0,Rg.jsx)("p",{className:"text-gray-600 text-sm",children:g(e.createdAt)})]}),(0,Rg.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium capitalize ".concat(p(e.status)),children:e.status})]}),(0,Rg.jsx)("div",{className:"mb-4",children:(0,Rg.jsx)("p",{className:"text-gray-700 line-clamp-2",children:e.initialMessage})}),(0,Rg.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,Rg.jsx)("button",{onClick:()=>{return n=e.id,void t("/leads/".concat(n));var n},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"View & Reply"}),(0,Rg.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await vx.updateLeadStatus(e,t),i(n=>n.map(n=>n.id===e?u(u({},n),{},{status:t}):n))}catch(n){d(n.message||"Failed to update lead status")}})(e.id,t.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rg.jsx)("option",{value:"new",children:"New"}),(0,Rg.jsx)("option",{value:"contacted",children:"Contacted"}),(0,Rg.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,Rg.jsx)("option",{value:"converted",children:"Converted"}),(0,Rg.jsx)("option",{value:"closed",children:"Closed"})]})]})]},e.id)})})]})},Px=()=>{const{userProfile:e}=Mg();return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Lead Management"}),(0,Rg.jsx)("p",{className:"text-gray-600 mt-2",children:"landlord"===(null===e||void 0===e?void 0:e.role)?"Manage inquiries and leads for your properties":"View your property inquiries and messages"})]}),(0,Rg.jsx)(Rx,{})]})})},Dx=()=>{const e=Cb(),{currentUser:t,userProfile:n}=Mg(),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{h()},[t]);const h=async()=>{if(t&&n)try{let e;o(!0),c(null),e="landlord"===n.role?await bx.getLeasesForLandlord(t.uid):"tenant"===n.role?await bx.getLeasesForTenant(t.uid):[],a(e)}catch(e){console.error("Error loading leases:",e),c(e.message||"Failed to load leases")}finally{o(!1)}},f=e=>{const t=e.toDate(),n=new Date,r=t.getTime()-n.getTime();return Math.ceil(r/864e5)},m=e=>{if("active"!==e.status)return!1;const t=f(e.endDate);return t<=30&&t>0},p=e=>f(e.endDate)<0,g=e=>{if(p(e))return(0,Rg.jsx)("span",{className:"px-2 py-1 bg-red-200 text-red-800 text-xs rounded-full",children:"EXPIRED"});if(m(e)){const t=f(e.endDate);return(0,Rg.jsxs)("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-800 text-xs rounded-full",children:["EXPIRES IN ",t," DAYS"]})}return(0,Rg.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat({draft:"bg-gray-200 text-gray-800",pending_signatures:"bg-yellow-200 text-yellow-800",active:"bg-green-200 text-green-800",expired:"bg-red-200 text-red-800",terminated:"bg-red-200 text-red-800"}[e.status]||"bg-gray-200 text-gray-800"),children:e.status.replace("_"," ").toUpperCase()})},y=(()=>{switch(u){case"active":return i.filter(e=>"active"===e.status);case"expiring":return i.filter(e=>m(e));default:return i}})();return s?(0,Rg.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,Rg.jsx)("div",{className:"text-xl",children:"Loading leases..."})}):(0,Rg.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold",children:"Lease Management"}),"landlord"===(null===n||void 0===n?void 0:n.role)&&(0,Rg.jsx)("button",{onClick:()=>e("/leases/create"),className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create New Lease"})]}),l&&(0,Rg.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),i.filter(m).length>0&&(0,Rg.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,Rg.jsxs)("div",{className:"flex",children:[(0,Rg.jsx)("div",{className:"flex-shrink-0",children:(0,Rg.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Rg.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,Rg.jsx)("div",{className:"ml-3",children:(0,Rg.jsxs)("p",{className:"text-sm text-yellow-700",children:["You have ",i.filter(m).length," lease(s) expiring within 30 days. Please review and take action."]})})]})}),(0,Rg.jsxs)("div",{className:"flex gap-4 mb-6 border-b",children:[(0,Rg.jsxs)("button",{onClick:()=>d("all"),className:"pb-2 px-4 ".concat("all"===u?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"),children:["All Leases (",i.length,")"]}),(0,Rg.jsxs)("button",{onClick:()=>d("active"),className:"pb-2 px-4 ".concat("active"===u?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"),children:["Active (",i.filter(e=>"active"===e.status).length,")"]}),(0,Rg.jsxs)("button",{onClick:()=>d("expiring"),className:"pb-2 px-4 ".concat("expiring"===u?"border-b-2 border-blue-600 text-blue-600 font-medium":"text-gray-600 hover:text-gray-800"),children:["Expiring Soon (",i.filter(m).length,")"]})]}),0===y.length?(0,Rg.jsxs)("div",{className:"text-center py-12",children:[(0,Rg.jsx)("p",{className:"text-gray-500 text-lg",children:"No leases found"}),"landlord"===(null===n||void 0===n?void 0:n.role)&&(0,Rg.jsx)("button",{onClick:()=>e("/leases/create"),className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Create Your First Lease"})]}):(0,Rg.jsx)("div",{className:"space-y-4",children:y.map(t=>(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/leases/".concat(t.id)),children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("h3",{className:"text-lg font-semibold",children:["Lease #",t.id.substring(0,8)]}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:["Property ID: ",t.propertyId]})]}),g(t)]}),(0,Rg.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Monthly Rent"}),(0,Rg.jsxs)("p",{className:"font-semibold",children:["R",t.rentAmount.toLocaleString()]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Start Date"}),(0,Rg.jsx)("p",{className:"font-semibold",children:t.startDate.toDate().toLocaleDateString()})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"End Date"}),(0,Rg.jsx)("p",{className:"font-semibold",children:t.endDate.toDate().toLocaleDateString()})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Signatures"}),(0,Rg.jsxs)("p",{className:"font-semibold",children:[(t.landlordSignature?1:0)+(t.tenantSignature?1:0)," / 2"]})]})]}),m(t)&&(0,Rg.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:(0,Rg.jsxs)("p",{className:"text-sm text-yellow-800",children:["\u26a0\ufe0f This lease expires in ",f(t.endDate)," days. Please take action."]})}),p(t)&&"active"===t.status&&(0,Rg.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:(0,Rg.jsx)("p",{className:"text-sm text-red-800",children:"\u26a0\ufe0f This lease has expired. Please update the status."})})]},t.id))})]})},Lx=()=>{const{userProfile:e}=Mg();return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Lease Management"}),(0,Rg.jsx)("p",{className:"text-gray-600 mt-2",children:"landlord"===(null===e||void 0===e?void 0:e.role)?"Manage your property leases and agreements":"View and manage your lease agreements"})]}),(0,Rg.jsx)(Dx,{})]})})};const Ox=new class{async createMaintenanceRequest(e){try{this.validateMaintenanceRequestData(e);const t=Qf(Gf(jg,Xw)),n={propertyId:e.propertyId,tenantId:e.tenantId,landlordId:e.landlordId,category:e.category,priority:e.priority,description:e.description,status:"pending",images:[],notes:[],createdAt:jm(),updatedAt:jm()};await ip(t,n);return u(u({id:t.id},n),{},{createdAt:n.createdAt,updatedAt:n.updatedAt})}catch(t){throw console.error("Error creating maintenance request:",t),new Error("Failed to create maintenance request: ".concat(t.message))}}async getRequest(e){try{const t=Qf(jg,Xw,e),n=await np(t);if(!n.exists())return null;const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching maintenance request:",t),new Error("Failed to fetch maintenance request: ".concat(t.message))}}async getRequestsForProperty(e){try{const t=Um(Gf(jg,Xw),zm("propertyId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching maintenance requests for property:",t),new Error("Failed to fetch maintenance requests for property: ".concat(t.message))}}async getRequestsForLandlord(e){try{const t=Um(Gf(jg,Xw),zm("landlordId","==",e),Hm("priority","desc"),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching maintenance requests for landlord:",t),new Error("Failed to fetch maintenance requests for landlord: ".concat(t.message))}}async getRequestsForTenant(e){try{const t=Um(Gf(jg,Xw),zm("tenantId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching maintenance requests for tenant:",t),new Error("Failed to fetch maintenance requests for tenant: ".concat(t.message))}}async updateRequestStatus(e,t,n,r){try{const i=Qf(jg,Xw,e),a=await np(i);if(!a.exists())throw new Error("Maintenance request not found");const s=a.data(),o={status:t,updatedAt:jm()};if(n&&r){const e={userId:r,note:n,createdAt:is.now()};o.notes=[...s.notes,e]}await ap(i,o);const l=await np(i),c=l.data();return u({id:l.id},c)}catch(i){throw console.error("Error updating maintenance request status:",i),new Error("Failed to update maintenance request status: ".concat(i.message))}}async uploadMaintenanceImages(e,t){try{var n;const r=Qf(jg,Xw,e),i=await np(r);if(!i.exists())throw new Error("Maintenance request not found");const a=i.data(),s=3,o=s-((null===(n=a.images)||void 0===n?void 0:n.length)||0);if(t.length>o)throw new Error("Cannot upload ".concat(t.length," images. Only ").concat(o," slots available (max ").concat(s," images per request)."));const l="maintenance/".concat(e),c=await gx.uploadImages(t,l,t.length),u=[...a.images||[],...c];return await ap(r,{images:u,updatedAt:jm()}),c}catch(r){throw console.error("Error uploading maintenance images:",r),new Error("Failed to upload maintenance images: ".concat(r.message))}}async deleteMaintenanceImage(e,t){try{const n=Qf(jg,Xw,e),r=await np(n);if(!r.exists())throw new Error("Maintenance request not found");const i=(r.data().images||[]).filter(e=>e!==t);await gx.deleteImage(t),await ap(n,{images:i,updatedAt:jm()})}catch(n){throw console.error("Error deleting maintenance image:",n),new Error("Failed to delete maintenance image: ".concat(n.message))}}async addNote(e,t,n){try{const r=Qf(jg,Xw,e),i=await np(r);if(!i.exists())throw new Error("Maintenance request not found");const a=i.data();if(!n||0===n.trim().length)throw new Error("Note text is required");const s={userId:t,note:n.trim(),createdAt:is.now()};await ap(r,{notes:[...a.notes,s],updatedAt:jm()});const o=await np(r),l=o.data();return u({id:o.id},l)}catch(r){throw console.error("Error adding note to maintenance request:",r),new Error("Failed to add note to maintenance request: ".concat(r.message))}}validateMaintenanceRequestData(e){if(!e.propertyId||0===e.propertyId.trim().length)throw new Error("Property ID is required");if(!e.tenantId||0===e.tenantId.trim().length)throw new Error("Tenant ID is required");if(!e.landlordId||0===e.landlordId.trim().length)throw new Error("Landlord ID is required");if(!e.description||0===e.description.trim().length)throw new Error("Description is required");if(e.description.length>2e3)throw new Error("Description must be 2000 characters or less");if(!["plumbing","electrical","general","appliance","structural"].includes(e.category))throw new Error("Invalid maintenance category");if(!["low","medium","high","urgent"].includes(e.priority))throw new Error("Invalid maintenance priority")}},Mx=()=>{const{currentUser:e}=Mg(),[t,n]=(Cb(),(0,r.useState)([])),[i,a]=(0,r.useState)(new Map),[s,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)("all"),[f,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e)return;(async()=>{o(!0),c(null);try{const t=await Ox.getRequestsForLandlord(e.uid);n(t);const r=Array.from(new Set(t.map(e=>e.propertyId))),i=new Map;await Promise.all(r.map(async e=>{const t=await yx.getProperty(e);t&&i.set(e,t)})),a(i)}catch(t){c(t.message||"Failed to load maintenance requests")}finally{o(!1)}})()},[e]);const p="all"===d?t:t.filter(e=>e.status===d),g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})};return s?(0,Rg.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Rg.jsx)("div",{className:"text-gray-600",children:"Loading maintenance requests..."})}):(0,Rg.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-6",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Maintenance Management"}),(0,Rg.jsx)("p",{className:"text-gray-600",children:"Manage maintenance requests for your properties"})]}),l&&(0,Rg.jsx)("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),(0,Rg.jsxs)("div",{className:"mb-6 flex gap-2 flex-wrap",children:[(0,Rg.jsxs)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-md transition-colors ".concat("all"===d?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["All (",t.length,")"]}),["pending","in_progress","completed","cancelled"].map(e=>{const n=t.filter(t=>t.status===e).length;return(0,Rg.jsxs)("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-md transition-colors capitalize ".concat(d===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e.replace("_"," ")," (",n,")"]},e)})]}),0===p.length?(0,Rg.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,Rg.jsx)("p",{className:"text-gray-600 text-lg",children:"all"===d?"No maintenance requests yet.":"No ".concat(d.replace("_"," ")," requests.")})}):(0,Rg.jsx)("div",{className:"space-y-4",children:p.map(e=>{const t=i.get(e.propertyId);return(0,Rg.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Rg.jsxs)("div",{className:"flex-1",children:[(0,Rg.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Rg.jsx)("h3",{className:"text-xl font-semibold",children:(null===t||void 0===t?void 0:t.address)||"Property"}),(0,Rg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium uppercase ".concat(y(e.priority)),children:e.priority})]}),(0,Rg.jsxs)("p",{className:"text-gray-600 text-sm mb-1",children:["Category: ",(0,Rg.jsx)("span",{className:"capitalize",children:e.category})]}),(0,Rg.jsx)("p",{className:"text-gray-600 text-sm",children:v(e.createdAt)})]}),(0,Rg.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium capitalize ".concat(g(e.status)),children:e.status.replace("_"," ")})]}),(0,Rg.jsx)("div",{className:"mb-4",children:(0,Rg.jsx)("p",{className:"text-gray-700",children:e.description})}),e.images&&e.images.length>0&&(0,Rg.jsx)("div",{className:"mb-4 grid grid-cols-3 gap-2",children:e.images.map((e,t)=>(0,Rg.jsx)("img",{src:e,alt:"Issue ".concat(t+1),className:"w-full h-32 object-cover rounded-md cursor-pointer hover:opacity-80",onClick:()=>window.open(e,"_blank")},t))}),e.notes&&e.notes.length>0&&(0,Rg.jsxs)("div",{className:"mb-4 bg-gray-50 rounded-md p-3",children:[(0,Rg.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notes:"}),(0,Rg.jsx)("div",{className:"space-y-2",children:e.notes.map((e,t)=>(0,Rg.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Rg.jsx)("p",{children:e.note}),(0,Rg.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:v(e.createdAt)})]},t))})]}),(0,Rg.jsx)("div",{className:"flex gap-3",children:(0,Rg.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{m(e),c(null);try{await Ox.updateRequestStatus(e,t),n(n=>n.map(n=>n.id===e?u(u({},n),{},{status:t}):n))}catch(r){c(r.message||"Failed to update request status")}finally{m(null)}})(e.id,t.target.value),disabled:f===e.id,className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[(0,Rg.jsx)("option",{value:"pending",children:"Pending"}),(0,Rg.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,Rg.jsx)("option",{value:"completed",children:"Completed"}),(0,Rg.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]},e.id)})})]})},Fx=()=>{const{userProfile:e}=Mg();return(0,Rg.jsx)(sx,{children:(0,Rg.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rg.jsxs)("div",{className:"mb-8",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Maintenance Requests"}),(0,Rg.jsx)("p",{className:"text-gray-600 mt-2",children:"landlord"===(null===e||void 0===e?void 0:e.role)?"Manage maintenance requests for your properties":"Submit and track your maintenance requests"})]}),(0,Rg.jsx)(Mx,{})]})})};const Ux=new class{constructor(){this.DEFAULT_COMMISSION_RATE=.1}async calculateCommission(e){try{const t=Qf(jg,$w,e),n=await np(t);if(!n.exists())throw new Error("Lease not found");const r=n.data().rentAmount;if(!r||r<=0)throw new Error("Invalid rent amount in lease");return r*this.DEFAULT_COMMISSION_RATE}catch(t){throw console.error("Error calculating commission:",t),new Error("Failed to calculate commission: ".concat(t.message))}}async generateInvoice(e,t){try{if(!e||0===e.trim().length)throw new Error("Landlord ID is required");if(!t)throw new Error("Month is required");const n=Um(Gf(jg,$w),zm("landlordId","==",e),zm("status","==","active")),r=await rp(n);if(r.empty)throw new Error("No active leases found for landlord");const i=[];let a=0;for(const e of r.docs){const t=e.data(),n=await this.calculateCommission(e.id);i.push({leaseId:e.id,description:"Commission for property ".concat(t.propertyId),amount:n}),a+=n}const s=new Date;s.setDate(s.getDate()+15);const o=Qf(Gf(jg,Zw)),l={landlordId:e,amount:a,dueDate:is.fromDate(s),status:"pending",leaseIds:r.docs.map(e=>e.id),items:i,createdAt:jm()};await ip(o,l);return u(u({id:o.id},l),{},{createdAt:l.createdAt})}catch(n){throw console.error("Error generating invoice:",n),new Error("Failed to generate invoice: ".concat(n.message))}}async recordPayment(e,t){try{this.validatePaymentData(t);const n=Qf(jg,Zw,e),r=await np(n);if(!r.exists())throw new Error("Invoice not found");const i=r.data();if(t.amount>i.amount)throw new Error("Payment amount cannot exceed invoice amount");const a=Qf(Gf(jg,ex)),s={invoiceId:e,landlordId:i.landlordId,amount:t.amount,paymentMethod:t.paymentMethod,reference:t.reference,paymentDate:is.fromDate(t.paymentDate),createdAt:jm()};await ip(a,s),t.amount>=i.amount&&await ap(n,{status:"paid"});return u(u({id:a.id},s),{},{createdAt:s.createdAt})}catch(n){throw console.error("Error recording payment:",n),new Error("Failed to record payment: ".concat(n.message))}}async getPaymentHistory(e){try{const t=Um(Gf(jg,ex),zm("landlordId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching payment history:",t),new Error("Failed to fetch payment history: ".concat(t.message))}}async getOutstandingBalance(e){try{const t=Um(Gf(jg,Zw),zm("landlordId","==",e),zm("status","in",["pending","overdue"])),n=await rp(t);let r=0;for(const e of n.docs){const t=e.data(),n=Um(Gf(jg,ex),zm("invoiceId","==",e.id)),i=await rp(n);let a=0;i.docs.forEach(e=>{const t=e.data();a+=t.amount});const s=t.amount-a;s>0&&(r+=s)}return r}catch(t){throw console.error("Error calculating outstanding balance:",t),new Error("Failed to calculate outstanding balance: ".concat(t.message))}}async getInvoicesForLandlord(e){try{const t=Um(Gf(jg,Zw),zm("landlordId","==",e),Hm("createdAt","desc"));return(await rp(t)).docs.map(e=>{const t=e.data();return u({id:e.id},t)})}catch(t){throw console.error("Error fetching invoices:",t),new Error("Failed to fetch invoices: ".concat(t.message))}}async getInvoice(e){try{const t=Qf(jg,Zw,e),n=await np(t);if(!n.exists())return null;const r=n.data();return u({id:n.id},r)}catch(t){throw console.error("Error fetching invoice:",t),new Error("Failed to fetch invoice: ".concat(t.message))}}validatePaymentData(e){if(!e.amount||e.amount<=0)throw new Error("Payment amount must be greater than zero");if(!e.paymentMethod)throw new Error("Payment method is required");if(!e.reference||0===e.reference.trim().length)throw new Error("Payment reference is required");if(!e.paymentDate)throw new Error("Payment date is required")}},Vx=()=>{const{currentUser:e}=Mg(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(0),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[e]);const h=async()=>{if(e)try{c(!0),d(null);const[t,r,i]=await Promise.all([Ux.getPaymentHistory(e.uid),Ux.getInvoicesForLandlord(e.uid),Ux.getOutstandingBalance(e.uid)]);n(t),a(r),o(i)}catch(t){console.error("Error loading payment data:",t),d(t.message||"Failed to load payment data")}finally{c(!1)}};return l?(0,Rg.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,Rg.jsx)("div",{className:"text-xl",children:"Loading payment history..."})}):(0,Rg.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Payment History"}),u&&(0,Rg.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,Rg.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,Rg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h2",{className:"text-lg font-semibold text-gray-700",children:"Outstanding Balance"}),(0,Rg.jsxs)("p",{className:"text-3xl font-bold text-red-600 mt-2",children:["R",s.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s>0&&(0,Rg.jsx)("button",{onClick:()=>{const e=i.find(e=>"pending"===e.status||"overdue"===e.status);e&&(window.location.href="/invoices/".concat(e.id))},className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Make Payment"})]})}),(0,Rg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Total Paid"}),(0,Rg.jsxs)("p",{className:"text-2xl font-bold text-green-600 mt-2",children:["R",t.reduce((e,t)=>e+t.amount,0).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),(0,Rg.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-2",children:i.length})]}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Payments Made"}),(0,Rg.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-2",children:t.length})]})]}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6",children:[(0,Rg.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Rg.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Payments"})}),0===t.length?(0,Rg.jsx)("div",{className:"text-center py-12",children:(0,Rg.jsx)("p",{className:"text-gray-500",children:"No payments recorded yet"})}):(0,Rg.jsx)("div",{className:"overflow-x-auto",children:(0,Rg.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rg.jsx)("thead",{className:"bg-gray-50",children:(0,Rg.jsxs)("tr",{children:[(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rg.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"})]})}),(0,Rg.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{return(0,Rg.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.paymentDate.toDate().toLocaleDateString()}),(0,Rg.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["R",e.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(t=e.paymentMethod,{bank_transfer:"Bank Transfer",card:"Card",cash:"Cash"}[t]||t)}),(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.reference}),(0,Rg.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Rg.jsx)("a",{href:"/invoices/".concat(e.invoiceId),className:"text-blue-600 hover:text-blue-800 hover:underline",children:"View Invoice"})})]},e.id);var t})})]})})]})]})},zx=()=>{const{invoiceId:e}=Ib(),t=Cb(),{currentUser:n}=Mg(),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m()},[e]);const m=async()=>{if(e)try{c(!0),d(null);const t=await Ux.getInvoice(e);if(!t)return void d("Invoice not found");if(n&&t.landlordId!==n.uid)return void d("You are not authorized to view this invoice");a(t);const r=(await Ux.getPaymentHistory(t.landlordId)).filter(t=>t.invoiceId===e);o(r)}catch(t){console.error("Error loading invoice:",t),d(t.message||"Failed to load invoice")}finally{c(!1)}},p=()=>s.reduce((e,t)=>e+t.amount,0);if(l)return(0,Rg.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,Rg.jsx)("div",{className:"text-xl",children:"Loading invoice..."})});if(u||!i)return(0,Rg.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rg.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u||"Invoice not found"}),(0,Rg.jsx)("button",{onClick:()=>t("/payments"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"\u2190 Back to Payment History"})]});const g=(()=>{if(!i)return 0;const e=i.dueDate.toDate(),t=new Date,n=e.getTime()-t.getTime();return Math.ceil(n/864e5)})(),y=i?i.amount-p():0;return(0,Rg.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rg.jsx)("div",{className:"mb-6",children:(0,Rg.jsx)("button",{onClick:()=>t("/payments"),className:"text-blue-600 hover:text-blue-800 mb-4",children:"\u2190 Back to Payment History"})}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Invoice"}),(0,Rg.jsxs)("p",{className:"text-gray-600",children:["Invoice ID: ",i.id]})]}),(v=i.status,(0,Rg.jsx)("span",{className:"px-3 py-1 text-sm font-semibold rounded-full ".concat({pending:"bg-yellow-200 text-yellow-800",paid:"bg-green-200 text-green-800",overdue:"bg-red-200 text-red-800"}[v]||"bg-gray-200 text-gray-800"),children:v.toUpperCase()}))]}),"paid"!==i.status&&g<0&&(0,Rg.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4",children:(0,Rg.jsxs)("p",{className:"text-red-800 font-semibold",children:["\u26a0\ufe0f This invoice is ",Math.abs(g)," days overdue"]})}),"paid"!==i.status&&g>=0&&g<=7&&(0,Rg.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:(0,Rg.jsxs)("p",{className:"text-yellow-800 font-semibold",children:["\u26a0\ufe0f This invoice is due in ",g," day",1!==g?"s":""]})}),(0,Rg.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Issue Date"}),(0,Rg.jsx)("p",{className:"font-semibold",children:i.createdAt.toDate().toLocaleDateString()})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsx)("p",{className:"text-sm text-gray-600",children:"Due Date"}),(0,Rg.jsx)("p",{className:"font-semibold",children:i.dueDate.toDate().toLocaleDateString()})]})]}),(0,Rg.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,Rg.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),(0,Rg.jsxs)("table",{className:"min-w-full",children:[(0,Rg.jsx)("thead",{children:(0,Rg.jsxs)("tr",{className:"border-b",children:[(0,Rg.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"Description"}),(0,Rg.jsx)("th",{className:"text-right py-2 text-sm font-medium text-gray-600",children:"Amount"})]})}),(0,Rg.jsx)("tbody",{children:i.items.map((e,t)=>(0,Rg.jsxs)("tr",{className:"border-b",children:[(0,Rg.jsx)("td",{className:"py-3 text-sm",children:e.description}),(0,Rg.jsxs)("td",{className:"py-3 text-sm text-right",children:["R",e.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},t))})]})]}),(0,Rg.jsxs)("div",{className:"border-t-2 border-gray-300 mt-6 pt-4",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Rg.jsx)("span",{className:"text-lg font-semibold",children:"Total Amount:"}),(0,Rg.jsxs)("span",{className:"text-2xl font-bold",children:["R",i.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.length>0&&(0,Rg.jsxs)(Rg.Fragment,{children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-center mb-2 text-green-600",children:[(0,Rg.jsx)("span",{className:"text-sm",children:"Total Paid:"}),(0,Rg.jsxs)("span",{className:"text-lg font-semibold",children:["-R",p().toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Rg.jsxs)("div",{className:"flex justify-between items-center text-red-600",children:[(0,Rg.jsx)("span",{className:"text-lg font-semibold",children:"Remaining Balance:"}),(0,Rg.jsxs)("span",{className:"text-2xl font-bold",children:["R",y.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),"paid"!==i.status&&y>0&&(0,Rg.jsx)("div",{className:"mt-6",children:(0,Rg.jsx)("button",{onClick:()=>f(!0),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",children:"Make Payment"})})]}),s.length>0&&(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Payment History"}),(0,Rg.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,Rg.jsxs)("div",{className:"flex justify-between items-center border-b pb-3",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("p",{className:"font-semibold",children:["R",e.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Rg.jsxs)("p",{className:"text-sm text-gray-600",children:[e.paymentDate.toDate().toLocaleDateString()," - ",e.paymentMethod]}),(0,Rg.jsxs)("p",{className:"text-xs text-gray-500",children:["Ref: ",e.reference]})]}),(0,Rg.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"PAID"})]},e.id))})]}),h&&(0,Rg.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rg.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Record Payment"}),(0,Rg.jsx)("p",{className:"text-gray-600 mb-4",children:"Please record your payment details. This is for tracking purposes only."}),(0,Rg.jsx)("button",{onClick:()=>{f(!1),t("/payments/record/".concat(i.id))},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 mb-2",children:"Go to Payment Form"}),(0,Rg.jsx)("button",{onClick:()=>f(!1),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300",children:"Cancel"})]})})]});var v},Bx=()=>{const{invoiceId:e}=Ib(),t=Cb(),{currentUser:n}=Mg(),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)("bank_transfer"),[v,b]=(0,r.useState)(""),[w,x]=(0,r.useState)((new Date).toISOString().split("T")[0]);(0,r.useEffect)(()=>{E()},[e]);const E=async()=>{if(e)try{o(!0),d(null);const t=await Ux.getInvoice(e);if(!t)return void d("Invoice not found");if(n&&t.landlordId!==n.uid)return void d("You are not authorized to make payments for this invoice");a(t);const r=(await Ux.getPaymentHistory(t.landlordId)).filter(t=>t.invoiceId===e),i=r.reduce((e,t)=>e+t.amount,0),s=t.amount-i;p(s.toFixed(2))}catch(t){console.error("Error loading invoice:",t),d(t.message||"Failed to load invoice")}finally{o(!1)}};return s?(0,Rg.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,Rg.jsx)("div",{className:"text-xl",children:"Loading..."})}):u&&!i?(0,Rg.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,Rg.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),(0,Rg.jsx)("button",{onClick:()=>t("/payments"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"\u2190 Back to Payment History"})]}):h?(0,Rg.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,Rg.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[(0,Rg.jsx)("p",{className:"font-semibold",children:"Payment recorded successfully!"}),(0,Rg.jsx)("p",{className:"text-sm mt-1",children:"Redirecting to invoice..."})]})}):(0,Rg.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,Rg.jsx)("div",{className:"mb-6",children:(0,Rg.jsx)("button",{onClick:()=>t("/invoices/".concat(e)),className:"text-blue-600 hover:text-blue-800 mb-4",children:"\u2190 Back to Invoice"})}),(0,Rg.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Rg.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Record Payment"}),i&&(0,Rg.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,Rg.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Rg.jsx)("span",{className:"text-sm text-gray-600",children:"Invoice Amount:"}),(0,Rg.jsxs)("span",{className:"font-semibold",children:["R",i.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Rg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rg.jsx)("span",{className:"text-sm text-gray-600",children:"Due Date:"}),(0,Rg.jsx)("span",{className:"font-semibold",children:i.dueDate.toDate().toLocaleDateString()})]})]}),u&&(0,Rg.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,Rg.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),!e||!i)return void d("Invoice not found");const r=parseFloat(m);if(isNaN(r)||r<=0)d("Please enter a valid payment amount");else if(r>i.amount)d("Payment amount cannot exceed invoice amount");else if(v.trim())try{c(!0),d(null);const n={amount:r,paymentMethod:g,reference:v.trim(),paymentDate:new Date(w)};await Ux.recordPayment(e,n),f(!0),setTimeout(()=>{t("/invoices/".concat(e))},2e3)}catch(a){console.error("Error recording payment:",a),d(a.message||"Failed to record payment")}finally{c(!1)}else d("Please enter a payment reference")},className:"space-y-6",children:[(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount ",(0,Rg.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rg.jsxs)("div",{className:"relative",children:[(0,Rg.jsx)("span",{className:"absolute left-3 top-2 text-gray-500",children:"R"}),(0,Rg.jsx)("input",{type:"number",id:"amount",value:m,onChange:e=>p(e.target.value),step:"0.01",min:"0.01",max:null===i||void 0===i?void 0:i.amount,required:!0,className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rg.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: R",null===i||void 0===i?void 0:i.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Method ",(0,Rg.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rg.jsxs)("select",{id:"paymentMethod",value:g,onChange:e=>y(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rg.jsx)("option",{value:"bank_transfer",children:"Bank Transfer"}),(0,Rg.jsx)("option",{value:"card",children:"Card"}),(0,Rg.jsx)("option",{value:"cash",children:"Cash"})]})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Reference ",(0,Rg.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rg.jsx)("input",{type:"text",id:"reference",value:v,onChange:e=>b(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Transaction ID, Check number"}),(0,Rg.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your transaction reference or confirmation number"})]}),(0,Rg.jsxs)("div",{children:[(0,Rg.jsxs)("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Date ",(0,Rg.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rg.jsx)("input",{type:"date",id:"paymentDate",value:w,onChange:e=>x(e.target.value),max:(new Date).toISOString().split("T")[0],required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rg.jsxs)("div",{className:"flex gap-4",children:[(0,Rg.jsx)("button",{type:"submit",disabled:l,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:l?"Recording Payment...":"Record Payment"}),(0,Rg.jsx)("button",{type:"button",onClick:()=>t("/invoices/".concat(e)),className:"px-6 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]}),(0,Rg.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,Rg.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Rg.jsx)("strong",{children:"Note:"})," This form is for recording payments that have already been made. Please ensure you have completed the actual payment transaction before recording it here."]})})]})]})},qx=()=>(0,Rg.jsx)(Vx,{}),Hx=()=>(0,Rg.jsx)(zx,{}),Wx=()=>(0,Rg.jsx)(Bx,{}),Kx=e=>{let{children:t,requiredRole:n}=e;const{currentUser:r,userProfile:i,loading:a}=Mg();return a?(0,Rg.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Rg.jsxs)("div",{className:"text-center",children:[(0,Rg.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rg.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?n&&(null===i||void 0===i?void 0:i.role)!==n?(0,Rg.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Rg.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Rg.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,Rg.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),(0,Rg.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Back"})]})}):(0,Rg.jsx)(Rg.Fragment,{children:t}):(0,Rg.jsx)(nw,{to:"/login",replace:!0})},Gx=(Qx=[{path:"/",element:(0,Rg.jsx)(ox,{})},{path:"/login",element:(0,Rg.jsx)(cx,{})},{path:"/register",element:(0,Rg.jsx)(dx,{})},{path:"/forgot-password",element:(0,Rg.jsx)(fx,{})},{path:"/dashboard",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Sx,{})})},{path:"/search",element:(0,Rg.jsx)(kx,{})},{path:"/properties/create",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Tx,{})})},{path:"/properties/manage",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Ix,{})})},{path:"/properties/:propertyId",element:(0,Rg.jsx)(_x,{})},{path:"/leads",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Px,{})})},{path:"/leads/:leadId",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Ax,{})})},{path:"/leases",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Lx,{})})},{path:"/maintenance",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Fx,{})})},{path:"/payments",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(qx,{})})},{path:"/invoices/:invoiceId",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Hx,{})})},{path:"/payments/record/:invoiceId",element:(0,Rg.jsx)(Kx,{children:(0,Rg.jsx)(Wx,{})})}],dv({basename:null===Yx||void 0===Yx?void 0:Yx.basename,getContext:null===Yx||void 0===Yx?void 0:Yx.getContext,future:null===Yx||void 0===Yx?void 0:Yx.future,history:Yg({window:null===Yx||void 0===Yx?void 0:Yx.window}),hydrationData:(null===Yx||void 0===Yx?void 0:Yx.hydrationData)||Lw(),routes:Qx,mapRouteProperties:Jb,hydrationRouteProperties:$b,dataStrategy:null===Yx||void 0===Yx?void 0:Yx.dataStrategy,patchRoutesOnNavigation:null===Yx||void 0===Yx?void 0:Yx.patchRoutesOnNavigation,window:null===Yx||void 0===Yx?void 0:Yx.window,unstable_instrumentations:null===Yx||void 0===Yx?void 0:Yx.unstable_instrumentations}).initialize());var Qx,Yx;const Jx=()=>(0,Rg.jsx)(Gw,{router:Gx});const $x=function(){return(0,Rg.jsx)(Dg,{children:(0,Rg.jsx)(Fg,{children:(0,Rg.jsx)(Jx,{})})})},Xx=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)})};a.createRoot(document.getElementById("root")).render((0,Rg.jsx)(r.StrictMode,{children:(0,Rg.jsx)($x,{})})),Xx()})();
//# sourceMappingURL=main.f77db127.js.map